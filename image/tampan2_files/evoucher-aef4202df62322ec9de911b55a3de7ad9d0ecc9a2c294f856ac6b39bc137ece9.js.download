!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VueRouter=e()}(this,function(){"use strict";function t(t,e){if(!t)throw new Error("[vue-router] "+e)}function e(t,e){t||"undefined"!=typeof console&&console.warn("[vue-router] "+e)}function n(t,n){switch(typeof n){case"undefined":return;case"object":return n;case"function":return n(t);case"boolean":return n?t.params:void 0;default:e(!1,'props in "'+t.path+'" is a '+typeof n+", expecting an object, function or boolean.")}}function i(t,n,i){void 0===n&&(n={});var o,r=i||a;try{o=r(t||"")}catch(s){e(!1,s.message),o={}}for(var c in n){var u=n[c];o[c]=Array.isArray(u)?u.slice():u}return o}function a(t){var e={};return(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var n=t.replace(/\+/g," ").split("="),i=Bt(n.shift()),a=n.length>0?Bt(n.join("=")):null;void 0===e[i]?e[i]=a:Array.isArray(e[i])?e[i].push(a):e[i]=[e[i],a]}),e):e}function o(t){var e=t?Object.keys(t).map(function(e){var n=t[e];if(void 0===n)return"";if(null===n)return At(e);if(Array.isArray(n)){var i=[];return n.slice().forEach(function(t){void 0!==t&&(null===t?i.push(At(e)):i.push(At(e)+"="+At(t)))}),i.join("&")}return At(e)+"="+At(n)}).filter(function(t){return t.length>0}).join("&"):null;return e?"?"+e:""}function r(t,e,n,i){var a=i&&i.options.stringifyQuery,o={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:e.query||{},params:e.params||{},fullPath:c(e,a),matched:t?s(t):[]};return n&&(o.redirectedFrom=c(n,a)),Object.freeze(o)}function s(t){for(var e=[];t;)e.unshift(t),t=t.parent;return e}function c(t,e){var n=t.path,i=t.query;void 0===i&&(i={});var a=t.hash;void 0===a&&(a="");var r=e||o;return(n||"/")+r(i)+a}function u(t,e){return e===It?t===e:e?t.path&&e.path?t.path.replace(jt,"")===e.path.replace(jt,"")&&t.hash===e.hash&&l(t.query,e.query):t.name&&e.name?t.name===e.name&&t.hash===e.hash&&l(t.query,e.query)&&l(t.params,e.params):!1:!1}function l(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n=Object.keys(t),i=Object.keys(e);return n.length!==i.length?!1:n.every(function(n){return String(t[n])===String(e[n])})}function d(t,e){return 0===t.path.replace(jt,"/").indexOf(e.path.replace(jt,"/"))&&(!e.hash||t.hash===e.hash)&&p(t.query,e.query)}function p(t,e){for(var n in e)if(!(n in t))return!1;return!0}function h(t){if(!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function f(t){if(t)for(var e,n=0;n<t.length;n++){if(e=t[n],"a"===e.tag)return e;if(e.children&&(e=f(e.children)))return e}}function m(t){if(!m.installed){m.installed=!0,St=t,Object.defineProperty(t.prototype,"$router",{get:function(){return this.$root._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this.$root._route}});var e=function(t){return void 0!==t},n=function(t,n){var i=t.$options._parentVnode;e(i)&&e(i=i.data)&&e(i=i.registerRouteInstance)&&i(t,n)};t.mixin({beforeCreate:function(){e(this.$options.router)&&(this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)),n(this,this)},destroyed:function(){n(this)}}),t.component("router-view",Pt),t.component("router-link",Mt);var i=t.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.created}}function v(t,e,n){var i=t.charAt(0);if("/"===i)return t;if("?"===i||"#"===i)return e+t;var a=e.split("/");n&&a[a.length-1]||a.pop();for(var o=t.replace(/^\//,"").split("/"),r=0;r<o.length;r++){var s=o[r];".."===s?a.pop():"."!==s&&a.push(s)}return""!==a[0]&&a.unshift(""),a.join("/")}function g(t){var e="",n="",i=t.indexOf("#");i>=0&&(e=t.slice(i),t=t.slice(0,i));var a=t.indexOf("?");return a>=0&&(n=t.slice(a+1),t=t.slice(0,a)),{path:t,query:n,hash:e}}function y(t){return t.replace(/\/\//g,"/")}function b(t,e){for(var n,i=[],a=0,o=0,r="",s=e&&e.delimiter||"/";null!=(n=Kt.exec(t));){var c=n[0],u=n[1],l=n.index;if(r+=t.slice(o,l),o=l+c.length,u)r+=u[1];else{var d=t[o],p=n[2],h=n[3],f=n[4],m=n[5],v=n[6],g=n[7];r&&(i.push(r),r="");var y=null!=p&&null!=d&&d!==p,b="+"===v||"*"===v,k="?"===v||"*"===v,_=n[2]||s,w=f||m;i.push({name:h||a++,prefix:p||"",delimiter:_,optional:k,repeat:b,partial:y,asterisk:!!g,pattern:w?D(w):g?".*":"[^"+T(_)+"]+?"})}}return o<t.length&&(r+=t.substr(o)),r&&i.push(r),i}function k(t,e){return x(b(t,e))}function _(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function w(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function x(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,i){for(var a="",o=n||{},r=i||{},s=r.pretty?_:encodeURIComponent,c=0;c<t.length;c++){var u=t[c];if("string"!=typeof u){var l,d=o[u.name];if(null==d){if(u.optional){u.partial&&(a+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(qt(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(l=s(d[p]),!e[c].test(l))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(l)+"`");a+=(0===p?u.prefix:u.delimiter)+l}}else{if(l=u.asterisk?w(d):s(d),!e[c].test(l))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+l+'"');a+=u.prefix+l}}else a+=u}return a}}function T(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function D(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function S(t,e){return t.keys=e,t}function P(t){return t.sensitive?"":"i"}function E(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return S(t,e)}function L(t,e,n){for(var i=[],a=0;a<t.length;a++)i.push(B(t[a],e,n).source);var o=new RegExp("(?:"+i.join("|")+")",P(n));return S(o,e)}function C(t,e,n){return A(b(t,n),e,n)}function A(t,e,n){qt(e)||(n=e||n,e=[]),n=n||{};for(var i=n.strict,a=n.end!==!1,o="",r=0;r<t.length;r++){var s=t[r];if("string"==typeof s)o+=T(s);else{var c=T(s.prefix),u="(?:"+s.pattern+")";e.push(s),s.repeat&&(u+="(?:"+c+u+")*"),u=s.optional?s.partial?c+"("+u+")?":"(?:"+c+"("+u+"))?":c+"("+u+")",o+=u}}var l=T(n.delimiter||"/"),d=o.slice(-l.length)===l;return i||(o=(d?o.slice(0,-l.length):o)+"(?:"+l+"(?=$))?"),o+=a?"$":i&&d?"":"(?="+l+"|$)",S(new RegExp("^"+o,P(n)),e)}function B(t,e,n){return qt(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?E(t,e):qt(t)?L(t,e,n):C(t,e,n)}function j(t,n,i){try{var a=Ht[t]||(Ht[t]=Rt.compile(t));return a(n||{},{pretty:!0})}catch(o){return e(!1,"missing param for "+i+": "+o.message),""}}function I(t,e,n,i){var a=e||[],o=n||Object.create(null),r=i||Object.create(null);t.forEach(function(t){$(a,o,r,t)});for(var s=0,c=a.length;c>s;s++)"*"===a[s]&&(a.push(a.splice(s,1)[0]),c--,s--);return{pathList:a,pathMap:o,nameMap:r}}function $(n,i,a,o,r,s){var c=o.path,u=o.name;t(null!=c,'"path" is required in a route configuration.'),t("string"!=typeof o.component,'route config "component" for path: '+String(c||u)+" cannot be a string id. Use an actual component instead.");var l=M(c,r),d={path:l,regex:O(l),components:o.components||{"default":o.component},instances:{},name:u,parent:r,matchAs:s,redirect:o.redirect,beforeEnter:o.beforeEnter,meta:o.meta||{},props:null==o.props?{}:o.components?o.props:{"default":o.props}};if(o.children&&(o.name&&o.children.some(function(t){return/^\/?$/.test(t.path)})&&e(!1,"Named Route '"+o.name+"' has a default child route. When navigating to this named route (:to=\"{name: '"+o.name+"'\"), the default child route will not be rendered. Remove the name from this route and use the name of the default child route for named links instead."),o.children.forEach(function(t){var e=s?y(s+"/"+t.path):void 0;$(n,i,a,t,d,e)})),void 0!==o.alias)if(Array.isArray(o.alias))o.alias.forEach(function(t){var e={path:t,children:o.children};$(n,i,a,e,r,d.path)});else{var p={path:o.alias,children:o.children};$(n,i,a,p,r,d.path)}i[d.path]||(n.push(d.path),i[d.path]=d),u&&(a[u]?s||e(!1,'Duplicate named routes definition: { name: "'+u+'", path: "'+d.path+'" }'):a[u]=d)}function O(t){var n=Rt(t),i={};return n.keys.forEach(function(n){e(!i[n.name],'Duplicate param keys in route with path: "'+t+'"'),i[n.name]=!0}),n}function M(t,e){return t=t.replace(/\/$/,""),"/"===t[0]?t:null==e?t:y(e.path+"/"+t)}function N(t,n,a,o){var r="string"==typeof t?{path:t}:t;if(r.name||r._normalized)return r;if(!r.path&&r.params&&n){r=q({},r),r._normalized=!0;var s=q(q({},n.params),r.params);if(n.name)r.name=n.name,r.params=s;else if(n.matched){var c=n.matched[n.matched.length-1].path;r.path=j(c,s,"path "+n.path)}else e(!1,"relative params navigation requires a current route.");return r}var u=g(r.path||""),l=n&&n.path||"/",d=u.path?v(u.path,l,a||r.append):l,p=i(u.query,r.query,o&&o.options.parseQuery),h=r.hash||u.hash;return h&&"#"!==h.charAt(0)&&(h="#"+h),{_normalized:!0,path:d,query:p,hash:h}}function q(t,e){for(var n in e)t[n]=e[n];return t}function R(n,i){function a(t){I(t,d,p,h)}function o(t,n,a){var o=N(t,n,!1,i),r=o.name;if(r){var s=h[r];e(s,"Route with name '"+r+"' does not exist");var c=s.regex.keys.filter(function(t){return!t.optional}).map(function(t){return t.name});if("object"!=typeof o.params&&(o.params={}),n&&"object"==typeof n.params)for(var l in n.params)!(l in o.params)&&c.indexOf(l)>-1&&(o.params[l]=n.params[l]);if(s)return o.path=j(s.path,o.params,'named route "'+r+'"'),u(s,o,a)}else if(o.path){o.params={};for(var f=0;f<d.length;f++){var m=d[f],v=p[m];if(F(v.regex,o.path,o.params))return u(v,o,a)}}return u(null,o)}function s(n,a){var s=n.redirect,c="function"==typeof s?s(r(n,a,null,i)):s;if("string"==typeof c&&(c={path:c}),!c||"object"!=typeof c)return e(!1,"invalid redirect option: "+JSON.stringify(c)),u(null,a);var l=c,d=l.name,p=l.path,f=a.query,m=a.hash,v=a.params;if(f=l.hasOwnProperty("query")?l.query:f,m=l.hasOwnProperty("hash")?l.hash:m,v=l.hasOwnProperty("params")?l.params:v,d){var g=h[d];return t(g,'redirect failed: named route "'+d+'" not found.'),o({_normalized:!0,name:d,query:f,hash:m,params:v},void 0,a)}if(p){var y=z(p,n),b=j(y,v,'redirect route with path "'+y+'"');return o({_normalized:!0,path:b,query:f,hash:m},void 0,a)}return e(!1,"invalid redirect option: "+JSON.stringify(c)),u(null,a)}function c(t,e,n){var i=j(n,e.params,'aliased route with path "'+n+'"'),a=o({_normalized:!0,path:i});if(a){var r=a.matched,s=r[r.length-1];return e.params=a.params,u(s,e)}return u(null,e)}function u(t,e,n){return t&&t.redirect?s(t,n||e):t&&t.matchAs?c(t,e,t.matchAs):r(t,e,n,i)}var l=I(n),d=l.pathList,p=l.pathMap,h=l.nameMap;return{match:o,addRoutes:a}}function F(t,e,n){var i=e.match(t);if(!i)return!1;if(!n)return!0;for(var a=1,o=i.length;o>a;++a){var r=t.keys[a-1],s="string"==typeof i[a]?decodeURIComponent(i[a]):i[a];r&&(n[r.name]=s)}return!0}function z(t,e){return v(t,e.parent?e.parent.path:"/",!0)}function V(){window.addEventListener("popstate",function(t){K(),t.state&&t.state.key&&Q(t.state.key)})}function U(e,n,i,a){if(e.app){var o=e.options.scrollBehavior;o&&(t("function"==typeof o,"scrollBehavior must be a function"),e.app.$nextTick(function(){var t=H(),e=o(n,i,a?t:null);if(e){var r="object"==typeof e;if(r&&"string"==typeof e.selector){var s=document.querySelector(e.selector);s?t=G(s):J(e)&&(t=Z(e))}else r&&J(e)&&(t=Z(e));t&&window.scrollTo(t.x,t.y)}}))}}function K(){var t=X();t&&(Gt[t]={x:window.pageXOffset,y:window.pageYOffset})}function H(){var t=X();return t?Gt[t]:void 0}function G(t){var e=document.documentElement,n=e.getBoundingClientRect(),i=t.getBoundingClientRect();return{x:i.left-n.left,y:i.top-n.top}}function J(t){return Y(t.x)||Y(t.y)}function Z(t){return{x:Y(t.x)?t.x:window.pageXOffset,y:Y(t.y)?t.y:window.pageYOffset}}function Y(t){return"number"==typeof t}function W(){return Zt.now().toFixed(3)}function X(){return Yt}function Q(t){Yt=t}function tt(t,e){K();var n=window.history;try{e?n.replaceState({key:Yt},"",t):(Yt=W(),n.pushState({key:Yt},"",t))}catch(i){window.location[e?"replace":"assign"](t)}}function et(t){tt(t,!0)}function nt(t,e,n){var i=function(a){a>=t.length?n():t[a]?e(t[a],function(){i(a+1)}):i(a+1)};i(0)}function it(t){if(!t)if(Nt){var e=document.querySelector("base");t=e&&e.getAttribute("href")||"/"}else t="/";return"/"!==t.charAt(0)&&(t="/"+t),t.replace(/\/$/,"")}function at(t,e){var n,i=Math.max(t.length,e.length);for(n=0;i>n&&t[n]===e[n];n++);return{updated:e.slice(0,n),activated:e.slice(n),deactivated:t.slice(n)}}function ot(t,e,n,i){var a=ft(t,function(t,i,a,o){var r=rt(t,e);return r?Array.isArray(r)?r.map(function(t){return n(t,i,a,o)}):n(r,i,a,o):void 0});return mt(i?a.reverse():a)}function rt(t,e){return"function"!=typeof t&&(t=St.extend(t)),t.options[e]}function st(t){return ot(t,"beforeRouteLeave",ut,!0)}function ct(t){return ot(t,"beforeRouteUpdate",ut)}function ut(t,e){return e?function(){return t.apply(e,arguments)}:void 0}function lt(t,e,n){return ot(t,"beforeRouteEnter",function(t,i,a,o){return dt(t,a,o,e,n)})}function dt(t,e,n,i,a){return function(o,r,s){return t(o,r,function(t){s(t),"function"==typeof t&&i.push(function(){pt(t,e.instances,n,a)})})}}function pt(t,e,n,i){e[n]?t(e[n]):i()&&setTimeout(function(){pt(t,e,n,i)},16)}function ht(t){return function(n,i,a){var o=!1,r=0,s=null;ft(t,function(t,n,i,c){if("function"==typeof t&&void 0===t.cid){o=!0,r++;var u,l=vt(function(e){t.resolved="function"==typeof e?e:St.extend(e),i.components[c]=e,r--,0>=r&&a()}),d=vt(function(t){var n="Failed to resolve async component "+c+": "+t;e(!1,n),s||(s=gt(t)?t:new Error(n),a(s))});try{u=t(l,d)}catch(p){d(p)}if(u)if("function"==typeof u.then)u.then(l,d);else{var h=u.component;h&&"function"==typeof h.then&&h.then(l,d)}}}),o||a()}}function ft(t,e){return mt(t.map(function(t){return Object.keys(t.components).map(function(n){return e(t.components[n],t.instances[n],t,n)})}))}function mt(t){return Array.prototype.concat.apply([],t)}function vt(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}function gt(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function yt(t){var e=window.location.pathname;return t&&0===e.indexOf(t)&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}function bt(t){var e=yt(t);return/^\/#/.test(e)?void 0:(window.location.replace(y(t+"/#"+e)),!0)}function kt(){var t=_t();return"/"===t.charAt(0)?!0:(xt("/"+t),!1)}function _t(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.slice(e+1)}function wt(t){window.location.hash=t}function xt(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)}function Tt(t,e){return t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function Dt(t,e,n){var i="hash"===n?"#"+e:e;return t?y(t+"/"+i):i}var St,Pt={name:"router-view",functional:!0,props:{name:{type:String,"default":"default"}},render:function(t,e){var i=e.props,a=e.children,o=e.parent,r=e.data;r.routerView=!0;for(var s=o.$createElement,c=i.name,u=o.$route,l=o._routerViewCache||(o._routerViewCache={}),d=0,p=!1;o;)o.$vnode&&o.$vnode.data.routerView&&d++,o._inactive&&(p=!0),o=o.$parent;if(r.routerViewDepth=d,p)return s(l[c],r,a);var h=u.matched[d];if(!h)return l[c]=null,s();var f=l[c]=h.components[c];return r.registerRouteInstance=function(t,e){var n=h.instances[c];(e&&n!==t||!e&&n===t)&&(h.instances[c]=e)},(r.hook||(r.hook={})).prepatch=function(t,e){h.instances[c]=e.componentInstance},r.props=n(u,h.props&&h.props[c]),s(f,r,a)}},Et=/[!'()*]/g,Lt=function(t){return"%"+t.charCodeAt(0).toString(16)},Ct=/%2C/g,At=function(t){return encodeURIComponent(t).replace(Et,Lt).replace(Ct,",")},Bt=decodeURIComponent,jt=/\/?$/,It=r(null,{path:"/"}),$t=[String,Object],Ot=[String,Array],Mt={name:"router-link",props:{to:{type:$t,required:!0},tag:{type:String,"default":"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:Ot,"default":"click"}},render:function(t){var e=this,n=this.$router,i=this.$route,a=n.resolve(this.to,i,this.append),o=a.location,s=a.route,c=a.href,l={},p=n.options.linkActiveClass,m=n.options.linkExactActiveClass,v=null==p?"router-link-active":p,g=null==m?"router-link-exact-active":m,y=null==this.activeClass?v:this.activeClass,b=null==this.exactActiveClass?g:this.exactActiveClass,k=o.path?r(null,o,null,n):s;l[b]=u(i,k),l[y]=this.exact?l[b]:d(i,k);var _=function(t){h(t)&&(e.replace?n.replace(o):n.push(o))},w={click:h};Array.isArray(this.event)?this.event.forEach(function(t){w[t]=_}):w[this.event]=_;var x={"class":l};if("a"===this.tag)x.on=w,x.attrs={href:c};else{var T=f(this.$slots["default"]);if(T){T.isStatic=!1;var D=St.util.extend,S=T.data=D({},T.data);S.on=w;var P=T.data.attrs=D({},T.data.attrs);P.href=c}else x.on=w}return t(this.tag,x,this.$slots["default"])}},Nt="undefined"!=typeof window,qt=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},Rt=B,Ft=b,zt=k,Vt=x,Ut=A,Kt=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");Rt.parse=Ft,Rt.compile=zt,Rt.tokensToFunction=Vt,Rt.tokensToRegExp=Ut;var Ht=Object.create(null),Gt=Object.create(null),Jt=Nt&&function(){var t=window.navigator.userAgent;return-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone")?window.history&&"pushState"in window.history:!1}(),Zt=Nt&&window.performance&&window.performance.now?window.performance:Date,Yt=W(),Wt=function(t,e){this.router=t,this.base=it(e),this.current=It,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};Wt.prototype.listen=function(t){this.cb=t},Wt.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},Wt.prototype.onError=function(t){this.errorCbs.push(t)},Wt.prototype.transitionTo=function(t,e,n){var i=this,a=this.router.match(t,this.current);this.confirmTransition(a,function(){i.updateRoute(a),e&&e(a),i.ensureURL(),i.ready||(i.ready=!0,i.readyCbs.forEach(function(t){t(a)}))},function(t){n&&n(t),t&&!i.ready&&(i.ready=!0,i.readyErrorCbs.forEach(function(e){e(t)}))})},Wt.prototype.confirmTransition=function(t,n,i){var a=this,o=this.current,r=function(t){gt(t)&&(a.errorCbs.length?a.errorCbs.forEach(function(e){e(t)}):(e(!1,"uncaught error during route navigation:"),console.error(t))),i&&i(t)};if(u(t,o)&&t.matched.length===o.matched.length)return this.ensureURL(),r();var s=at(this.current.matched,t.matched),c=s.updated,l=s.deactivated,d=s.activated,p=[].concat(st(l),this.router.beforeHooks,ct(c),d.map(function(t){return t.beforeEnter}),ht(d));this.pending=t;var h=function(e,n){if(a.pending!==t)return r();try{e(t,o,function(t){t===!1||gt(t)?(a.ensureURL(!0),r(t)):"string"==typeof t||"object"==typeof t&&("string"==typeof t.path||"string"==typeof t.name)?(r(),"object"==typeof t&&t.replace?a.replace(t):a.push(t)):n(t)})}catch(i){r(i)}};nt(p,h,function(){var e=[],i=function(){return a.current===t},o=lt(d,e,i),s=o.concat(a.router.resolveHooks);nt(s,h,function(){return a.pending!==t?r():(a.pending=null,n(t),void(a.router.app&&a.router.app.$nextTick(function(){e.forEach(function(t){t()})})))})})},Wt.prototype.updateRoute=function(t){var e=this.current;this.current=t,this.cb&&this.cb(t),this.router.afterHooks.forEach(function(n){n&&n(t,e)})};var Xt=function(t){function e(e,n){var i=this;t.call(this,e,n);var a=e.options.scrollBehavior;a&&V(),window.addEventListener("popstate",function(t){i.transitionTo(yt(i.base),function(t){a&&U(e,t,i.current,!0)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,n){var i=this,a=this,o=a.current;this.transitionTo(t,function(t){tt(y(i.base+t.fullPath)),U(i.router,t,o,!1),e&&e(t)},n)},e.prototype.replace=function(t,e,n){var i=this,a=this,o=a.current;this.transitionTo(t,function(t){et(y(i.base+t.fullPath)),U(i.router,t,o,!1),e&&e(t)},n)},e.prototype.ensureURL=function(t){if(yt(this.base)!==this.current.fullPath){var e=y(this.base+this.current.fullPath);t?tt(e):et(e)}},e.prototype.getCurrentLocation=function(){return yt(this.base)},e}(Wt),Qt=function(t){function e(e,n,i){t.call(this,e,n),i&&bt(this.base)||kt()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this;window.addEventListener("hashchange",function(){kt()&&t.transitionTo(_t(),function(t){xt(t.fullPath)})})},e.prototype.push=function(t,e,n){this.transitionTo(t,function(t){wt(t.fullPath),e&&e(t)},n)},e.prototype.replace=function(t,e,n){this.transitionTo(t,function(t){xt(t.fullPath),e&&e(t)},n)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;_t()!==e&&(t?wt(e):xt(e))},e.prototype.getCurrentLocation=function(){return _t()},e}(Wt),te=function(t){function e(e,n){t.call(this,e,n),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,n){var i=this;this.transitionTo(t,function(t){i.stack=i.stack.slice(0,i.index+1).concat(t),i.index++,e&&e(t)},n)},e.prototype.replace=function(t,e,n){var i=this;this.transitionTo(t,function(t){i.stack=i.stack.slice(0,i.index).concat(t),e&&e(t)},n)},e.prototype.go=function(t){var e=this,n=this.index+t;if(!(0>n||n>=this.stack.length)){var i=this.stack[n];this.confirmTransition(i,function(){e.index=n,e.updateRoute(i)})}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(Wt),ee=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=R(e.routes||[],this);var n=e.mode||"hash";switch(this.fallback="history"===n&&!Jt,this.fallback&&(n="hash"),Nt||(n="abstract"),this.mode=n,n){case"history":this.history=new Xt(this,e.base);break;case"hash":this.history=new Qt(this,e.base,this.fallback);break;case"abstract":this.history=new te(this,e.base);break;default:t(!1,"invalid mode: "+n)}},ne={currentRoute:{}};return ee.prototype.match=function(t,e,n){return this.matcher.match(t,e,n)},ne.currentRoute.get=function(){return this.history&&this.history.current},ee.prototype.init=function(e){var n=this;if(t(m.installed,"not installed. Make sure to call `Vue.use(VueRouter)` before creating root instance."),this.apps.push(e),!this.app){this.app=e;var i=this.history;if(i instanceof Xt)i.transitionTo(i.getCurrentLocation());else if(i instanceof Qt){var a=function(){i.setupListeners()};i.transitionTo(i.getCurrentLocation(),a,a)}i.listen(function(t){n.apps.forEach(function(e){e._route=t})})}},ee.prototype.beforeEach=function(t){return Tt(this.beforeHooks,t)},ee.prototype.beforeResolve=function(t){return Tt(this.resolveHooks,t)},ee.prototype.afterEach=function(t){return Tt(this.afterHooks,t)},ee.prototype.onReady=function(t,e){this.history.onReady(t,e)},ee.prototype.onError=function(t){this.history.onError(t)},ee.prototype.push=function(t,e,n){this.history.push(t,e,n)},ee.prototype.replace=function(t,e,n){this.history.replace(t,e,n)},ee.prototype.go=function(t){this.history.go(t)},ee.prototype.back=function(){this.go(-1)},ee.prototype.forward=function(){this.go(1)},ee.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map(function(t){return Object.keys(t.components).map(function(e){return t.components[e]})})):[]},ee.prototype.resolve=function(t,e,n){var i=N(t,e||this.history.current,n,this),a=this.match(i,e),o=a.redirectedFrom||a.fullPath,r=this.history.base,s=Dt(r,o,this.mode);return{location:i,route:a,href:s,normalizedTo:i,resolved:a}},ee.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==It&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(ee.prototype,ne),ee.install=m,ee.version="2.5.3",Nt&&window.Vue&&window.Vue.use(ee),ee}),function(){var t;t={template:"<div v-if='refundDetail'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'>INFORMASI REFUND DANA</div> <dl class='o-split o-split--micro u-mrgn-top--2'> <dt class='o-split__title'>Refund Type</dt> <dd class='o-split__desc'>{{ refundType }}</dd> </dl> <dl class='o-split o-split--micro u-mrgn-top--2'> <dt class='o-split__title'>Refund Status</dt> <dd class='o-split__desc'>{{ refundDetail.status }}</dd> </dl> <dl class='o-split o-split--micro u-mrgn-top--2'> <dt class='o-split__title'>Refund Time</dt> <dd class='o-split__desc'>{{ refundTime }}</dd> </dl> <dl class='o-split o-split--micro u-mrgn-top--2'> <dt class='o-split__title'>Refund Amount</dt> <dd class='o-split__desc'>{{ refundAmount }}</dd> </dl> <dl class='o-split o-split--micro u-mrgn-top--2'> <dt class='o-split__title'>Refund ID</dt> <dd class='o-split__desc u-txt--tiny'>{{ refundDetail.dana_refund_id }}</dd> </dl> <hr class='u-hr--subtle u-hr--small' > </div>",props:["isShow","paymentObject"],data:function(){return{refundDetail:null}},computed:{refundType:function(){var t;return t={dana:"Refund",dana_topup:"Refund Top Up",dana_cancel:"Refund Cancel"},t[this.refundDetail.refund_to]?t[this.refundDetail.refund_to]:this.refundDetail.refund_to},refundTime:function(){return this.refundDetail.refunded_at?window.moment(this.refundDetail.refunded_at).format("DD MMM YYYY HH:mm:ss"):"-"},refundAmount:function(){return this.refundDetail.amount.BLMonefy()}},mounted:function(){return this.getRefundDetail()},methods:{getRefundDetail:function(){var t;return t=this,this.isShow&&this.paymentObject.invoice_id?window.BLSecureClient.api["interface"].dana.getDanaRefundInfo(this.paymentObject.invoice_id).then(function(e){return t.refundDetail=e.data}):void 0}}},("undefined"!=typeof exports&&null!==exports?exports:this).DanaRefundDetail=t}.call(this),function(){var t;t=function(){function t(t,e){this.el=$(t),this.config={selectors:this._defaultSelectors,packageTemplate:this._defaultPackageTemplate,noteTemplate:this._defaultNoteTemplate,param:"package_id",debounce:700,template:{choosePackage:"Pilih Nominal"}},this.markdownConverter=new showdown.Converter,this.config=$.extend(!0,this.config,e)}return t.prototype._defaultSelectors={field:".js-ev-fld",errorMessage:".js-ev-msg",customerNumber:".js-ev-inp",packages:".js-ev-pkgs","package":".js-ev-pkg",priceText:".js-ev-prc",buyButton:".js-ev-by",note:".js-ev-nts",logo:".js-ev-lg",loading:".js-loading-bar",inquiry:{container:".js-ev-inq",name:".js-ev-inq-nm",segment:".js-ev-inq-sg",power:".js-ev-inq-pw",trxId:".js-ev-inq-post-trx-id",trxPurchaseTime:".js-ev-inq-post-trx-purc-time"},form:".js-ev-fm",recurrence:{checkbox:".js-ev-set-recurrence",date:".js-ev-recurrence-date",message:".js-ev-recurrence-msg"},modal:{content:".js-ev-modal",closeButton:".js-ev-modal-close"}},t.prototype._recurrenceSelector={productId:".js-ev-pkg",customerNumber:".js-ev-inp",date:".js-rec-date",source:".js-rec-source"},t.prototype._defaultPackageTemplate=function(t,e){return null==e&&(e=!1),"<div class='o-layout__item u-2of12 u-pad-right--3 u-pad-bottom--3' style='display: flex'> <label class='c-notification c-notification--thick c-notification--block u-pad--3 c-notification--gray u-align-center u-pointer "+this.config.selectors["package"].replace(".","")+" "+(e?"is-active":"")+"' style='width: 100%'> <div class='c-notification__body'> <p class='u-txt--medium u-txt--bold u-mrgn-bottom--1'>"+t["package"]+"</p> <p class='u-txt--small u-mrgn--0'>"+$.BLUtils.numberToMoney(t.price)+"</p> <input type='radio' name='"+this.config.param+"' value='"+t.id+"' class='u-hidden "+this.config.selectors["package"].replace(".","")+"' "+(e?"checked='checked'":"")+"> </div> </label> </div>"},t.prototype._defaultNoteTemplate=function(t){return"<div class='c-notification c-notification--block u-mrgn-bottom--3'> <div class='c-notification__body'> <h3 class='u-txt--base u-txt--bold u-mrgn-bottom--3'>Keterangan</h3> <div class='u-txt--base u-mrgn-bottom--0'>"+t+"</div> </div> </div>"},t.prototype._isArrayOfFunction=function(t){return void 0===t?[function(){}]:"function"==typeof t?[t]:t.constructor===Array?t:[function(){}]},t.prototype._forceInputNumberOnly=function(){return this.el.on("keypress",this.config.selectors.customerNumber,function(t){return 8!==t.which&&0!==t.which&&(t.which<48||t.which>57)?!1:void 0})},t.prototype.customerNumberListener=function(t,e,n){var i;return i=this,e=this._isArrayOfFunction(e),n=this._isArrayOfFunction(n),this._forceInputNumberOnly(),this.el.on("input",this.config.selectors.customerNumber,$.BLUtils.debounce(function(){return i.toggleLoading(),t($(this).val()).then(i.setPackages.bind(i)).then(i.setNote.bind(i)).then(i.unsetErrorMessage.bind(i)).then(function(t){return i.toggleLoading(!1),e.forEach(function(e){return e.call(i,t)})})["catch"](i.reset.bind(i,n))},this.config.debounce))},t.prototype.packageListener=function(t,e,n){var i;return i=this,e=this._isArrayOfFunction(e),n=this._isArrayOfFunction(n),this.el.on("change",this.config.selectors["package"],function(a){var o;return o=i.el.find(i.config.selectors.customerNumber).val(),t(o,a.target.value).then(i.setPackages.bind(i)).then(i.setNote.bind(i)).then(i.unsetErrorMessage.bind(i)).then(function(t){return e.forEach(function(e){return e.call(i,t)})})["catch"](i.reset.bind(i,n))})},t.prototype.submitListener=function(t){var e;return e=this,this.el.on("click",this.config.selectors.buyButton,function(n){var i,a;return n.preventDefault(),i=e.el.find(e.config.selectors.customerNumber).first().val(),a=e.el.find(e.config.selectors.packages).first().val(),t(i,a).then(function(){return e.el.find(e.config.selectors.form).first().submit()})["catch"](e.setErrorMessage.bind(e))})},t.prototype.setPackages=function(t){var e,n;return e=this,t.packages.length>0?(n="<p class='u-mrgn-bottom--1 u-12of12'>"+e.config.template.choosePackage+"</p>",t.packages.forEach(function(i){return n+=e.config.packageTemplate.call(e,i,t.activePackage.id===i.id)}),this.el.find(this.config.selectors.packages).first().html(n),this.el.find(this.config.selectors.priceText).text($.BLUtils.numberToMoney(t.activePackage.price)),this.el.find(this.config.selectors.buyButton).prop("disabled",!1)):this.unsetPackages(),t},t.prototype.unsetPackages=function(t){return this.el.find(this.config.selectors.packages).text(""),this.el.find(this.config.selectors.priceText).text("Rp"),this.el.find(this.config.selectors.buyButton).prop("disabled",!0),t},t.prototype.setNote=function(t){var e,n;return t.activePackage?(n=t.activePackage.note,""!==n&&null!==n?(e=this.markdownConverter.makeHtml(n),this.el.find(this.config.selectors.note).html(this.config.noteTemplate(e))):this.unsetNote()):this.unsetNote(),t},t.prototype.unsetNote=function(t){return this.el.find(this.config.selectors.note).text(""),t},t.prototype.setErrorMessage=function(t){return this.el.find(this.config.selectors.logo).addClass("u-hidden"),this.el.find(this.config.selectors.field).addClass("c-fld--error"),this.el.find(this.config.selectors.errorMessage).removeClass("u-hidden").text(t),t},t.prototype.unsetErrorMessage=function(t){return this.el.find(this.config.selectors.logo).removeClass("u-hidden"),this.el.find(this.config.selectors.field).removeClass("c-fld--error"),this.el.find(this.config.selectors.errorMessage).addClass("u-hidden").text(""),t},t.prototype.toggleLoading=function(t){return null==t&&(t=!0),$(this.el).find(this.config.selectors.loading).first().toggleClass("u-hidden",!t)},t.prototype.reset=function(t,e){var n;return n=this,this.unsetPackages(),this.unsetNote(),this.setErrorMessage(e),this.toggleLoading(!1),t.forEach(function(t){return t.call(n,e)})},t.prototype.addListener=function(t,e,n){return this.el.on(t,e,n)},t.prototype.createRecurrence=function(t,e){var n,i,a,o,r,s,c;return null==t&&(t=!1),r=this.constructRecurrenceParams(),c="landing_page",s="phoneCreditRecurrences",t&&(s="dataPlanRecurrences"),a={"Bukalapak-OTP-Device-ID":window.blGlobal.user.tfa_identity},o=window.localStorage.getItem("otp_key"),i=window.localStorage.getItem("browser_fp"),i&&(a["Bukalapak-Device-Fingerprint"]=i),
o?a["Bukalapak-OTP-Key"]=o:e&&(a["Bukalapak-OTP"]=e),n=this.el.find(this.config.selectors.modal.content),new Promise(function(t,i){return window.BLSecureClient.api["interface"][s].register(r,a).then(function(e){return t(e)})["catch"](function(t){return 10101===t.errors[0].code?e?window.BLTFA.eventBus.$emit("invalidOtp"):(n.addClass("u-hidden"),window.BLTFA.eventBus.$emit("open")):i(t)})})},t.prototype.constructRecurrenceParams=function(){return{phone_number:this.el.find(this._recurrenceSelector.customerNumber).val(),product_id:parseInt(this.el.find(this._recurrenceSelector.productId+":checked").val()),recurrence_value:parseInt(this.el.find(this._recurrenceSelector.date).val()),recurrence_type:"on_date"}},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).EVoucher=t}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var a in e)n.call(e,a)&&(t[a]=e[a]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){this.el=$(t),this.config={selectors:this._defaultSelectors,packageTemplate:this._defaultPackageTemplate,param:"package_id",debounce:700,bypassUnsetPackages:!1},this.config=$.extend(!0,this.config,e)}return e(n,t),n.prototype._defaultPackageTemplate=function(t,e){return null==e&&(e=!1),"<option value='"+t.id+"'"+(e?" selected='selected'":"")+">"+t["package"]+"</option>"},n.prototype.customerNumberListener=function(t,e,n){var i;return i=this,e=this._isArrayOfFunction(e),n=this._isArrayOfFunction(n),this._forceInputNumberOnly(),this.el.on("input",this.config.selectors.customerNumber,$.BLUtils.debounce(function(){return t($(this).val()).then(i.setPackages.bind(i)).then(i.unsetErrorMessage.bind(i)).then(function(t){return e.forEach(function(e){return e.call(i,t)})})["catch"](i.reset.bind(i,n))},this.config.debounce))},n.prototype.publisherListener=function(t,e,n){var i;return i=this,e=this._isArrayOfFunction(e),n=this._isArrayOfFunction(n),this.el.on("change",this.config.selectors.customerNumber,function(a){return t(a.target.value).then(i.setPackages.bind(i)).then(function(t){return e.forEach(function(e){return e.call(i,t)})})["catch"](i.reset.bind(i,n))})},n.prototype.packageListener=function(t,e,n){var i;return i=this,e=this._isArrayOfFunction(e),n=this._isArrayOfFunction(n),this.el.on("change",this.config.selectors["package"],function(a){var o;return o=i.el.find(i.config.selectors.customerNumber).val(),t(o,a.target.value).then(i.setPackages.bind(i)).then(i.unsetErrorMessage.bind(i)).then(function(t){return e.forEach(function(e){return e.call(i,t)})})["catch"](i.reset.bind(i,n))})},n.prototype.setPackages=function(t){var e,n;return e=this,t&&t.packages?(t.packages.length>0?(n="",t.packages.forEach(function(i){return n+=e.config.packageTemplate.call(e,i,t.activePackage.id===i.id)}),this.el.find(this.config.selectors.packages).first().prop("disabled",!1).html(n).val(t.activePackage.id),t.activePackage.price&&this.el.find(this.config.selectors.priceText).text($.BLUtils.numberToMoney(t.activePackage.price)),this.el.find(this.config.selectors.buyButton).removeClass("c-btn--disabled").prop("disabled",!1),this.el.find(this.config.selectors["package"]).parents(".c-fld-material").first().inputMaterial("active")):this.unsetPackages(),t):t},n.prototype.unsetPackages=function(t){var e;return this.config.bypassUnsetPackages?t:(e=this.el.find(this.config.selectors.priceText).closest(".c-fld-material--no-bordered").length>0,this.el.find(this.config.selectors.packages).prop("disabled",!0).html(""),this.el.find(this.config.selectors.priceText).text("Rp"),this.el.find(this.config.selectors.buyButton).addClass("c-btn--disabled").prop("disabled",!0),this.el.find(this.config.selectors["package"]).parents(".c-fld-material").first().inputMaterial("blur"),t)},n.prototype.reset=function(t,e){var n;return n=this,this.unsetPackages(),this.setErrorMessage(e),t.forEach(function(t){return t.call(n,e)})},n.prototype.constructRecurrenceParams=function(){return{phone_number:this.el.find(this._recurrenceSelector.customerNumber).val(),product_id:parseInt(this.el.find(this._recurrenceSelector.productId).val()),recurrence_value:parseInt(this.el.find(this._recurrenceSelector.date).val()),recurrence_type:"on_date"}},n}(EVoucher),("undefined"!=typeof exports&&null!==exports?exports:this).EVoucherWidget=t}.call(this),function(){var t;t=function(){function t(){}return t.prototype.setOperatorLogo=function(t){var e;return e=this.el.find(this.config.selectors.logo).first(),""!==t.value&&e.length>0&&void 0!==t.activePackage?(e.removeClass(function(t,e){return(e.match(/(^|\s)c-logo-external-operator--op\S+/g)||[]).join(" ")}),"string"==typeof t.activePackage.operator?e.addClass("c-logo-external-operator--op-"+t.activePackage.operator.toLowerCase()):void 0):e.removeClass(function(t,e){return(e.match(/(^|\s)c-logo-external-operator--op-\S+/g)||[]).join(" ")})},t.prototype.getConfig=function(t){var e;return e=$(t).find(".js-vp-cnf"),e.length>0?JSON.parse(e.first().html()):!1},t.prototype._autoSubmitData=function(){return blGlobal&&null!==blGlobal.user.id&&this.config.autoSubmit?JSON.parse(window.localStorage.getItem(this.config.storageKeys.customerNumberKey)):!1},t.prototype.autoSubmit=function(){var t,e,n;return e=this._autoSubmitData(),e?(t=e.customerNumber,new Date(e.created_at+1e3*e.expire_in)<new Date?void window.localStorage.removeItem(this.config.storageKeys.customerNumberKey):($(".js-loading").removeClass("u-hidden"),this.EVoucher.el.addClass("u-hidden"),this.EVoucher.el.find(this.EVoucher.config.selectors.customerNumber).val(e.customerNumber),this.EVoucher.el.find(this.EVoucher.config.selectors.buyButton).prop("disabled",!1).removeClass("c-btn--disabled"),n=jQuery.Event("click"),n.target=this.EVoucher.el.find(this.EVoucher.config.selectors.buyButton)[0],this.EVoucher.el.trigger(n))):void 0},t.prototype.setLocalData=function(t,e,n){var i,a;return null==n&&(n=0),i={expire_in:n||3600,created_at:(new Date).getTime()},a=this.getLocalData(t),a=JSON.stringify($.extend({},a,e,i)),window.localStorage.setItem(t,a)},t.prototype.getLocalData=function(t,e){var n;return n=JSON.parse(window.localStorage.getItem(t)),n&&new Date(n.created_at+1e3*n.expire_in)<new Date||!n?(this.removeLocalData(t),null):e&&n?n[e]:n},t.prototype.removeLocalData=function(t){return window.localStorage.removeItem(t)},t.prototype.delayPromise=function(t,e){return new Promise(function(n){return t>0?setTimeout(n,t,e):n(e)})},t.prototype.initListeners=function(){},t.prototype.isCustomerNumberValid=function(t){},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).VirtualProduct=t}.call(this),function(){var t;t=function(){function t(t,n,i){var a,o,r;for(null==n&&(n=[]),null==i&&(i={}),this.$el=t,this.config=$.extend({},e,i),this.VirtualProduct={},o=0,r=n.length;r>o;o++)a=n[o],this.VirtualProduct[a.type]=a.object;this.initSwitcherListener()}var e;return e={selector:{switcherRadio:".js-cev-switcher",hidden:"u-hidden"}},t.prototype.hideEVouchers=function(){var t,e,n,i;e=this.VirtualProduct,n=[];for(i in e)t=e[i],n.push(t.EVoucher.el.addClass(this.config.selector.hidden));return n},t.prototype.showEVoucher=function(t){return this.VirtualProduct[t].EVoucher.el.removeClass(this.config.selector.hidden)},t.prototype.initSwitcherListener=function(){var t;return t=this,this.$el.on("change",this.config.selector.switcherRadio,function(e){return t.hideEVouchers(),t.showEVoucher($(t.config.selector.switcherRadio+":checked").val())}),this.$el.find(this.config.selector.switcherRadio).trigger("change")},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).ComboEVoucher=t}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var a in e)n.call(e,a)&&(t[a]=e[a]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){var n,i,a,o,r;if(a={operators:[],packages:[],minLength:4,prefill:null},r=$(t).data("data-plan"),r&&(a.template={choosePackage:"Pilih Paket"}),n=this.getConfig(t),!n)throw Error("Configuration for "+(r?"DataPlan":"PhoneCredit")+" is not provided");this.config=$.extend({},a,n),this.EVoucher=new e(t,this.config),this.EVoucher.isDataPlan=r,this.isInsideModal=!1,this.initModal(),this.initRecurrenceCheckbox(),this.initListeners(),this.initListenersInModal(),this.setPrefill(),this.showActiveOperatorLogo(),i=this.EVoucher.el.find(this.EVoucher.config.selectors.customerNumber).first().val(),o=this.EVoucher,window.BLTFA&&(window.BLTFA.eventBus.$on("sendRequestWithOtp",function(t){return s.call(o,i,t)}),window.BLTFA.eventBus.$on("resendOtp",function(){return s.call(o,i)}))}var i,a,o,r,s,c;return e(n,t),r=function(t,e){var n;return n=this,new Promise(function(i,a){var o,r,s,c,u,l,d,p,h,f;if(d=t.slice(0,n.config.minLength),d.length<n.config.minLength)return i({value:t,packages:[],activePackage:void 0});for(r=0,p=n.config.operators,c=0,u=p.length;u>c;c++)if(l=p[c],r+=1,f=new RegExp("("+l.prefix.join("|")+")"),f.test(d))return s=n.config.packages.filter(function(t){return t.operator===l.name}),0===s.length?a("Produk sedang kosong"):(o=void 0!==e?s.filter(function(t){return String(t.id)===e}):s,h={value:t,packages:s,activePackage:o[0]},i(h));return r===n.config.operators.length?a("Nomor tidak valid"):void 0})},c=function(t){return new Promise(function(e,n){var i;return 8<=(i=t.length)&&13>=i&&Number(t)?e(t):n("Nomor tidak valid")})},s=function(t,e){var n,i,a;return i=this,a=this.config.selectors,n=this.el.find(this.config.selectors.form),new Promise(function(r,s){return c(t).then(function(t){var c,u,l,d;return u=i.el.find(a.recurrence.checkbox).prop("checked"),d=a.modal.content+":not(.u-hidden)",l=i.el.find(d).length>0,u&&(l||e)?(i.el.find(a.buyButton+".c-btn--spinner").addClass("is-active").attr("disabled","disabled"),null==window.blGlobal.user.phone?r(t):i.createRecurrence(i.isDataPlan,e).then(function(e){return e.meta.otp_key?window.BLTFA?window.BLTFA.eventBus.$emit("success",e.meta.otp_key,function(){return n.first().submit(),!1}):void 0:r(t)})["catch"](function(t){return i.el.find(a.buyButton+".c-btn--spinner").removeClass("is-active").removeAttr("disabled"),o.bind(i)(),null!==t&&t.errors?t.errors instanceof Array?10111===t.errors[0].code&&"product_id"===t.errors[0].field&&(t="Transaksi Rutin tidak tersedia untuk produk ini"):t=t.errors.message:t="Sistem Transaksi Rutin saat ini sedang bermasalah.",BLFlash.initByJS(t,"error"),s(t)})):u?(i.el.find(a.buyButton+".c-btn--spinner").removeClass("is-active").removeAttr("disabled"),window.BLTFA.isOpen()||i.el.find(a.modal.content).removeClass("u-hidden"),i.el.find(a.recurrence.date).prop("name","date"),i.el.find(".js-chosen").chosen(),i.el.find(".js-chosen").siblings(".chzn-container").addClass("c-chosen"),i.el.find(".js-chosen").siblings(".chzn-container").find(".chzn-single").css({"border-top-right-radius":0,"border-bottom-right-radius":0}),$("html").css("overflow","hidden"),i.isDataPlan?void 0:window.blGlobal.user.loggedIn?(c=$(a.modal.content+" .c-modal").addClass("u-hidden"),null!=window.blGlobal.user.phone?c.first().removeClass("u-hidden"):(i.el.find(a.recurrence.checkbox).click(),c.filter(".js-recurrence-no-phone").removeClass("u-hidden"))):void 0):r(t)})["catch"](function(t){return s(t)})})},o=function(){var t;return t=this.el.find(this.config.selectors.modal.content),t.addClass("u-hidden"),this.el.find(this.config.selectors.recurrence.date).prop("name",""),$("html").css("overflow","")},a=function(t){var e,n,i,a,o;return o=new Date,o=new Date(o.setHours(0,0,0,0)),a=parseInt(t,10),e=o.getMonth()+1,i=new Date(new Date(moment().endOf("month")).setHours(0,0,0,0)),o.getDate()<a&&o.getDate()<i.getDate()&&(e=o.getMonth()),n=new Date(o.getFullYear(),e,a),n.getDate()!==a&&(n=new Date(moment(showDate).subtract(showDate.getDate(),"days"))),{day:n.getDate(),month:n.getMonth()+1,year:n.getFullYear()}},i=function(t,e){return t.is("input")?t.val(e):t.text(e)},n.prototype.initListeners=function(){return this.EVoucher.customerNumberListener(r.bind(this),this.setOperatorLogo),this.EVoucher.packageListener(r.bind(this),this.setOperatorLogo),this.EVoucher.submitListener(s.bind(this.EVoucher))},n.prototype.initModal=function(){var t;return t=this.EVoucher.config.selectors,this.EVoucher.addListener("click",t.modal.closeButton,o.bind(this.EVoucher)),this.EVoucher.addListener("mouseenter",".c-modal",function(t){return function(){return t.isInsideModal=!0}}(this)),this.EVoucher.addListener("mouseleave",".c-modal",function(t){return function(){return t.isInsideModal=!1}}(this)),this.EVoucher.addListener("click",t.modal.content,function(t){return function(){return t.isInsideModal?void 0:o.bind(t.EVoucher)()}}(this))},n.prototype.initRecurrenceCheckbox=function(){var t,e;return e=this.EVoucher.config.selectors,t=this.EVoucher.el,this.EVoucher.addListener("change",e.recurrence.checkbox,function(){var e;return e=$(this).prop("checked"),t.find(".js-ev-recurrence-text").each(function(){var t,n,a;return t=$(this),a=t.data("recurrenceOn"),n=t.data("recurrenceOff"),e?i(t,a):i(t,n)})})},n.prototype.initListenersInModal=function(){var t,e,n;return t=this.EVoucher.el,n=this.EVoucher.config.selectors.recurrence,e=(new Date).getDate()+1,e=28>=e?e:1,t.find(n.date).val(e),this.EVoucher.addListener("change",n.date,function(){var e;return e=CustomDate(a(this.value)),t.find(n.message).val("Dimulai pada "+e)}),t.find(n.date).trigger("change")},n.prototype.setPrefill=function(){var t;return null!==this.config.prefill?(t=this.EVoucher.el.find(this.EVoucher.config.selectors.customerNumber),t.val(t.data("prefill")||this.config.prefill),t.parents(this.EVoucher.config.selectors.field).addClass("is-active"),t.trigger("input")):void 0},n.prototype.showActiveOperatorLogo=function(){var t,e,n,i,a,o,r,s,c,u;if(t=$(".js-logo-external-operator"),t.length>0){for(t.addClass("u-hidden").removeClass("u-display-inline-block"),e=[],c=this.config.packages,n=0,o=c.length;o>n;n++)i=c[n],e.includes(i.operator)||e.push(i.operator);for(u=[],a=0,r=e.length;r>a;a++)s=e[a],u.push($(".js-logo-external-operator--"+s).removeClass("u-hidden").addClass("u-display-inline-block"));return u}},n}(VirtualProduct),("undefined"!=typeof exports&&null!==exports?exports:this).PhoneCredit=t}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var a in e)n.call(e,a)&&(t[a]=e[a]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){var n,i;if(i={operators:[],packages:[]},n=this.getConfig(t),!n)throw Error("Configuration for PlainCredit is not provided");this.config=$.extend({},i,n),this.EVoucher=new e(t,n),this.initListeners()}return e(n,t),n.prototype.initListeners=function(){var t;return t=this,this.EVoucher.setPackages({packages:this.config.packages,activePackage:this.config.packages[0]}),this.EVoucher.packageListener(function(e,n){return new Promise(function(e,i){var a;return a={packages:t.config.packages,activePackage:t.config.packages.filter(function(t){return String(t.id)===n})[0]},e(a)})})},n}(VirtualProduct),("undefined"!=typeof exports&&null!==exports?exports:this).PlainCredit=t}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var a in e)n.call(e,a)&&(t[a]=e[a]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}var i;return e(n,t),i=function(t,e){var n;return n=this,new Promise(function(i,a){var o,r;return r=n.config.packages.filter(function(e){return e.operator===t}),o=void 0!==e?r.filter(function(t){return String(t.id)===e}):r,i({value:t,packages:r,activePackage:o[0]})})},n.prototype._setPublisherOptions=function(t){var e,n;return n="",e=this.EVoucher.el.find(this.EVoucher.config.selectors.customerNumber),t.forEach(function(t,e){return n+="<option value='"+t.prefix+"' "+(0===e?"selected='selected'":void 0)+">"+t.name+"</option>"}),e.html(n),e.parents(this.EVoucher.config.selectors.field).addClass("is-active"),e.trigger("change")},n.prototype.initListeners=function(){var t,e;return this._setPublisherOptions(this.config.operators),e=this.config.operators[0].prefix,t=this.config.packages.filter(function(t){return t.operator===e}),this.EVoucher.setPackages({value:e,packages:t,activePackage:t[0]}),this.EVoucher.publisherListener(i.bind(this)),this.EVoucher.packageListener(i.bind(this))},n}(PlainCredit),("undefined"!=typeof exports&&null!==exports?exports:this).PlainCreditWidget=t}.call(this),function(){var t,e=[].slice;t=function(){function t(t){var e,n;e=$(document),this.config={parent:e,zakatMinAmount:1e4,debounce:700},this.config=$.extend({},this.config,t),n=e.find(this._selectors.dialog),this.el={popup:n,inputField:n.find(this._selectors.inputField),income:n.find(this._selectors.income),otherIncome:n.find(this._selectors.otherIncome),liability:n.find(this._selectors.liability),amount:n.find(this._selectors.amount),applyBtn:n.find(this._selectors.applyBtn),errorMessage:n.find(this._selectors.errorMessage)},this.initDelimiter(),this.initListeners()}var n,i,a;return t.prototype._selectors={dialog:".js-zakat-calculator-dialog",inputField:".js-zakat-calculator-field",income:"#js-zakat-calculator-income",otherIncome:"#js-zakat-calculator-other-income",liability:"#js-zakat-calculator-liability",amount:".js-zakat-calculator-amount",applyBtn:".js-zakat-calculator-apply",errorMessage:".js-zakat-calculator-error"},t.prototype._zakatAmount=0,n=function(){var t,e;return t=this,e=this.el,new Promise(function(n,i){var a,o,r,s;return a=parseInt(e.income.val()||0,10),r=parseInt(e.otherIncome.val()||0,10),o=parseInt(e.liability.val()||0,10),s=parseInt((.025*(a+r-o)).toFixed(0),10),0>s&&(s=0),e.applyBtn.prop("disabled",s<t.config.zakatMinAmount),e.amount.text(s.BLMonefy()),t._zakatAmount=s,s>=t.config.zakatMinAmount?n():i("Minimum "+t.config.zakatMinAmount.BLMonefy())})},i=function(t){var e;return e=this,new Promise(function(n,i){return t>=e.config.zakatMinAmount?n(t):i("Minimum "+e.config.zakatMinAmount.BLMonefy())})},a=function(t){return this.config.parent.trigger("zakat_calculator:apply",[t]),this.close()},t.prototype.applyButtonListener=function(t,n,i){var a;return a=this,this.el.popup.on("click",this._selectors.applyBtn,function(o){return t(a._zakatAmount).then(a.unsetErrorMessage.bind(a)).then(function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],n.apply(a,t)})["catch"](i.bind(a))})},t.prototype.calculatorFieldsListener=function(t,n,i){var a;return a=this,this.el.popup.on("change",this._selectors.inputField,function(){return t().then(function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],n.apply(a,t)})["catch"](i.bind(a))}).on("blur",this._selectors.inputField,function(){var t;return t=parseInt(this.value||0,10),0===t?this.value="":void 0})},t.prototype.setErrorMessage=function(t){return this.el.errorMessage.removeClass("u-hidden").text(t),t},t.prototype.unsetErrorMessage=function(t){return this.el.errorMessage.addClass("u-hidden").text(""),t},t.prototype.initDelimiter=function(){var t;return t=this,this.el.inputField.each(function(){var e,n,i;return i="#"+this.id+"-delimiter",0===$(i).length&&$(this).NumberDelimiter({debounce:!1}),e=$(i).removeClass(t._selectors.inputField.slice(1)),n=e.val().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."),e.val(n)})},t.prototype.close=function(){return $.magnificPopup.close()},t.prototype.open=function(){var t,e;return e=this,t=this.el.income,$.magnificPopup.open({items:{src:this.el.popup,type:"inline"},enableEscapeKey:!0,closeOnBgClick:!0,callbacks:{open:function(){var e;return e=this,setTimeout(function(){return t.prev().focus()},300)},close:function(){return e.config.parent.trigger("zakat_calculator:close")}}})},t.prototype.initListeners=function(){return this.calculatorFieldsListener(n.bind(this),this.unsetErrorMessage.bind(this),this.setErrorMessage.bind(this)),this.applyButtonListener(i.bind(this),a.bind(this),this.setErrorMessage.bind(this))},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).ZakatCalculator=t}.call(this),function(){var t,e=[].slice;t=function(){function t(t){var e,n;e=$(document),this.config={parent:e},this.config=$.extend({},this.config,t),n=e.find(this._selectors.dialog),this.el={popup:n,dialog:n.find(this._selectors.dialog),read:n.find(this._selectors.read),amount:n.find(this._selectors.amount),submitBtn:n.find(this._selectors.submitBtn)},this.initListeners()}var n,i,a;return t.prototype._selectors={dialog:".js-zakat-confirm-dialog",read:".js-zakat-confirm-read",amount:".js-zakat-confirm-amount",submitBtn:".js-zakat-confirm-submit"},t.prototype._zakatAmount=0,i=function(t){return this.el.submitBtn.prop("disabled",!t)},n=function(t){var e;return e=this,new Promise(function(n,i){return t?(e.el.submitBtn.prop("disabled",!0),n(t)):void 0})},a=function(t){return this.el.submitBtn.addClass("is-active").prop("disabled",!0),$.magnificPopup.instance.st.closeOnBgClick=!1,this.config.parent.trigger("zakat_confirmation:submit",[t])},t.prototype.confirmReadListener=function(t){return this.el.popup.on("change",this._selectors.read,function(){return t(this.checked)})},t.prototype.confirmSubmitListener=function(t,n){var i;return i=this,this.el.popup.on("click",this._selectors.submitBtn,function(a){return a.preventDefault(),t(i.el.read[0].checked).then(function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],n.apply(i,t)})})},t.prototype.close=function(){return $.magnificPopup.close()},t.prototype.open=function(t,e){var n;return this._zakatAmount=t,n=this,$.magnificPopup.open({items:{src:n.el.popup,type:"inline"},enableEscapeKey:!0,closeOnBgClick:!0,callbacks:{open:function(){return n.showZakatAmount.call(n,n._zakatAmount),$.isFunction(e)&&e()}}})},t.prototype.submit=function(){return this.el.read.click(),this.el.submitBtn.click()},t.prototype.showZakatAmount=function(t){var e;return null==t&&(t=0),e=$.BLUtils.numberToMoney(t),this.el.amount.text(e),e.length<=15?this.el.amount.removeClass("u-txt--medium").addClass("u-txt--large"):this.el.amount.removeClass("u-txt--large").addClass("u-txt--medium")},t.prototype.initListeners=function(){return this.confirmReadListener(i.bind(this)),this.confirmSubmitListener(n.bind(this),a.bind(this))},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).ZakatConfirmation=t}.call(this),function(){var t,e=[].slice;t=function(){function t(t,e){var n,i,a;this._isWidget=null!=e?e:!1,this.parent=$(t),this.config={selectors:this._selectors,debounce:300},this._source=this.parent.data("source"),null==this._source&&(this._source="widget"),this.el={},i=this._selectors;for(n in i)a=i[n],this.el[n]=this.parent.find(a);this.el.foundationsInfo=$(".js-zakat-foundations-info"),this.popup={calculator:new ZakatCalculator({parent:this.parent,zakatMinAmount:this._ZAKAT_MIN_AMOUNT}),confirmation:new ZakatConfirmation({parent:this.parent})},this.initDelimiter(),this.initTooltip(),this.initListeners(),this.el.zakatFoundations.append($("<option />").text("").prop("disabled",!0)),this.el.zakatFoundations[0].selectedIndex=0,this.loadFoundations(),this._isWidget||this.setEnterTracker()}var n,i,a,o,r,s,c,u,l,d;return t.prototype._selectors={container:".js-zakat-container",field:".js-zakat-field",zakatAmount:".js-zakat-amount",zakatAmountDelimiter:"#js-zakat-amount-delimiter",calcIcon:".js-zakat-calc",tooltipContent:".js-zakat-tooltip-content",zakatFoundations:"#js-zakat-foundations",payerName:"#js-zakat-payer",anonymous:"#js-zakat-anon",zakatAmountText:".js-zakat-amount-text",payButton:".js-zakat-pay",form:".js-zakat-form",transactionId:".js-zakat-transaction-id"},t.prototype._ZAKAT_MIN_AMOUNT=1e4,t.prototype._zakatData={amount:0,foundation:"",name:""},t.prototype._storageKeys={zakat:"zakat-data"},t.prototype._zakatFoundationsConfig={"dompet-dhuafa":{link:"https://www.dompetdhuafa.org/about",logo:"dompet_dhuafa.png"},"nu-care-lazisnu":{link:"https://www.nucare.id",logo:"nu_care_lazisnu.png"},baznas:{link:"http://baznas.go.id/profil",logo:"baznas.png"},"aksi-cepat-tanggap":{link:"https://www.act.id/tentang/sejarah",logo:"act.png"},"rumah-yatim":{link:"http://www.rumah-yatim.org",logo:"rumah_yatim.png"},lazismu:{link:"https://www.lazismu.org",logo:"lazismu.png"}},l=function(t){var e;return e=this,new Promise(function(n,i){var a;return a=parseInt($.trim(t||0),10),0>a&&(a=0),e.setZakatAmountText(a),a>=e._ZAKAT_MIN_AMOUNT?n(!0):i("Minimum "+$.BLUtils.numberToMoney(e._ZAKAT_MIN_AMOUNT))})},d=function(t){var e;return e=this,new Promise(function(n,i){return t?(e._zakatData.foundation=t,n(!0)):i("Pilih satu")})},u=function(){var t;return t=this,new Promise(function(e,n){return t._zakatData.amount>=t._ZAKAT_MIN_AMOUNT?e(t._zakatData.amount):n("Minimum "+$.BLUtils.numberToMoney(t._ZAKAT_MIN_AMOUNT))})},a=function(t){var e,n;return e=this,n=3e3,t?(e.el.payButton.addClass("c-btn--disabled").prop("disabled",!0),new Promise(function(t,i){return c.call(e,{value:{payload:e._zakatData}}),window.BLSecureClient.api.authorizeLogin("/zakat").then(function(){var a;return a=new Date,window.BLSecureClient.api["interface"].zakat.transactions(e._zakatData).then(function(i){return ZakatProfesiTracker.checkout({source:e._source,transaction_id:i.data.id,foundation:e._zakatData.foundation,nominal:Number(e._zakatData.amount),create_remote_transaction_time:new Date-a}),s.call(e),setTimeout(function(){return t(i.data)},n)})["catch"](function(t){return s.call(e),i(t)})})})):void 0},o=function(t){var e;for(e=t.text().split(" ");t[0].scrollHeight>t[0].offsetHeight;)e.pop(),t.text(e.join(" ")+"...")},t.prototype.submitForm=function(t){return this.el.transactionId.val(t.id),this.el.form.submit()},n=function(t){return this.el.anonymous.parent().css("pointer-events",""),this.el.anonymous.prop("checked",""===t),this._zakatData.name=t},i=function(t){return t?this.el.payerName.val("").change():(this.el.payerName.focus(),this.el.anonymous.parent().css("pointer-events","none")),this._zakatData.name=this.el.payerName.val()},c=function(t){var e;return e=r.call(this)||{expire_in:3600,created_at:(new Date).getTime()},e=JSON.stringify($.extend({},e,t)),window.localStorage.setItem(this._storageKeys.zakat,e)},r=function(t){var e;return e=JSON.parse(window.localStorage.getItem(this._storageKeys.zakat)),e&&new Date(e.created_at+1e3*e.expire_in)<new Date||!e?(s.call(this),null):t&&e?e[t]:e},s=function(){return window.localStorage.removeItem(this._storageKeys.zakat)},t.prototype.isValid=function(){return this._zakatData.amount<this._ZAKAT_MIN_AMOUNT?!1:this.el.zakatFoundations.val()?!0:!1},t.prototype.initDelimiter=function(){var t,e,n;return t=this.el.zakatAmount,n="#"+t[0].id+"-delimiter",0===$(n).length&&t.NumberDelimiter({debounce:!1}),this.el.zakatAmountDelimiter=$(n).removeClass(this.config.selectors.zakatAmount.slice(1)),e=this.el.zakatAmountDelimiter.val().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.el.zakatAmountDelimiter.val(""),t.val("")},t.prototype.initTooltip=function(){var t;return t=this,this.el.calcIcon.tooltipster({content:$(t.config.selectors.tooltipContent).clone().show(),position:"bottom",theme:"tooltip-theme",trigger:"hover",hideOnClick:!0,speed:100})},t.prototype.loadFoundations=function(){var t,e;return t=this,(e=function(n){var i;return i=r.call(t),i&&i.foundations?t.parent.trigger("zakat_foundations:loaded",[i.foundations]):(window.BLSecureClient.api["interface"].zakat.abortRequest(),window.BLSecureClient.api["interface"].zakat.getFoundations().then(function(e){return t.parent.trigger("zakat_foundations:loaded",[e.data])})["catch"](function(i){return n>0?(n-=1,e(n)):(s.call(t),t.parent.trigger("zakat_foundations:failed"))}))})(1)},t.prototype.setEnterTracker=function(){return r.call(this,"formData")?void 0:ZakatProfesiTracker.home({source:this._source})},t.prototype.zakatWidgetListener=function(t){var e;return e=this,$(document).one("click",".js-tab-link[href*=zakat]",function(n){return t.apply(e)}),$(".js-c-tabs-nav--zakat").one("click",function(n){return t.apply(e)})},t.prototype.zakatAmountListener=function(t,n,i){var a,o;return a=this,o=function(){var t;return t="is-focus"+(this.value?"":" is-active"),$(this).parent().removeClass(t)},this.parent.on("change",this.config.selectors.zakatAmount,function(r){return a.el.zakatAmountDelimiter.is(":focus")||o.call(this),t(this.value).then(a.unsetErrorMessage.bind(a,a.el.zakatAmount)).then(function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],n.apply(a,t)})["catch"](a.reset.bind(a,i,a.el.zakatAmount))}),this.parent.on("focus",this.config.selectors.zakatAmountDelimiter,function(t){return $(this).parent().addClass("is-active is-focus")}),this.parent.on("blur",this.config.selectors.zakatAmountDelimiter,function(t){return o.call(this)}),this.parent.on("click","[for=js-zakat-amount]",function(t){return a.el.zakatAmountDelimiter.focus()})},t.prototype.zakatFoundationsInitListener=function(t,e){var n;return n=this,this.parent.on("zakat_foundations:loaded",function(e,i){return t.forEach(function(t){return t.call(n,i)})}),this.parent.on("zakat_foundations:failed",function(t){return n.reset.bind(n,e,n.el.zakatFoundations,"Maaf, sementara tidak dapat melakukan pembayaran zakat")()})},t.prototype.zakatFoundationsListener=function(t,n,i){var a;return a=this,this.parent.on("change",this.config.selectors.zakatFoundations,function(){return t(a.el.zakatFoundations.val()).then(a.unsetErrorMessage.bind(a,a.el.zakatFoundations)).then(function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],n.apply(a,t)})["catch"](a.reset.bind(a,i,a.el.zakatFoundations))}),this.parent.find("[for=js-zakat-foundations]").off("click"),this.parent.find(this.config.selectors.zakatFoundations).off("focus blur").one("click",this.config.selectors.zakatFoundations,function(t){return $(this).children().first().remove()}),this.parent.on("focus",this.config.selectors.zakatFoundations,function(t){return $(this).parent().addClass("is-focus is-active"),$(this).children().first().val()?void 0:$(this).children().first().remove()}),this.parent.on("blur",this.config.selectors.zakatFoundations,function(t){var e;return e="is-focus"+(a.el.zakatFoundations.val()?"":" is-active"),$(this).change().parent().removeClass(e)})},t.prototype.payerNameListener=function(t){var e;return e=this,this.parent.on("input blur",this.config.selectors.payerName,function(e){return t(this.value)})},t.prototype.anonymousListener=function(t){return this.parent.on("change",this.config.selectors.anonymous,function(e){return t(this.checked)})},t.prototype.calculatorIconListener=function(){var t;return t=this,this.parent.on("click",this.config.selectors.calcIcon,function(e){return t.el.zakatAmountDelimiter.focus(),t.popup.calculator.open()})},t.prototype.calculatorPopupListener=function(){var t;return t=this,this.parent.on("zakat_calculator:apply",function(e,n){return t.el.zakatAmount.val(n)}),this.parent.on("zakat_calculator:close",function(e){return t.el.zakatAmount.change()})},t.prototype.payButtonListener=function(t){var e;return e=this,this.parent.on("click",this.config.selectors.payButton,function(n){return n.preventDefault(),e.el.zakatAmount.change(),e.el.zakatFoundations.change(),e.isValid()?t.call(e):void 0})},t.prototype.setZakatAmountText=function(t){return null==t&&(t=0),0===t&&(t=this.el.zakatAmount.val()||0),this._zakatData.amount=parseInt($.trim(t),10).toString(),this.el.zakatAmountText.length?this.el.zakatAmountText.text($.BLUtils.numberToMoney(this._zakatData.amount)):void 0},t.prototype.populateFoundationsDropdown=function(t){var e,n,i;return i=this,e=this.el.zakatFoundations,n=this.el.foundationsInfo.children().first(),t&&t.length?$.each(t,function(t,a){var r,s,c,u,l,d;return a.name=a.name||"",d=a.name.replace(/[ -]+/g,"-").toLowerCase(),l=UrlHelper.assetsHost()+"/images/virtual_product/zakat/",s=$("<option />").val(a.name).text(a.name).addClass("js-slug-"+d),e.append(s),window.location.pathname.toLowerCase().indexOf("/zakat/"+d)>=0&&(s.prop("selected",!0),s.change()),!i._isWidget&&n.length&&(c=i._zakatFoundationsConfig[d]||{},r=n.clone(),u=a.imageUrl||l+c.logo,r.find(".c-avatar").css("background-image","url("+u+")").end().find(".js-foundation-name").text(a.name).end().find(".js-foundation-description").text(a.description||"").end().find(".js-foundation-link").prop({href:c.link,target:"_blank"}).end().removeClass("u-hidden"),n.before(r),o(r.find(".js-foundation-description"))),!0}):void 0},t.prototype.openConfirmationPopup=function(){return this.popup.confirmation.open(this._zakatData.amount)},t.prototype.confirmationPopupListener=function(t,n,i){var a;return a=this,this.parent.on("zakat_confirmation:submit",function(i,o){return t(o).then(function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],
n.apply(a,t)})})},t.prototype.setErrorMessage=function(t,e){var n;return n=t.closest(this._selectors.field).addClass("c-fld--error").find(".c-fld__error").removeClass("u-hidden"),e?n.text(e):void 0},t.prototype.unsetErrorMessage=function(t,e){var n;return n=t.closest(this._selectors.field).removeClass("c-fld--error").find(".c-fld__error").addClass("u-hidden"),e},t.prototype.reset=function(t,e,n){return null==t&&(t=function(){}),this.setErrorMessage(e,n),t.call(this,e,n)},t.prototype.initListeners=function(){return this.zakatWidgetListener(this.setEnterTracker),this.zakatFoundationsInitListener([this.populateFoundationsDropdown,this.autoSubmit],$.noop),this.zakatFoundationsListener(d.bind(this),$.noop),this.zakatAmountListener(l.bind(this),$.noop),this.calculatorIconListener(),this.calculatorPopupListener(),this.payerNameListener(n.bind(this)),this.anonymousListener(i.bind(this)),this.payButtonListener(this.openConfirmationPopup),this.confirmationPopupListener(a.bind(this),this.submitForm)},t.prototype.autoSubmit=function(){var t;return t=r.call(this,"formData"),blGlobal&&null!==blGlobal.user.id&&t&&(this._zakatData=t,this.el.zakatAmount.val(this._zakatData.amount).change(),this.el.zakatFoundations.val(this._zakatData.foundation).change(),this._zakatData.name&&(this.el.payerName.val(this._zakatData.name),this.el.anonymous.prop("checked",!1)),this.isValid())?this.popup.confirmation.open(this._zakatData.amount,this.popup.confirmation.submit.bind(this.popup.confirmation)):void 0},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).EVoucherZakat=t}.call(this),function(){}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var a in e)n.call(e,a)&&(t[a]=e[a]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e,n,a){var o;this.source=n,this.is_agent=null!=a?a:!1,o={operators:[],packages:[],minLength:10},this.config=$.extend({},o),this.EVoucher=new e(t),this.initListeners(),ElectricityPrepaidTracker.home({source:this.source}),f.call(this),i.call(this)}var i,a,o,r,s,c,u,l,d,p,h,f,m,v,g,y;return e(n,t),g=function(t){var e,n,i;return n=function(t){return"<div class='u-mrgn-top--3'> <p class='u-mrgn-bottom--1'>Informasi Pelanggan</p> <div class='c-notification c-notification--gray c-notification--dashed c-notification--block u-mrgn-bottom--3'> <dl class='c-deflist'> <dt class='c-deflist__label'>ID Pelanggan</dd> <dd class='c-deflist__value u-txt--bold'>"+t.id+"</dt> <dt class='c-deflist__label'>No. Meter</dd> <dd class='c-deflist__value u-txt--bold'>"+t.meter_number+"</dt> <dt class='c-deflist__label'>Nama</dd> <dd class='c-deflist__value u-txt--bold'>"+t.subscriber_name+"</dt> <dt class='c-deflist__label'>Tarif/Daya</dd> <dd class='c-deflist__value u-txt--bold'>"+t.segment+" / "+t.power+" VA</dt> </dl> </div> </div>"},e=this.el.find(this.config.selectors.inquiry.container).first(),t.inquiry?(i=n(t.inquiry),e.html(i)):e.text("")},p=function(){return this.el.find(this.config.selectors.inquiry.container).first().text("")},v=function(t){var e;return t.inquiry?(e=t.inquiry,this.el.find(this.config.selectors.inquiry.name).first().val(e.subscriber_name),this.el.find(this.config.selectors.inquiry.segment).first().val(e.segment),this.el.find(this.config.selectors.inquiry.power).first().val(e.power)):void 0},h=function(){return this.el.find(this.config.selectors.inquiry.name).first().val(""),this.el.find(this.config.selectors.inquiry.segment).first().val(""),this.el.find(this.config.selectors.inquiry.power).first().val("")},y=function(t){var e,n;return e=$.BLUtils.prependZero(t.getHours()),n=$.BLUtils.prependZero(t.getMinutes()),e+":"+n},l=function(t){return{id:t.customer_number,subscriber_name:t.customer_name,meter_number:t.meter_number,power:t.power,segment:t.segmentation}},o=function(t){var e;return t.length<this.config.minLength?(this.inquiry=null,Promise.reject("Minimum "+this.config.minLength+" angka")):(e=this,f.call(this).then(function(){return e.api("inquiry")({customer_number:t}).then(function(t){var n,i;return n=t.data,n?(e.inquiry=l(n),0===e.config.packages.length?Promise.reject("Produk sedang kosong"):(i={packages:e.config.packages,activePackage:e.config.packages[0],inquiry:e.inquiry},Promise.resolve(i))):(e.inquiry=null,Promise.reject("Nomor meter / ID pelanggan tidak ditemukan"))})["catch"](function(t){var n,i,a;return e.inquiry=null,t&&t.errors&&t.errors[0]?(i=t.errors[0],"90012"===i.code?Promise.reject(i.message):"90014"===i.code?(a=y(new Date("2018-01-01T23:00:00.000+07:00")),n=y(new Date("2018-01-02T01:00:00.000+07:00")),Promise.reject("Layanan tidak tersedia pada jam "+a+" - "+n+" WIB")):Promise.reject("Terjadi kesalahan, silakan coba lagi")):"string"==typeof t?Promise.reject(t):Promise.reject("Terjadi kesalahan, silakan coba lagi")})}))},a=function(t,e){var n,i,a,o;return n=this,i=this.EVoucher,this.inquiry||e?(r.call(this),e||(e=this.EVoucher.el.find(this.EVoucher.config.selectors["package"]).filter(":checked").val()),o={customerNumber:t,productId:parseInt(e,10)},a=$.extend({},o,{expire_in:3600,created_at:(new Date).getTime()}),this.setLocalData(this.storageKey,a),new Promise(function(t,e){return n.api("authorize").then(function(){return n.api("transactions")(o).then(function(e){return ElectricityPrepaidTracker.checkout(e.data.id,n.source),i.el.find(i.config.selectors.inquiry.trxId).val(e.data.id),t()})["catch"](function(t){var i,a,o;return c.call(n),t&&t.errors&&t.errors[0]?(a=t.errors[0],"90012"===a.code?e(a.message):"90014"===a.code?(o=y(new Date("2018-01-01T23:00:00.000+07:00")),i=y(new Date("2018-01-02T01:00:00.000+07:00")),e("Layanan tidak tersedia pada jam "+o+" - "+i+" WIB")):e("Terjadi kesalahan, silakan coba lagi")):e("string"==typeof error?error:"Terjadi kesalahan, silakan coba lagi")}).then(function(){return n.removeLocalData(n.storageKey)})})})):void 0},i=function(){var t;return(t=this.getLocalData(this.storageKey))?a.call(this,t.customerNumber,t.productId).then(function(t){return function(){return t.EVoucher.el.find(t.EVoucher.config.selectors.form).first().submit()}}(this)):void 0},m=function(t,e){return null==t&&(t=!1),null==e&&(e=!1),this.EVoucher.el.find(this.EVoucher.config.selectors.buyButton).toggleClass("c-btn--disabled",t).toggleClass("is-active",t&&!e).prop("disabled",t)},s=function(){return m.call(this,!0,!0)},r=function(){return m.call(this,!0,!1)},c=function(){return m.call(this,!1,!0)},u=function(t,e){var n;return n=this,f.call(this).then(function(){var t,i;return t=n.config.packages.filter(function(t){return String(t.id)===e})[0],i={packages:n.config.packages,activePackage:t||{},inquiry:n.inquiry},Promise.resolve(i)})},d=function(t,e){return null==t&&(t=[]),0===t.length?t:t.filter(function(t){var n,i,a;return n="agent"===t.group&&e,i="normal"===t.group&&!e,a="normal"===t.group&&!window.blGlobal.user.loggedIn,n||i||a}).map(function(t,e){return{id:t.id,note:"",operator:"PLN","package":t.name,price:t.price}})},f=function(){var t;return t=this,this.config.packages.length?Promise.resolve():this.api("getProducts")().then(function(e){var n,i,a;return a=d(e.data,t.is_agent),i=[{name:"PLN",prefix:[""]}],n={packages:a,operators:i},$.extend(t.config,n),$.extend(t.EVoucher.config,n),Promise.resolve(n)})["catch"](function(t){return t?(window.BLFlash.initByJS("Terjadi kesalahan. Silakan coba lagi.","alert"),Promise.reject()):void 0})},n.prototype.inquiry=null,n.prototype.storageKey="electricity_prepaid_form_data",n.prototype.api=function(t){return window.BLSecureClient.api["interface"].electricityPrepaid.abortRequest(),"authorize"===t?window.BLSecureClient.api.authorizeLogin("/listrik-pln/token-listrik"):window.BLSecureClient.api["interface"].electricityPrepaid[t]},n.prototype.initListeners=function(){var t,e;return e=[g,this.setOperatorLogo,v],t=[p,h],this.EVoucher.customerNumberListener(o.bind(this),e,t),this.EVoucher.packageListener(u.bind(this),this.setOperatorLogo),this.EVoucher.submitListener(a.bind(this))},n}(VirtualProduct),("undefined"!=typeof exports&&null!==exports?exports:this).ElecPrepaid=t}.call(this),function(){("undefined"!=typeof exports&&null!==exports?exports:this).CustomDate=function(t,e){return null==e&&(e=!0),"number"==typeof t?(t=new Date(t),DateUtils.dayShort[t.getDay()]+", "+t.getDate()+" "+DateUtils.monthShort[t.getMonth()]+" "+t.getFullYear()):e?t.day+" "+DateUtils.monthShort[t.month-1]+" "+t.year:DateUtils.monthShort[t.month-1]+" "+t.year},("undefined"!=typeof exports&&null!==exports?exports:this).FullDate=function(t,e){return null==e&&(e=!0),e?t.day+" "+DateUtils.months[t.month-1]+" "+t.year:DateUtils.months[t.month-1]+" "+t.year},("undefined"!=typeof exports&&null!==exports?exports:this).StringToDateObject=function(t){var e,n,i,a;return e=t.split("-").map(function(t){return parseInt(t)}),a=e[0],i=e[1],n=e[2],{day:n,month:i,year:a}},("undefined"!=typeof exports&&null!==exports?exports:this).FormatPeriodDate=function(t,e,n){var i,a,o,r;return null==n&&(n=FullDate),i=StringToDateObject(t),o=StringToDateObject(e),a=n(i,!1),r=n(o,!1),t===e?a:(i.year===o.year&&(a=DateUtils.months[i.month-1]),a+" - "+r)}}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var a in e)n.call(e,a)&&(t[a]=e[a]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e,n){this.source=n,this.config={operators:[],packages:[],minLength:10,selectors:{inquiryType:".js-ev-inq-type",widget:".js-ev-inq-widget-info",period:".js-ev-inq-period",detailBtnClassOpen:".js-ev-inq-postpaid__detail-btn-open",detailBtnClassClose:".js-ev-inq-postpaid__detail-btn-close",inquiryDetailClass:".js-ev-inq-postpaid__detail",tooltipClass:".js-ev-inq-prc-tooltip"},storageKeys:{customerNumberKey:"post-paid-customer-number"},closeTime:{start:new Date("2017-06-20T22:45:00.000+07:00"),end:new Date("2017-06-21T01:00:00.000+07:00")},authorizeLoginPath:"/listrik-pln/tagihan-listrik"},this.EVoucher=new e(t,this.config),this.initListeners(),ElectricityPostpaidTracker.home({source:this.source}),i.call(this)}var i,a,o,r,s,c,u,l,d,p,h,f,m,v,g,y,b;return e(n,t),v=function(t){var e,n,i,a;return i=function(t){var e,i,a,o;return o=t.period[0],i=t.period[t.period.length-1],a=FormatPeriodDate(o,i),e=t.bills.reduce(function(t,e){return t+e.amount},0),"<div class='u-mrgn-top--3 o-layout' style='margin-left: -36px'> <div class='o-layout__item u-6of12 u-pad-left--6'> <div class='c-panel'> <div class='c-panel__head'> <h3 class='c-panel__title'>Informasi Pelanggan</h3> </div> <div class='c-panel__body'> <dl class='c-deflist c-deflist--medium'> <dt class='c-deflist__label u-mrgn-bottom--2 u-fg--charcoal'>Nama</dd> <dd class='c-deflist__value u-mrgn-bottom--2'>"+t.customer_name+"</dt> <dt class='c-deflist__label u-mrgn-bottom--2 u-fg--charcoal'>ID Pelanggan</dd> <dd class='c-deflist__value u-mrgn-bottom--2'>"+t.customer_number+"</dt> <dt class='c-deflist__label u-mrgn-bottom--2 u-fg--charcoal'>Tarif/Daya</dd> <dd class='c-deflist__value u-mrgn-bottom--2'>"+t.segmentation+" / "+t.power+" VA</dt> <dt class='c-deflist__label u-fg--charcoal'>Jumlah Tagihan</dd> <dd class='c-deflist__value'>"+t.bills.length+"</dt> </dl> </div> </div> </div> <div class='o-layout__item u-6of12 u-pad-left--6'> <div class='c-panel'> <div class='c-panel__head'> <h3 class='c-panel__title'>Informasi Tagihan</h3> </div> <div class='c-panel__body'> <dl class='c-deflist'> <dt class='c-deflist__label u-mrgn-bottom--2 u-fg--charcoal'>Periode</dt> <dd class='c-deflist__value u-mrgn-bottom--2'>"+a+"</dd> <dt class='c-deflist__label u-mrgn-bottom--2 u-fg--charcoal'>Total Denda</dt> <dd class='c-deflist__value u-mrgn-bottom--2'>"+t.penalty_fee.BLMonefy()+"</dd> <dt class='c-deflist__label u-mrgn-bottom--2 u-fg--charcoal'>Biaya Admin</dt> <dd class='c-deflist__value u-mrgn-bottom--2'>"+t.admin_charge.BLMonefy()+"</dd> <dt class='c-deflist__label u-fg--charcoal u-position-relative'> Total Tagihan<span class='js-ev-inq-prc-tooltip c-icon c-icon--help c-fld-tooltip-hint__cue'></span> <div class='c-tooltip c-tooltip--bottom u-position-absolute u-hidden' style='top: 15px; right: -72px;'> <div class='c-tooltip__pointer'></div> <div class='c-tooltip__content'> Belum termasuk biaya admin dan denda. </div> </div> </dt> <dd class='c-deflist__value'> <div class='o-layout u-mrgn-left--0'> <div class='o-layout__item u-3of12 u-pad-left--0'> "+e.BLMonefy()+" </div> <div class='o-layout__item u-9of12 u-pad-left--0'> <div class='js-ev-inq-postpaid' style='margin-bottom: -6px; margin-top: -1px'> <div class='js-ev-inq-postpaid__detail u-hidden'> <div class='js-ev-inq-postpaid__detail-btn-close' style='margin-left: -6px'> <span class='u-fg--red-brand c-icon c-icon--medium c-icon--arrow-dropup'></span><a href='#'>Detail Tagihan</a> </div> "+n(t.bills)+" </div> <div class='js-ev-inq-postpaid__detail-btn-open' style='margin-left: -6px'> <span class='u-fg--red-brand c-icon c-icon--medium c-icon--arrow-dropdown'></span><a href='#'>Detail Tagihan</a> </div> </div> </div> </div> </dd> </dl> </div> </div> </div> </div>"},n=function(t){var e,n;return n="",e=this,t.forEach(function(t){var e;return e=FullDate(StringToDateObject(t.bill_period),!1),n+="<p class='u-mrgn-bottom--2'><span class='u-fg--charcoal'>"+e+":</span> "+t.amount.BLMonefy()+"</p>"}),n},t.inquiry&&(e=this.el.find(this.config.selectors.inquiry.container).first(),a=i(t.inquiry),e.html(a)),t},u=function(t){var e,n,i;return e=this,n=this.EVoucher,i={customerNumber:t,expire_in:3600,created_at:(new Date).getTime()},this.setLocalData(this.storageKey,i),o.call(this),new Promise(function(i,a){return window.BLSecureClient.api.authorizeLogin(n.config.authorizeLoginPath).then(function(){var o;return o=new Date,window.BLSecureClient.api["interface"].electrictityPostPaid.transactions(t).then(function(t){var e;return e=t.data.id,$(n.el).find(n.config.selectors.inquiry.trxId).val(e),$(n.el).find(n.config.selectors.inquiry.trxPurchaseTime).val(+o),i()})["catch"](function(t){return c.call(e),$(".js-loading").addClass("u-hidden"),n.el.removeClass("u-hidden"),a("Gagal membayar tagihan listrik")}).then(function(){return e.removeLocalData(e.storageKey)})})})},s=function(t){return this.el.find(this.config.selectors.buyButton).prop("disabled",!1).removeClass("c-btn--disabled"),t},m=function(t){var e;return e=t.inquiry,this.el.find(this.config.selectors.priceText).text($.BLUtils.numberToMoney(e.amount)),this.el.find(this.config.selectors.priceText).parents(".c-fld-material").first().inputMaterial("active"),this.el.find(this.config.selectors.period).parents(".c-fld-material").first().inputMaterial("active"),t},f=function(t){var e,n,i,a,o;return i=t.inquiry,o=i.period[0],e=i.period[i.period.length-1],n=o===e?FullDate:CustomDate,a=FormatPeriodDate(o,e,n),this.el.find(this.config.selectors.period).val(a),t},b=function(){return this.el.find(this.config.selectors.period).val(""),this.el.find(this.config.selectors["package"]).parents(".c-fld-material").first().inputMaterial("blur"),this.el.find(this.config.selectors.priceText).parents(".c-fld-material").first().inputMaterial("blur")},l=function(){return this.el.find(this.config.selectors.inquiry.container).first().text("")},h=function(t){var e;return t.inquiry&&(e=t.inquiry,this.el.find(this.config.selectors.inquiry.name).first().val(e.subscriber_name),this.el.find(this.config.selectors.inquiry.segment).first().val(e.segment),this.el.find(this.config.selectors.inquiry.power).first().val(e.power)),t},d=function(){return this.el.find(this.config.selectors.inquiry.name).first().val(""),this.el.find(this.config.selectors.inquiry.segment).first().val(""),this.el.find(this.config.selectors.inquiry.power).first().val("")},y=function(t){return t.penalty_fee=t.bills.reduce(function(t,e){return t+e.penalty_fee},0),t.period=t.bills.map(function(t){return t.bill_period}),t},g=function(t){var e,n;return e=$.BLUtils.prependZero(t.getHours()),n=$.BLUtils.prependZero(t.getMinutes()),e+":"+n},a=function(t){var e;return e=this,new Promise(function(n,i){return t.length>=10?(window.BLSecureClient.api["interface"].electrictityPostPaid.abortRequest(),window.BLSecureClient.api["interface"].electrictityPostPaid.inquiry(t).then(function(t){var a;return e.inquiry=y(t.data),e.inquiry?(a={inquiry:e.inquiry,packages:[],activePackage:void 0},n(a)):i("Inquiry tidak ada")})["catch"](function(t){var n,a,o;return e.inquiry=null,t&&t.errors[0]?(a=t.errors[0],18102===a.code?i(a.message):18111===a.code?(o=g(e.config.closeTime.start),n=g(e.config.closeTime.end),i("Layanan tidak tersedia pada jam "+o+" - "+n+" WIB")):i("Terjadi kesalahan, silakan coba lagi")):i(t)})):(e.inquiry=null,i("Nomor meter tidak terdaftar"))})},i=function(){var t;return(t=this.getLocalData(this.storageKey))?u.call(this,t.customerNumber).then(function(t){return function(){return t.EVoucher.el.find(t.EVoucher.config.selectors.form).first().submit()}}(this)):void 0},p=function(t,e){return null==t&&(t=!1),null==e&&(e=!1),this.EVoucher.el.find(this.EVoucher.config.selectors.buyButton).toggleClass("c-btn--disabled",t).toggleClass("is-active",t&&!e).prop("disabled",t)},r=function(){return p.call(this,!0,!0)},o=function(){return p.call(this,!0,!1)},c=function(){return p.call(this,!1,!0)},n.prototype.inquiry=null,n.prototype.storageKey="electricity_postpaid_form_data",n.prototype.initListeners=function(){var t,e,n;return t=this,n=[v,h,s,m,f,this.setOperatorLogo],e=[l,d,b],this.EVoucher.customerNumberListener(a.bind(this),n,e),this.EVoucher.submitListener(u.bind(this)),this.EVoucher.el.on("click",this.config.selectors.detailBtnClassOpen+","+this.config.selectors.detailBtnClassClose,function(e){return e.preventDefault(),$(t.config.selectors.inquiryDetailClass).toggleClass("u-hidden"),$(t.config.selectors.detailBtnClassOpen).toggleClass("u-hidden")}),this.EVoucher.el.on("mouseenter",this.config.selectors.tooltipClass,function(){return $(this).next(".c-tooltip").removeClass("u-hidden")}),this.EVoucher.el.on("mouseleave",this.config.selectors.tooltipClass,function(){return $(this).next(".c-tooltip").addClass("u-hidden")})},n}(VirtualProduct),("undefined"!=typeof exports&&null!==exports?exports:this).ElecPostpaid=t}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var a in e)n.call(e,a)&&(t[a]=e[a]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){var n,i,a,o,r;this.config=this.getConfig(t),this.config.bypassUnsetPackages=!0,this.EVoucher=new e(t,this.config),this.EVoucher.$el={},a=this.EVoucher.config.selectors;for(n in a)if(o=a[n],"string"==typeof o)this.EVoucher.$el[n]=t.find(o);else{this.EVoucher.$el[n]={};for(i in o)r=o[i],this.EVoucher.$el[n][i]=t.find(r)}this.storageKey="bpjs-kesehatan-data",this.formData={},this.inquiryData=null,this.initListeners(),this.funnel=t.data("funnel")||"widget",s.call(this),u.call(this)}var i,a,o,r,s,c,u,l,d,p,h,f,m,v,g,y;return e(n,t),u=function(){var t;return t=this,this.EVoucher.$el["package"].off("blur").on("blur",function(){return $(this).closest(".c-fld-material").removeClass("is-focus"),t.formData.paid_until===t.EVoucher.$el["package"].val()&&t.inquiryData?void 0:$(this).trigger("change")})},g=function(t){return this.formData={customer_number:this.EVoucher.$el.customerNumber.val(),paid_until:this.EVoucher.$el["package"].val()}},y=function(t){return null==t&&(t=null),this.inquiryData=t},f=function(t){var e;return e=0,t&&t.amount&&(e=parseInt(t.amount,10)),this.EVoucher.$el.priceText.text(e>0?$.BLUtils.numberToMoney(e):"Rp")},h=function(){return g.call(this),y.call(this),f.call(this)},p=function(){return this.formData.customer_number!==this.EVoucher.$el.customerNumber.val()||this.formData.paid_until!==this.EVoucher.$el["package"].val()},m=function(t,e){return null==t&&(t=!1),null==e&&(e=!1),this.EVoucher.$el.buyButton.toggleClass("c-btn--disabled",t).toggleClass("is-active",t&&!e).prop("disabled",t)},s=function(){return m.call(this,!0,!0)},r=function(){return m.call(this,!0,!1)},c=function(){return m.call(this,!1,!0)},i=function(t){return t?t.length<13?Promise.reject("Minimum 13 digit"):Promise.resolve():Promise.reject("Harus diisi")},l=function(){var t,e;return e=$.extend({},this.formData),t=e.paid_until.split("-"),e.paid_until={year:parseInt(t[0],10),month:parseInt(t[1],10)},e},a=function(){var t;return t=this,r.call(this),new Promise(function(e,n){var i;return i=l.call(t),t.setLocalData(t.storageKey,{formData:t.formData,inquiry:t.inquiryData}),window.BLSecureClient.api.authorizeLogin("/bpjs-kesehatan").then(function(){return window.BLSecureClient.api["interface"].bpjsKesehatan.transactions(i).then(function(n){return BpjsKesehatanTracker.checkout(n.data.id,t.funnel),t.EVoucher.$el.inquiry.trxId.val(n.data.id),e(n.data.id)})["catch"](function(e){var i;return c.call(t),i="Terjadi gangguan. Silakan coba lagi nanti.",e&&e.errors&&e.errors.length&&18102===e.errors[0].code&&(i=e.errors[0].message),n(i)}).then(function(){return t.removeLocalData(t.storageKey)})})})},d=function(){var t;return t=this,new Promise(function(e,n){return window.BLSecureClient.api["interface"].bpjsKesehatan.inquiry(l.call(t)).then(function(t){var i;return i=t.data,i?e(i):n()})["catch"](function(t){var e;return e="Terjadi gangguan. Silakan coba lagi nanti.",t&&t.errors&&t.errors.length&&18102===t.errors[0].code&&(e=t.errors[0].message),n(e)})})},o=function(t){var e;return e=this,new Promise(function(n,a){return s.call(e),i.call(e,t).then(function(){return!p.call(e)&&e.inquiryData?(c.call(e),void n()):(r.call(e),h.call(e),void d.call(e).then(function(t){return y.call(e,t),c.call(e),n()})["catch"](function(t){return s.call(e),a(t)}).then(function(){return f.call(e,e.inquiryData)}))})["catch"](function(t){return a(t)}),h.call(e)})},v=function(){return BpjsKesehatanTracker.home({source:this.funnel})},n.prototype.widgetListener=function(t){var e;return e=this,$(document).one("click",".js-tab-link[href*=bpjs-kesehatan]",function(n){return t.apply(e)}),$(".js-c-tabs-nav--bpjs-kesehatan").one("click",function(n){return t.apply(e)})},n.prototype.initListeners=function(){return this.EVoucher.setPackages({packages:this.config.packages,activePackage:this.config.packages[0]}),this.EVoucher.customerNumberListener(o.bind(this)),this.EVoucher.packageListener(o.bind(this)),this.EVoucher.submitListener(a.bind(this)),this.widgetListener(v.bind(this))},n}(VirtualProduct),("undefined"!=typeof exports&&null!==exports?exports:this).BpjsKesehatanWidget=t}.call(this),function(){var t,e;("undefined"!=typeof exports&&null!==exports?exports:this).DateUtils={day:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],dayShort:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],daySuperShort:["Mn","Sn","Sl","Rb","Km","Jm","Sb"],workdays:["Sn","Sl","Rb","Km","Jm"],weekend:["Mn","Sb"],months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],monthShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],getDaysInMonth:function(t){var e;return e=new Date(t.getFullYear(),t.getMonth()+1,0),e.getDate()},isLeapYear:function(t){var e,n;return e=t.getMonth(),n=t.getFullYear(),1===e&&(n%4===0&&n%100!==0||n%400===0)?!0:!1},getOnlyDate:function(t){return t.getFullYear()+"-"+$.BLUtils.prependZero(t.getMonth()+1)+"-"+$.BLUtils.prependZero(t.getDate())},getTimeString:function(t){var e,n;return e=t.year+"-"+$.BLUtils.prependZero(t.month)+"-"+$.BLUtils.prependZero(t.day),n=$.BLUtils.prependZero(t.hour)+":"+$.BLUtils.prependZero(t.minute)+":"+$.BLUtils.prependZero(t.second),e+"T"+n},formatTime:function(t){var e,n;return e=t.year+"-"+$.BLUtils.prependZero(t.month)+"-"+$.BLUtils.prependZero(t.day),n=$.BLUtils.prependZero(t.hour)+":"+$.BLUtils.prependZero(t.minute),e+" "+n}},("undefined"!=typeof exports&&null!==exports?exports:this).TimeUtils={rangeFilter:[[{hour:0,minute:0,second:0},{hour:7,minute:0,second:0}],[{hour:7,minute:0,second:0},{hour:12,minute:0,second:0}],[{hour:12,minute:0,second:0},{hour:18,minute:0,second:0}],[{hour:18,minute:0,second:0},{hour:24,minute:0,second:0}]]},("undefined"!=typeof exports&&null!==exports?exports:this).FlightLocalization={facility:function(t){return{PSC:"Pajak Bandara",BAG:"Bagasi "+t+" Kg",MEAL:"Makanan"}}},("undefined"!=typeof exports&&null!==exports?exports:this).FlightIcons={facility:{PSC:"c-icon-duotone--tax",BAG:"c-icon-duotone--baggage",MEAL:"c-icon-duotone--food-alt"}},("undefined"!=typeof exports&&null!==exports?exports:this).CarrierUtils={getCarrierName:function(t){return t.name},getCarrierLogo:function(t){return t.name.toLowerCase().split(" ").join("-")},getCarrierLogoFromResponse:function(t){return t.image_url},getCarrierLogos:function(t){var e,n,i,a,o;for(a=[],n=0,i=t.length;i>n;n++)o=t[n],e=o.carrier.name,a.push(e.toLowerCase().split(" ").join("-"));return a=a.unique()},getCarrierLogosFromResponse:function(t){var e,n,i,a;for(i=[],e=0,n=t.length;n>e;e++)a=t[e],i.push(a.carrier.image_url);return i=i.unique()}},("undefined"!=typeof exports&&null!==exports?exports:this).ValidatorUtils={isEmailValid:function(t){var e;return e=new RegExp(/^([a-zA-Z0-9_\-\.\+]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/g),e.test(t)}},Array.prototype.unique=function(){return this.filter(function(t,e,n){return n.indexOf(t)===e})},("undefined"!=typeof exports&&null!==exports?exports:this).PassengerFormUtils={adultTitles:[{value:"MR",name:"Mr"},{value:"MRS",name:"Mrs"},{value:"MS",name:"Ms"}],childTitles:[{value:"MR",name:"Mr"},{value:"MS",name:"Ms"}],months:[{value:"01",name:"Januari"},{value:"02",name:"Februari"},{value:"03",name:"Maret"},{value:"04",name:"April"},{value:"05",name:"Mei"},{value:"06",name:"Juni"},{value:"07",name:"Juli"},{value:"08",name:"Agustus"},{value:"09",name:"September"},{value:"10",name:"Oktober"},{value:"11",name:"November"},{value:"12",name:"Desember"}]},("undefined"!=typeof exports&&null!==exports?exports:this).FlightTracker={search:function(t,e){var n,i;return null==e&&(e={}),n={source:"landing_page"},e=$.extend({},n,e),i={single_trip:t.singleTrip,date:DateUtils.getOnlyDate(new Date(t.date)),return_date:DateUtils.getOnlyDate(new Date(t.returnDate)),from:t.from.code,to:t.to.code,adult:t.passengers.adult,child:t.passengers.child,infant:t.passengers.infant,source:e.source},BLStatsTracker.trackEvent("vp_dweb_flight_search",i)},newBooking:function(t,e,n){var i,a;return null==e&&(e=!1),null==n&&(n={}),i={source:"landing_page"},n=$.extend({},i,n),a={departure_flight_key:t.key,return_fight_key:e?e.key:"",departure_flight_adult_fare:FlightSubTotalFare(t.segments,1,"adult"),return_flight_adult_fare:n.returnFlight?FlightSubTotalFare(e.segments,1,"adult"):"",source:n.source},BLStatsTracker.trackEvent("vp_dweb_flight_booking_new",a)},createBooking:function(t,n,i,a){var o,r,s;return null==i&&(i=null),null==a&&(a={}),o={source:"landing_page"},a=$.extend({},o,a),t.source=a.source,i=null!=i?e(i):"",r={departure_flight_data:e(n),return_fight_data:i},s=a=$.extend({},r,t),BLStatsTracker.trackEvent("vp_dweb_flight_booking_create",s)},confirmBooking:function(t,e){var n;return null==e&&(e={}),n={source:"landing_page"},e=$.extend({},n,e),BLStatsTracker.trackEvent("vp_dweb_flight_booking_confirm",{transaction_id:t,source:e.source})},newPayment:function(t,e){var n;return null==e&&(e={}),n={source:"landing_page"},e=$.extend({},n,e),BLStatsTracker.trackEvent("vp_dweb_flight_payment_new",{payment_id:t,source:e.source})},filter:function(t){return BLStatsTracker.trackEvent("vp_dweb_flight_filter",t)},sort:function(t){return BLStatsTracker.trackEvent("vp_dweb_flight_sort",t)},bookingDuration:function(t){var e;return e={duration:t.duration,status:t.status,new_booking_flow:t.new_booking_flow},BLStatsTracker.trackEvent("vp_dweb_flight_booking_duration",e)},failedBooking:function(t,n,i,a,o){var r,s;return null==a&&(a=null),null==o&&(o={}),r={source:"landing_page"},o=$.extend({},r,o),a=null!=a?e(a):"",s={buyer_email:t.email,buyer_name:t.name,buyer_phone_number:t.phoneNumber,buyer_title:t.title,departure_flight_data:e(i),return_fight_data:a,passengers:JSON.stringify(n),source:o.source},BLStatsTracker.trackEvent("vp_dweb_flight_booking_failed",s)}},("undefined"!=typeof exports&&null!==exports?exports:this).LoadVueBundle=function(t){var e,n,i,a,o,r,s;if(a=function(){var e,n,i,a;for(a=[],n=0,i=t.length;i>n;n++)e=t[n],a.push(e());return a},!($(".js-vue-bundle").length>0))return a();if(e=$("head")[0],s=$(".js-vue-bundle").find("script"),s.length>0){for(o=[],n=i=0,r=s.length-1;r>=0?r>=i:i>=r;n=r>=0?++i:--i)o.push(new Promise(function(t,i){var a;return a=document.createElement("script"),a.src=s[n].src,a.async=!1,a.onload=function(){return t()},e.appendChild(a)}));return Promise.all(o).then(function(){return a()})}},t=function(t,e){return e.reduce(function(e,n){return e[n]=t[n],e},{})},e=function(e){var n,i;return n=["carrier","origin","destination"],i=e.segments.map(function(e){return e=t(e,n),e.carrier=t(e.carrier,["code","name"]),e}),JSON.stringify(i)}}.call(this),function(){var t;t={computed:{getPaymentMethod:function(){return"dana"===this.paymentObject.payment_method&&"REBATE"===this.paymentObject.dana_payment_method?"Credits":window.PaymentMethodHelper.getName(this.paymentObject.payment_method)},extraPaymentMethodInfo:function(){return"dana"!==this.paymentObject.payment_method||"REBATE"!==this.paymentObject.dana_payment_method?window.PaymentMethodHelper.extraInfo({method:this.paymentObject.payment_method,danaPaymentMethod:this.paymentObject.dana_payment_method,isBukaDana:this.paymentObject.use_bukadana}):void 0},uniqCode:function(){return this.paymentObject.uniq_code||0},serviceFee:function(){return this.paymentObject.service_fee||0},depositReductionAmount:function(){return this.paymentObject.deposit_reduction_amount||0},partnerReductionAmount:function(){return this.paymentObject.dana_partner_reduction_amount||0},depositBalanceUsed:function(){return this.paymentObject.deposit_balance_used||0},creditsBalanceUsed:function(){return this.paymentObject.credits_balance_used||0},bufferAmount:function(){return this.paymentObject.buffer_amount||0},discount:function(){return this.paymentObject.reduction_amount},danaCouponAmount:function(){return this.paymentObject.dana_coupon_amount},totalPayment:function(){return this.paymentObject.payment_amount},checkServiceFee:function(){return!this.paymentObject.use_atm&&!this.paymentObject.use_deposit},isUsingAtm:function(){return this.paymentObject.use_atm},isUsingVoucher:function(){return this.paymentObject.use_voucher},voucherAmount:function(){return this.paymentObject.voucher_amount},insurancePolicy:function(){return this.transaction.policy||this.transaction.bookings[0].policy},invoiceDate:function(){var t,e,n,i,a;return t="",t=null!==this.paymentObject.paid_at?new Date(this.paymentObject.paid_at):new Date(this.paymentObject.created_at),e=$.BLUtils.prependZero(t.getDate()),n=DateUtils.months[t.getMonth()],a=t.getFullYear(),i=$.BLUtils.prependZero(t.getHours())+"."+$.BLUtils.prependZero(t.getMinutes()),e+" "+n+" "+a+", "+i+" WIB"},minPayment:function(){return(this.totalPayment-this.serviceFee).BLMonefy()}},mounted:function(){return this.$refs.tooltip_trigger?$(this.$refs.tooltip_trigger).autooltip():void 0}},("undefined"!=typeof exports&&null!==exports?exports:this).PaymentObjectMixin=t}.call(this),function(){var t;t={template:"<form class='js-bpjs-kesehatan-form' action='/payment/invoices/create' accept-charset='UTF-8' method='post' data-no-turbolink='true'> <input name='utf8' type='hidden' value='\u2713'> <input type='hidden' name='authenticity_token' :value='authenticityToken'> <input type='hidden' name='transactions[][id]' v-model='transactionId'> <input type='hidden' name='transactions[][type]' value='bpjs-kesehatan'> <div class='o-layout__item u-4of12 u-pad-left--0 u-pad-right--2'> <div class='c-fld-material c-fld-material--bordered c-fld--error-absolute' style='height: 58px'> <input class='c-inp-material' maxlength='16' name='bpjs_kesehatan_customer_number' :readonly='isSendingRequest' v-model='customerNumber' @keypress='checkNumeric' @change='checkNumeric' @input='inquiryWithDebounce'> <label class='c-fld-material__lbl'>No. Kepesertaan/No. VA Keluarga</label> <div class='c-fld__error'>{{ error.customerNumber }}</div> </div> </div> <div class='o-layout__item u-4of12 u-pad-left--0 u-pad-right--2'> <div class='c-fld-material c-fld-material--bordered c-fld--error-absolute' :class='{\"is-active\": paidUntil != null}' style='height: 58px'> <select class='c-inp-material js-bpjs-payment-period' :readonly='isSendingRequest' v-model='paidUntil' @change='inquiryWithDebounce'> <option v-for='(item, i) in periods' :value='item.id'>{{ item.package }}</option> </select> <label class='c-fld-material__lbl'>Bayar Hingga</label> <div class='c-fld__error'>{{ error.paidUntil }}</div> </div> </div> <div class='o-layout__item u-2of12 u-pad-left--0 u-pad-right--2'> <div class='c-fld-material c-fld-material--no-bordered is-active' style='height: 58px'> <div class='c-inp-material'> <span class='u-txt--medium'>{{ displayAmount }}</span> </div> <label class='c-fld-material__lbl'>Total</label> </div> </div> <div class='o-layout__item u-2of12 u-pad-left--0 u-pad-right--2 u-align-right'> <button type='submit' @click.prevent='createRemoteTransaction' :disabled='isInquiring' :class='{\"is-active\": isCreatingTransaction}' class='c-btn c-btn--red c-btn--large c-btn--spinner u-txt--base u-pad-h--8' style='height: 58px'> <i class='c-btn--spinner__icon'></i> <span class='c-btn--spinner__text'>Bayar BPJS</span> </button> </div> </form>",
data:function(){return{customerNumber:"",paidUntil:"",transactionId:null,error:{customerNumber:"",paidUntil:""}}},computed:{authenticityToken:function(){return $("meta[name=csrf-token]").attr("content")},periods:function(){return this.$store.getters.getPeriods},getFormData:function(){return this.$store.getters.getFormData},getInquiry:function(){return this.$store.getters.getInquiry},isSendingRequest:function(){return this.$store.getters.isInquiring||this.$store.getters.isCreatingTransaction},isInquiring:function(){return this.$store.getters.isInquiring},isCreatingTransaction:function(){return this.$store.getters.isCreatingTransaction},displayAmount:function(){var t,e;return e=this.$store.getters.getInquiry,e&&(t=parseInt(e.amount,10),t>0)?t.BLMonefy():"Rp"},formProperties:function(){return[this.customerNumber,this.paidUntil]}},methods:{materializeInput:function(){return $(this.$el).find(".c-fld-material").each(function(){return $(this).inputMaterial()})},validateForm:function(){return this.customerNumber?this.customerNumber.length<13?this.error.customerNumber="Minimum 13 digit":this.error.customerNumber="":this.error.customerNumber="Harus diisi",this.paidUntil?this.error.paidUntil="":this.error.paidUntil="Pilih satu"},isFormValid:function(){return this.validateForm(),this.error.customerNumber||this.error.paidUntil?void this.$store.commit("setInquiry",null):!0},setFormData:function(){return this.$store.commit("setFormData",{customer_number:this.customerNumber,paid_until:this.paidUntil})},checkNumeric:function(t){return 8!==t.which&&0!==t.which&&(t.which<48||t.which>57)?void t.preventDefault():!0},inquiry:function(){var t;return t=this,this.isFormValid()?(this.$store.commit("setInquiring",!0),t.$store.dispatch("inquiryRequest").then(function(e){var n;return n=e.data,t.$store.commit("setInquiry",n),n?void 0:Promise.reject()})["catch"](function(e){var n;return n="Terjadi kesalahan, silakan coba lagi",e&&e.errors&&e.errors.length&&18102===e.errors[0].code&&(n=e.errors[0].message),t.$store.commit("setInquiry",null),t.error.customerNumber=n}).then(function(){return t.$store.commit("setInquiring",!1)})):void 0},inquiryWithDebounce:window.FunctionHelper.debounce(function(){return this.inquiry()},500),createRemoteTransaction:function(){var t;return t=this,this.getInquiry?this.isFormValid()&&this.getInquiry?(this.$store.commit("setCreatingTransaction",!0),this.$store.dispatch("saveDataToStorage"),this.$store.dispatch("createTransactionRequest").then(function(e){var n;return e&&e.data?(n=e.data.id,t.$store.dispatch("trackerCheckout",n),t.transactionId=n):Promise.reject()})["catch"](function(e){var n;return n="Terjadi kesalahan, silakan coba lagi",e&&e.errors&&e.errors.length&&18102===e.errors[0].code&&(n=e.errors[0].message),t.$store.commit("setCreatingTransaction",!1),window.BLFlash.initByJS(n,"alert")}).then(function(){return t.$store.dispatch("removeDataFromStorage")})):void 0:this.inquiry()},submit:function(){return $(".js-bpjs-kesehatan-form").submit()},autoSubmit:function(){return this.$store.dispatch("retrieveDataFromStorage"),this.getFormData&&this.getInquiry?(this.customerNumber=this.getFormData.customer_number,this.paidUntil=this.getFormData.paid_until,this.createRemoteTransaction()):void 0}},watch:{formProperties:function(t){return this.customerNumber=t[0].replace(/[^0-9]+/gi,""),this.setFormData()},transactionId:function(t){return this.$nextTick(function(){return this.submit()})}},mounted:function(){return this.materializeInput(),this.autoSubmit()},beforeMount:function(){return this.paidUntil=this.periods[0].id}},("undefined"!=typeof exports&&null!==exports?exports:this).BpjsInquiryForm=t}.call(this),function(){var t;t={template:"<dl class='c-deflist c-deflist--medium' v-if='info'> <template v-for='(item, i) in info'> <dt :class='adjustMarginBottom(i)' class='c-deflist__label u-fg--ash-dark' style='min-width: 222px'> {{ item.label }} </dt> <dd :class='adjustMarginBottom(i)' class='c-deflist__value' style='margin-left: 228px'> {{ item.value }} </dd> </template> </dl>",props:{info:{type:Array,required:!0}},methods:{adjustMarginBottom:function(t){return{"u-mrgn-bottom--2":this.info&&this.info.length&&this.info.length>t+1}}}},("undefined"!=typeof exports&&null!==exports?exports:this).BpjsInquiryResultItem=t}.call(this),function(){var t;t={template:"<div class='o-layout__item u-6of12 u-pad-left--5 u-pad-right--1'> <div class='c-panel'> <div class='c-panel__head'> <h3 class='c-panel__title'>{{ title }}</h3> </div> <div class='c-panel__body'> <bpjs-inquiry-result-item :info='info'></bpjs-inquiry-result-item> </div> </div> </div>",props:{type:{type:String,required:!0}},data:function(){return{title:"Informasi",labels:{}}},components:{"bpjs-inquiry-result-item":BpjsInquiryResultItem},computed:{formData:function(){return this.$store.getters.getFormData},periods:function(){return this.$store.getters.getPeriods},info:function(){return"customer"===this.type?this.getCustomerInfo(this.$store.getters.getInquiry):"bill"===this.type?this.getBillInfo(this.$store.getters.getInquiry):void 0}},methods:{setTitle:function(){return"customer"===this.type?this.title="Informasi Pelanggan":"bill"===this.type?this.title="Informasi Tagihan":void 0},getCustomerInfo:function(t){return[{label:"Nama Lengkap",value:t.customer_name},{label:"Jumlah Anggota Keluarga",value:t.family_member_count},{label:"No. Kepesertaan/No. VA Keluarga",value:t.customer_number}]},getBillInfo:function(t){var e,n;return e=DateHelper.humanizeTimestamp(t.paid_until.year+"-"+t.paid_until.month,"%month% %yyyy%"),n=parseInt(t.amount,10)-parseInt(t.admin_charge,10),[{label:"Bayar Hingga",value:e},{label:"Premi",value:n.BLMonefy()},{label:"Biaya Admin",value:parseInt(t.admin_charge,10).BLMonefy()}]}},mounted:function(){return this.setTitle()}},("undefined"!=typeof exports&&null!==exports?exports:this).BpjsInquiryResult=t}.call(this),function(){var t;t={template:"<div class='u-position-absolute u-position--top-left u-height-1 u-width-1' style='z-index: 10;'> <div class='u-bg--ash-light u-opct--2 u-height-1 u-width-1'></div> <div class='c-avatar u-bg--white u-mrgn-auto u-position-absolute u-position--top-left u-position--bottom-right' style=' background: url(\"/images/desktop/loader-red.svg\") 50% 50%/36px no-repeat; box-shadow: 0px 2px 6px rgba(0,0,0,.2); height: 44px; width: 44px; '></div> </div>"},("undefined"!=typeof exports&&null!==exports?exports:this).BpjsInquiryLoading=t}.call(this),function(){var t;t={template:"<div class='u-bg--white u-pad-top--6 u-mrgn-bottom--7 u-border--all u-position-relative'> <div class='o-layout o-layout--responsive u-mrgn-bottom--6'> <div class='o-layout__item u-12of12 u-pad-left--10 u-pad-right--5'> <div class='o-layout u-clearfix u-mrgn-left--1'> <div class='u-txt--fair u-mrgn-bottom--3'> Bayar BPJS Kesehatan kamu di sini </div> <bpjs-inquiry-form></bpjs-inquiry-form> </div> </div> </div> <div v-if='inquired' class='o-layout o-layout--responsive u-mrgn-bottom--6 u-pad-h--6'> <bpjs-inquiry-result type='customer'></bpjs-inquiry-result> <bpjs-inquiry-result type='bill'></bpjs-inquiry-result> </div> <bpjs-inquiry-loading v-show='isSendingRequest'></bpjs-inquiry-loading> </div>",props:{funnel:{type:String,required:!0}},components:{"bpjs-inquiry-form":BpjsInquiryForm,"bpjs-inquiry-result":BpjsInquiryResult,"bpjs-inquiry-loading":BpjsInquiryLoading},computed:{isSendingRequest:function(){return this.$store.getters.isInquiring||this.$store.getters.isCreatingTransaction},inquired:function(){return null!=this.$store.getters.getInquiry}},mounted:function(){return this.$store.dispatch("trackerEnter")},beforeMount:function(){var t;return t=JSON.parse(this.$slots["default"][0].children[0].text),this.$store.commit("setPeriods",t.packages),this.$store.commit("setFunnel",this.funnel)}},("undefined"!=typeof exports&&null!==exports?exports:this).BpjsInquiry=t}.call(this),function(){}.call(this),function(){var t;"undefined"!=typeof Vuex&&(t=function(){return new Vuex.Store({state:{periods:[],funnel:"landing_page",storageKey:"bpjs-kesehatan-data",inquiry:null,formData:null,isInquiring:!1,isCreatingTransaction:!1},mutations:{setPeriods:function(t,e){return t.periods=e},setFunnel:function(t,e){return t.funnel=e},setInquiry:function(t,e){return t.inquiry=e},setFormData:function(t,e){return t.formData=e},setInquiring:function(t,e){return t.isInquiring=e},setCreatingTransaction:function(t,e){return t.isCreatingTransaction=e}},getters:{getPeriods:function(t){return t.periods},getFunnel:function(t){return t.funnel},getInquiry:function(t){return t.inquiry},getFormData:function(t){return t.formData},isInquiring:function(t){return t.isInquiring},isCreatingTransaction:function(t){return t.isCreatingTransaction}},actions:{trackerEnter:function(t){return window.BpjsKesehatanTracker.home({source:t.state.funnel})},trackerCheckout:function(t,e){return window.BpjsKesehatanTracker.checkout(e,t.state.funnel)},saveDataToStorage:function(t,e){var n;return null==e&&(e=0),n=JSON.stringify({formData:t.getters.getFormData,inquiry:t.getters.getInquiry,expire_in:e||3600,created_at:(new Date).getTime()}),window.localStorage.setItem(t.state.storageKey,n)},retrieveDataFromStorage:function(t){var e,n;return n=t.state.storageKey,e=JSON.parse(window.localStorage.getItem(n)),(e&&new Date(e.created_at+1e3*e.expire_in)<new Date||!e)&&(t.dispatch("removeDataFromStorage"),e={}),t.commit("setInquiry",e.inquiry),t.commit("setFormData",e.formData)},removeDataFromStorage:function(t){return window.localStorage.removeItem(t.state.storageKey)},inquiryRequest:function(t){return new Promise(function(e,n){var i,a;return a=t.getters.getFormData,"string"==typeof a.paid_until&&(i=a.paid_until.split("-"),a.paid_until={year:parseInt(i[0],10),month:parseInt(i[1],10)}),window.BLSecureClient.api["interface"].bpjsKesehatan.abortRequest(),window.BLSecureClient.api["interface"].bpjsKesehatan.inquiry(a).then(function(t){return e(t)})["catch"](function(t){return n(t)})})},createTransactionRequest:function(t){return new Promise(function(e,n){var i,a;return a=t.getters.getFormData,"string"==typeof a.paid_until&&(i=a.paid_until.split("-"),a.paid_until={year:parseInt(i[0],10),month:parseInt(i[1],10)}),window.BLSecureClient.api["interface"].bpjsKesehatan.abortRequest(),window.BLSecureClient.api.authorizeLogin("/bpjs-kesehatan").then(function(){return window.BLSecureClient.api["interface"].bpjsKesehatan.transactions(a).then(function(t){return e(t)})["catch"](function(t){return n(t)})})})}}})},("undefined"!=typeof exports&&null!==exports?exports:this).BpjsKesehatanStore=t)}.call(this),function(){var t,e,n;n=".js-bpjs-kesehatan","undefined"!=typeof Vue&&$(n).length>0&&(e={el:n,components:{"bpjs-inquiry":BpjsInquiry},store:BpjsKesehatanStore()},t=new Vue(e))}.call(this),function(){}.call(this),function(){var t;t={template:"<div class='o-layout' v-if='transaction'> <div class='o-layout__item u-3of12'> <div class='u-txt--tiny u-fg--ash-dark'> PRODUK </div> <div class='u-clearfix u-pad-top--1'> <div class='c-thumb-group u-width-1'> <div class='o-layout o-layout--bleed'> <div class='o-layout__item u-pad-right--0' style='width: 36px'> <div class='c-thumb c-thumb--micro' :style='thumbImage'></div> </div> <div class='o-layout__item u-9of12 u-pad-left--1'> <div class='u-txt--small'> {{ transaction.event.name }} </div> </div> </div> </div> </div> </div> <div class='o-layout__item u-2of12'> <div class='u-txt--tiny u-fg--ash-dark u-pad-bottom--1'>TANGGAL EVENT</div> {{ eventDate }} </div> <div class='o-layout__item u-7of12'> <div class='u-txt--tiny u-fg--ash-dark u-pad-bottom--1'>NAMA PEMESAN</div> {{ transaction.contact_name }} </div> </div>",props:["transactions","id"],data:function(){return{transaction:null}},computed:{thumbImage:function(){return{backgroundImage:"url('"+this.transaction.event.image_url+"')",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"}},eventDate:function(){var t,e;return e=DateHelper.humanizeTimestamp(this.transaction.event.start_at,"%dd% %mmm% %yyyy%"),t=DateHelper.humanizeTimestamp(this.transaction.event.end_at,"%dd% %mmm% %yyyy%"),e===t?e:e+" - "+t}},mounted:function(){var t;return t=this,void 0!==this.transactions||null!==this.transactions?this.transaction=this.transactions.find(function(e,n){return parseInt(e.id,10)===parseInt(t.id,10)}):void 0}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketTransactionInfo=t}.call(this),function(){}.call(this),function(){$(function(){var t,e,n;return n=".js-event-ticket-transaction-list","undefined"!=typeof Vue&&$(n).length>0?(e={el:n,data:function(){return{transactions:[],isDoneLoadingData:!1}},components:{"event-ticket-transaction-info":EventTicketTransactionInfo},watch:{isDoneLoadingData:function(t){return t?($(".js-event-ticket-loading").hide(),$(this.$el).show(),$(".js-paginate").show()):void 0}},mounted:function(){var t,e,n,i,a,o;if(t=this,o=null,o=JSON.parse($(this.$el).find("#remote_ids").html()),null!==o){for(a=[],0===o.length&&(t.isDoneLoadingData=!0),e=0,i=o.length;i>e;e++)n=o[e],a.push(new Promise(function(t,e){return window.BLSecureClient.api["interface"].eventTicket.getTransaction(n).then(function(e){return t(e.data)})["catch"](function(t){return e(t)})}));return Promise.all(a).then(function(e){return t.transactions=e,t.isDoneLoadingData=!0})}return t.isDoneLoadingData=!0}},t=new Vue(e)):void 0})}.call(this),function(){var t,e;e=window.BLSecureClient.api["interface"].eventTicket,t={template:"<div @click.prevent='pay()' class='c-btn c-btn--red c-btn--block' v-if='type === \"button\"'> Lanjutkan Pembayaran </div> <div v-else> <a @click.prevent='pay()'>Lanjutkan Pembayaran</a> </div>",props:["type","invoiceId","redirectUrl"],methods:{pay:function(t){var n,i,a,o;return a=window.localStorage.getItem("otp_key"),n=window.localStorage.getItem("browser_fp"),i={"Bukalapak-OTP-Device-ID":window.blGlobal.user.tfa_identity},n&&(i["Bukalapak-Device-Fingerprint"]=n),a&&"undefined"!==a?i["Bukalapak-OTP-Key"]=a:t&&(i["Bukalapak-OTP"]=t),o=this,e.triggerPayment(o.invoiceId,{headers:i}).then(function(t){return window.location.href=o.redirectUrl,window.BLTFA.eventBus.$emit("success",t.meta.otp_key,function(){return window.location.href=o.redirectUrl})})["catch"](function(e){var n;return n=e.errors.map(function(t){return t.code}),-1!==n.indexOf(10101)?t?window.BLTFA.eventBus.$emit("invalidOtp"):window.BLTFA.eventBus.$emit("open"):void 0})}},mounted:function(){var t;return t=this,window.BLTFA.eventBus.$on("sendRequestWithOtp",function(e){return t.pay(e)}),window.BLTFA.eventBus.$on("resendOtp",function(){return t.pay()})}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketPaymentFree=t}.call(this),function(){var t;t={template:"<div class='o-layout u-mrgn-left--0'> <div class='o-layout__item u-bg--sand-light u-border--1--sand-dark u-pad-left--0 u-mrgn-bottom--4'> <div class='u-display-table u-border-collapsed u-width-1 u-pad-v--2 u-pad-bottom--1'> <div class='u-display-table-cell u-pad-h--3 u-pad-v--0'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>Nama Pemesan</div> {{ transaction.contact_name }} </div> <div class='u-display-table-cell u-pad-h--3 u-pad-v--0 u-5of12'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>No. Telpon</div> {{ transaction.contact_phone }} </div> </div> <div class='u-display-table u-border-collapsed u-width-1 u-pad-v--2'> <div class='u-display-table-cell u-pad-h--3 u-pad-v--0'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>E-mail Pemesan</div> {{ transaction.contact_email }} </div> <div class='u-display-table-cell u-pad-h--3 u-pad-v--0 u-5of12'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>No. Identitas</div> {{ transaction.contact_identity_number ? transaction.contact_identity_number : '-'}} </div> </div> </div> <div class='o-layout__item u-border--1--sand-dark u-pad-left--0'> <div class='u-display-table u-border-collapsed u-border-bottom--1--sand-dark u-width-1'> <div class='u-display-table-cell u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark'>E-Tiket</div> <div class='u-clearfix'> <div v-if='showETixDownloadLink' class='u-float-right'> <a href='#' class='u-txt--small qa-tix-download-eticket-event' @click='download'>Download E-Tiket</a> <div class='u-hidden' aria-hidden='true'> <form ref='eticket' action='/payment/event_ticket/transactions/download_eticket' accept-charset='UTF-8' method='post' target='_blank' data-no-turbolink='true'> <input name='utf8' type='hidden' value='\u2713'> <input type='hidden' name='authenticity_token' :value='authenticityToken'> <input type='hidden' name='payload' :value='payload'> </form> </div> </div> {{ eTicketStatus }} </div> </div> </div> <div class='u-display-table u-border-collapsed u-width-1'> <div class='u-display-table-cell u-pad--3'> <div class='u-mrgn-bottom--2'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark'>NAMA EVENT</div> <div class='u-clearfix'> <div class='u-float-right u-position-relative' style='top: -15px; margin-bottom: -30px;'> <a href='#' class='u-position-relative u-float--right u-cursor-zoom-in' title='Klik gambar untuk memperbesar' @keyup.esc='hideFullPoster'> <div @click='viewFullPoster' class='c-thumb c-thumb--tiny' :style='thumbnailStyle'></div> </a> </div> {{ transaction.event.name }} </div> </div> <div class='u-mrgn-bottom--2'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark'>LOKASI</div> <div class='u-clearfix'> {{ venue }} </div> </div> <div class='u-mrgn-bottom--2'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark'>TANGGAL</div> <div class='u-clearfix'> {{ eventDates }} </div> </div> <div class='u-mrgn-bottom--2'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark'>WAKTU</div> <div class='u-clearfix'> {{ eventTimes }} </div> </div> <div class='u-mrgn-bottom--2'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark'>JUMLAH E-TIKET</div> <div class='u-clearfix'> <span v-html='ticketsPerCategory'></span> </div> </div> <div v-if='hasSeatings'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark'>DAFTAR KURSI</div> <div class='u-clearfix'> {{ seatings }} </div> </div> </div> </div> </div> </div>",props:["transaction","id","transactionState"],data:function(){return{openFullPoster:!1}},computed:{authenticityToken:function(){return $("meta[name=csrf-token]").attr("content")},venue:function(){return this.transaction.event.venue_name+", "+this.transaction.event.venue_city},eventDates:function(){var t,e,n,i;return this.transaction.tickets.length&&this.transaction.tickets[0].showing&&this.transaction.tickets[0].showing.start_at?(n=this.transaction.tickets[0].showing.start_at,t=this.transaction.tickets[0].showing.end_at):(n=this.transaction.event.start_at,t=this.transaction.event.end_at),i=DateHelper.humanizeTimestamp(n,"%day%, %dd% %mmm% %yyyy%"),e=DateHelper.humanizeTimestamp(t,"%day%, %dd% %mmm% %yyyy%"),i===e?i:i+" - "+e},eventTimes:function(){var t,e,n,i,a,o;return this.transaction.tickets.length&&this.transaction.tickets[0].showing&&this.transaction.tickets[0].showing.start_at?(n=this.transaction.tickets[0].showing.start_at,t=this.transaction.tickets[0].showing.end_at):(n=this.transaction.event.start_at,t=this.transaction.event.end_at),a=n.slice(-5),o="08:00"===a?"WITA":"09:00"===a?"WIT":"WIB",i=DateHelper.humanizeTimestamp(n,"%hh%:%mi%"),e=DateHelper.humanizeTimestamp(t,"%hh%:%mi%"),i===e?i:i+" - "+e+" "+o},ticketsPerCategory:function(){var t,e,n,i;t={},this.transaction.tickets.forEach(function(e){var n;return n=e.sector.name,t[n]?t[n]++:t[n]=1}),n=[];for(e in t)i=t[e],n.push(i+"x "+e);return n.join(" &middot; ")},seatings:function(){return this.hasSeatings?this.transaction.tickets.map(function(t){return t.seating.seat}).map(function(t){return t.seat_row+"."+t.seat_column}).sort().join(", "):""},hasSeatings:function(){return this.transaction.tickets.filter(function(t){return null!=t.seating}).length>0},thumbnailStyle:function(){var t;return t=["background-image: url("+this.transaction.event.image_url+")","background-size: cover","background-position: center","background-repeat: no-repeat"],t.join(";")},payload:function(){var t;return t=$.extend({},this.transaction),t.trx_id=this.id,JSON.stringify(t)},showETixDownloadLink:function(){return this.transaction.tickets.some(function(t){var e;return e=t.state,"issued"===e})},eTicketStatus:function(){var t,e,n,i,a,o;return o=this.transaction.tickets,n=o.every(function(t){var e;return e=t.state,"pending"===e}),a=o.some(function(t){var e;return e=t.state,"issued"===e}),t=o.every(function(t){var e;return e=t.state,"admitted"===e}),e=o.every(function(t){var e;return e=t.state,"canceled"===e}),i=o.every(function(t){var e;return e=t.state,"revoked"===e}),n?"invoiced"===this.transactionState?DateHelper.humanizeTimestamp(this.transaction.expire_time,"Menunggu pembayaran hingga %day%, %dd% %mmm% %yyyy%, %hh%:%mi% WIB"):"paid"===this.transactionState?"E-tiket sedang diproses":"Pending":a?"E-tiket telah terbit":t?"E-tiket telah digunakan":e?"Kedaluwarsa":i?"E-tiket telah dibatalkan":"Selesai"}},methods:{download:function(t){return t.preventDefault(),$(this.$refs.eticket).submit()},viewFullPoster:function(t){return t.preventDefault(),this.openFullPoster=!0},hideFullPoster:function(){return this.openFullPoster=!1}}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketTransactionDetail=t}.call(this),function(){var t;t={template:"<div aria_hidden='true'> <div v-show='!isShowingDetail'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'>RINCIAN PEMBAYARAN</div> <div class='u-mrgn-bottom--1' v-if='isUsingAtm'> {{ Math.floor(totalPayment / 1000).BLMonefy() }}.<strong>{{ ('00' + (totalPayment % 1000)).slice(-3) }}</strong> </div> <div class='u-mrgn-bottom--1' v-else>{{ totalAmount }}</div> <a class='u-txt--small qa-invoice-show-detail-payment' href='#js-pricing' v-show='!isShowingDetail' @click.prevent='showDetail'>Lihat Rincian</a> </div> <div v-show='isShowingDetail'> <template v-if='ticketsPerCategory' v-for='(data, category) in ticketsPerCategory'> <dl class='o-split o-split--micro'> <dt class='o-split__title'>{{ data.tixCount }}x {{ category }}</dt> <dd v-if='data.price === 0' class='o-split__desc qa-invoice-amount u-fg--green-dark'>Gratis</dd> <dd v-else class='o-split__desc qa-invoice-amount'>{{ data.price.BLMonefy() }}</dd> </dl> </template> <table class='u-mrgn-top--2 u-12of12'> <tr v-if='discount &gt; 0'> <td class='u-pad-bottom--2'>Diskon</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-voucher-amount'>(-) {{ discount.BLMonefy() }}</td> </tr> <tr v-if='checkServiceFee'> <td class='u-pad-bottom--2'>Biaya Layanan</td> <td class='u-pad-bottom--2 u-align-right'>{{ serviceFee.BLMonefy() }}</td> </tr> <tr v-if='uniqCode &gt; 0'> <td class='u-pad-bottom--2'>Kode Unik</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-unique-code'>{{ uniqCode.BLMonefy() }}</td> </tr> <tr v-if='creditsBalanceUsed &gt; 0'> <td class='u-pad-bottom--2'>Potongan Saldo Credits</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-credits-balance-used'>(-) {{ creditsBalanceUsed.BLMonefy() }}</td> </tr> <tr v-if='depositBalanceUsed &gt; 0'> <td class='u-pad-bottom--2'>Potongan Saldo BukaDompet</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-deposit-balance-used'>(-) {{ depositBalanceUsed.BLMonefy() }}</td> </tr> <tr v-if='partnerReductionAmount &gt; 0'> <td class='u-pad-bottom--2'>Potongan Saldo DANA</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-partner-reduction-amount'>(-) {{ partnerReductionAmount.BLMonefy() }}</td> </tr> <tr v-if='bufferAmount &gt; 0'> <td class='u-pad-bottom--2'>Pembulatan <span class='c-icon c-icon--help u-pointer' data-autooltip-content='#js-buffer-amount-tooltip-content' data-autooltip-position='bottom' ref='tooltip_trigger'> </span> <div class='u-hidden'> <div id='js-buffer-amount-tooltip-content'> <div class='c-tooltip c-tooltip--bottom' style='width: 255px; left: 18px;'> <div class='c-tooltip__pointer' style='left: 44%'></div> <div class='c-tooltip__content u-align-left'> Terdapat pembulatan karena total belanja kamu di bawah pembayaran minimum sebesar {{ minPayment }} </div> </div> </div> </div> </td> <td class='u-pad-bottom--2 u-align-right qa-invoice-buffer-amount'>{{ bufferAmount.BLMonefy() }}</td> </tr> </table> <dl class='o-split o-split--micro u-mrgn-top--2'> <dt class='o-split__title u-txt--bold'> Total Pembayaran </dt> <dd class='o-split__desc u-txt--bold qa-invoice-total-amount'> {{ totalAmount }} </dd> </dl> <a class='u-txt--small u-mrgn-top--4 u-display-block' href='#' @click.prevent='hideDetail'>Sembunyikan Rincian</a> </div> </div>",props:["transaction","paymentObject"],data:function(){return{isShowingDetail:!1,categories:{}}},computed:{totalAmount:function(){return this.totalPayment.BLMonefy()},ticketsPerCategory:function(){var t;if(this.transaction.tickets.length)return t={},this.transaction.tickets.forEach(function(e){var n,i;return n=e.sector.name,i=parseInt(e.price,10),t[n]?(t[n].tixCount++,t[n].price+=i):t[n]={tixCount:1,price:i}}),t}},methods:{showDetail:function(){return this.isShowingDetail=!0},hideDetail:function(){return this.isShowingDetail=!1}},mixins:[PaymentObjectMixin]},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketInvoiceDetail=t}.call(this),function(){var t;t={template:"<div class='js-print-invoice' style='display: none' :data-css='cssHref'> <div class='invoice'> <div class='invoice__header'> <img alt='Logo' src='/images/logo/single_352x56_0_red_03052016.png'> <h1>Bukti Pembayaran Tagihan Tiket &ldquo;{{ transaction.event.name }}&rdquo;</h1> </div> <div class='invoice__general-info'> <p>No: <strong>&num;{{ paymentObject.invoice_id }}</strong></p> <p>Metode Pembayaran: <strong>{{ getPaymentMethod }}</strong></p> <p>Tanggal: <strong>{{ invoiceDate }}</strong></p> </div> <div class='invoice__buyer-details'> <h2 class='invoice__buyer-header'>Detail Pemesan</h2> <div class='invoice__buyer-details-col-wrapper'> <div class='invoice__buyer-details-col'> Nama Lengkap: <strong>{{ transaction.contact_name }}</strong> </div> </div> <div class='invoice__buyer-details-col-wrapper'> <div class='invoice__buyer-details-col'> Email: <strong>{{ transaction.contact_email }}</strong> </div> </div> </div> <div class='invoice__details' v-if='ticketsPerCategory'> <h2>Detail Tagihan</h2> <table> <tr> <th style='width: 23%' class='u-align-left'>Produk</th> <th colspan='2' class='u-align-left'>Deskripsi</th> <th style='width: 17%' class='u-align-right'>Total</th> </tr> <tr> <td :rowspan='totalCategory' class='gray'>Event - {{ transaction.event.name }}</td> <td colspan='2' class='gray'>{{ ticketsPerCategoryFirst.name }} ({{ ticketsPerCategoryFirst.tixCount }} tiket)</td> <td class='u-align-right'>{{ ticketsPerCategoryFirst.price | money }}</td> </tr> <tr v-for='category in ticketsPerCategory' v-if='ticketsPerCategoryFirst.name != category.name'> <td colspan='2' class='gray'>{{ category.name }} ({{ category.tixCount }} tiket)</td> <td class='u-align-right'>{{ category.price | money }}</td> </tr> <tr class='no-border-bottom'> <td></td> <td class='remove-border'></td> <td style='width: 17%' class='u-align-right'>Total Biaya</td> <td style='width: 17%' class='u-align-right'><strong>{{ transaction.total_amount | money }}</strong></td> </tr> <tr class='no-border-bottom' v-if='discount &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Diskon</td> <td class='u-align-right'>(-) {{ discount | money }}</td> </tr> <tr class='no-border-bottom' v-if='checkServiceFee'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Biaya Layanan</td> <td class='u-align-right'>{{ serviceFee | money }}</td> </tr> <tr class='no-border-bottom' v-if='uniqCode &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Kode Pembayaran</td> <td class='u-align-right'>{{ uniqCode | money }}</td> </tr> <tr class='no-border-bottom' v-if='depositReductionAmount &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Saldo BukaDompet</td> <td class='u-align-right'>(-) {{ depositReductionAmount | money }}</td> </tr> <tr class='no-border-bottom' v-if='bufferAmount &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Pembulatan</td> <td class='u-align-right'> {{ bufferAmount | money }}</td> </tr> <tr class='no-border-bottom'> <td></td> <td class='remove-border'></td> <td class='u-align-right' style='width: 17%'><strong>Total Pembayaran</strong></td> <td class='u-align-right'><strong>{{ totalPayment | money }}</strong></td> </tr> </table> <footer style='width: 100%; position: absolute; bottom: 0; border-top: solid 0.70546mm #ddd; padding-top: 1.5875mm; font-size: 2.82185mm; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.4; color: #333;'> <p style='color: #333 !important; margin: 0;'> Contact Customer Center: <br> <strong style='color: #333 !important'>bl.id/bukabantuan</strong> <br> <strong style='color: #333 !important'>(021) 50813333</strong> </p> </footer> </div> </div> </div>",props:["transaction","paymentObject","cssHref"],data:function(){return{ticketsPerCategory:null}},computed:{invoiceDate:function(){var t;return t=new Date(this.paymentObject.paid_at||this.paymentObject.created_at),DateHelper.humanizeTimestamp(t,"%dd% %month% %yyyy%, %hh%:%mi% WIB")},ticketsPerCategoryFirst:function(){return this.ticketsPerCategory[Object.keys(this.ticketsPerCategory)[0]]},totalCategory:function(){return Object.keys(this.ticketsPerCategory).length}},methods:{setTicketsPerCategory:function(){var t,e;return t={},e=0,this.transaction.tickets.forEach(function(e){var n,i;return n=e.sector.name,i=parseInt(e.price,10),t[n]?(t[n].tixCount++,t[n].price+=i):t[n]={tixCount:1,price:i,name:n}}),this.ticketsPerCategory=$.extend({},t)}},filters:{money:function(t,e){return t.BLMonefy()}},beforeMount:function(){return this.setTicketsPerCategory()},mixins:[PaymentObjectMixin]},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketPrintInvoice=t}.call(this),function(){}.call(this),function(){$(function(){var t,e,n;return n=".js-event-ticket-trx","undefined"!=typeof Vue&&$(n).length>0?(e={el:n,data:{transaction:null,isDoneLoading:!1,printInvoiceHtml:null,cssLinkDom:null},methods:{printInvoice:function(){var t,e,n,i;return this.printInvoiceHtml||(n=$(".js-print-invoice").eq(0),e=$("<div/>",{id:"invoice"}).html(n.html()),t=$("<link/>",{rel:"stylesheet",media:"all",href:n.data("css")}),this.printInvoiceHtml=e[0].outerHTML,this.cssLinkDom=t[0]),i=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=1,status=0"),i.document.write(this.printInvoiceHtml),i.document.head.appendChild(this.cssLinkDom),i.document.close(),i.focus(),i.onload=function(){return i.print(),i.close()}}},components:{"event-ticket-payment-free":EventTicketPaymentFree,"event-ticket-transaction-detail":EventTicketTransactionDetail,"event-ticket-invoice-detail":EventTicketInvoiceDetail,"event-ticket-print-invoice":EventTicketPrintInvoice},mounted:function(){var t,e;return t=this,e=$(this.$el).data("transactionId"),window.BLSecureClient.api["interface"].eventTicket.getTransaction(e).then(function(e){return t.transaction=e.data,t.isDoneLoading=!0})["catch"](function(t){var e;return e='<a href="#" onclick="return !!window.location.reload()">refresh halaman ini.</a>',window.BLFlash.initByJS("Terjadi gangguan. Silakan coba "+e,"warning")}),$(".js-copy-to-clipboard").blCopyToClipboard2()}},t=new Vue(e)):void 0})}.call(this),function(){var t;t={template:"<div class='u-bg--sand' style='position: fixed; top: 0; left: 0; width: 100%; z-index: 999; height: 100%; overflow: scroll;'> <header class='c-progress-steps u-mrgn-bottom--0'> <div class='c-progress-steps__content'> <div class='o-container o-container--guide o-container--responsive'> <div class='o-layout o-layout--responsive'> <div class='o-layout__item u-3of12'> <div class='c-brand c-brand--logo c-brand--red u-width-1of2'> <a href='#'> <div class='c-brand__link' title='Belanja Online Aman, Nyaman, dan Terpercaya di Bukalapak'>Bukalapak.com</div> </a> </div> </div> <div class='o-layout__item u-9of12 u-align-right u-float-right'> <span v-for='step in steps' class='c-progress-steps__step' :class='isCurrentStep(step)'>{{ step.label }}</span> </div> </div> </div> </div> </header> <section :class='containerClasses'> <slot></slot> </section> </div>",props:{currentStep:{type:String,"default":""},hasSeating:{type:Boolean,"default":!1},fullPage:{type:Boolean,"default":!0}},data:function(){return{steps:[{name:"isi-data",label:"Isi Data"},{name:"pilih-kursi",label:"Pilih Kursi"},{name:"pembayaran",label:"Pembayaran"}]}},computed:{containerClasses:function(){return this.fullPage?"":"o-container o-container--guide o-container--responsive";
}},mounted:function(){return this.hasSeating?void 0:this.steps.splice(1,1)},methods:{isCurrentStep:function(t){return t.name===this.currentStep?"is-current":""}}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketFocusPage=t}.call(this),function(){var t;t={template:"<form action='/payment/invoices/create' method='post' ref='createInvoiceForm' accept-charset='UTF-8'> <input name='utf8' type='hidden' value='\u2713'> <input type='hidden' name='authenticity_token' :value='authenticityToken'> <input type='hidden' name='transactions[][id]' :value='transactionId'> <input type='hidden' name='transactions[][type]' :value='transactionType'> </form>",props:{transactionType:{type:String,"default":""},transactionId:{type:[String,Number],"default":"0"}},computed:{authenticityToken:function(){return $("meta[name=csrf-token]").attr("content")}},methods:{createInvoice:function(){return this.$nextTick(function(){return $(this.$refs.createInvoiceForm).submit()})}}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketInvoiceCreator=t}.call(this),function(){var t;t={template:"<div> <div class='mfp-bg mfp-ready'></div> <div class='mfp-wrap mfp-auto-cursor mfp-ready' tabindex='-1' style='overflow-x: hidden; overflow-y: auto;'> <div class='mfp-container mfp-s-ready mfp-inline-holder'> <div class='mfp-content'> <div class='c-modal'> <div class='c-modal__content o-box u-pad--7'> <div class='u-align-center'> <img src='/images/preloader.gif'> <div class='u-txt--medium u-mrgn-top--4'> Transaksi kamu sedang diproses dan dapat berlangsung beberapa menit </div> </div> </div> </div> </div> </div> </div> </div>"},("undefined"!=typeof exports&&null!==exports?exports:this).EventProgressBooking=t}.call(this),function(){var t;t={template:"<div> <div class='mfp-bg mfp-ready'></div> <div class='mfp-wrap mfp-auto-cursor mfp-ready' tabindex='-1' style='overflow-x: hidden; overflow-y: auto;'> <div class='mfp-container mfp-s-ready mfp-inline-holder'> <div class='mfp-content'> <div class='c-modal' style='width: 500px'> <div class='c-modal__content o-box u-pad--7 u-align-center'> <div class='c-empty-box c-empty-box--booking-failed u-mrgn-bottom--6' style='height: auto'> <div class='c-empty-box__inner'> <div class='c-empty-box__illustration u-mrgn-bottom--6'></div> <div class='c-empty-box__title u-mrgn-bottom--2'>Pesanan Belum Berhasil</div> <div class='c-empty-box__subtitle'> Pemesanan kamu belum diproses, <br/> silakan klik 'Kembali ke pilih tiket' untuk memilih ulang tiket. </div> </div> </div> <div class='c-btn c-btn--red c-btn--block u-mrgn-bottom--4' @click='closeModal'>Coba Lagi</div> <a href='#' @click='goToEventPage'>kembali ke pilih tiket</a> </div> </div> </div> </div> </div> </div>",methods:{closeModal:function(){return this.$emit("close")},goToEventPage:function(){return this.$router.push({name:"events"})}}},("undefined"!=typeof exports&&null!==exports?exports:this).EventBookingFail=t}.call(this),function(){var t;t={template:"<div class='o-layout__item u-4of12 u-pad-bottom--3 u-pad-left--5'> <div class='c-card u-bg--white u-overflow-hidden'> <div class='c-card__head u-border--bottom'> <a class='u-block' href='#' @click.prevent='showDetail'> <img :src='eventDetail.image_url' :title='eventDetail.name' :alt='eventDetail.name'> </a> <div class='c-card__head-badge' style='right: 0; left: 6px' v-if='lowestPriceSector.discount'> <div class='c-badge c-badge--large c-badge--pink'> <div class='c-badge__content u-txt--bold'>{{ lowestPriceSector.discount }}%</div> </div> </div> </div> <div class='c-card__body u-pad-top--0 u-pad-left--3 u-pad-right--1'> <div class='c-product-description'> <div class='u-mrgn-bottom--1 u-mrgn-top--3 u-height--42 u-overflow-hidden u-clearfix'> <div class='u-float-left u-8of12'> <a class='c-product__name u-txt--no-decoration u-line-height--20' href='#' @click='showDetail'> {{ eventDetail.name }} </a> </div> <div class='u-float-right u-2of12 u-border-left--1--sand-dark u-align-center u-pointer' @click='showDetail'> <div class='u-txt--upcase u-inline-block u-fg--ash u-txt--tiny'> {{ eventDate.month }} <span class='u-fg--black u-block u-txt--fair'> {{ eventDate.date }} </span> </div> </div> </div> <span class='u-fg--ash-dark u-txt--small'>{{ eventDetail.venue_name }}, {{ eventDetail.venue_city }}</span> <div class='c-product-price u-mrgn-bottom--2 u-mrgn-top--4 u-txt--bold'> <span class='u-pointer' @click='showDetail' v-if='lowestPriceSector.price > 0'> Mulai <span v-if='!lowestPriceSector.discount'>{{ lowestPriceSector.price | monefy }}</span> <span class='u-txt-price' v-else> <span class='u-txt-price--discounted'>{{ lowestPriceSector.discounted_price | monefy }}</span> <span class='u-txt-price--original u-txt--normal'>{{ lowestPriceSector.price | monefy }}</span> </span> </span> <div class='u-pointer c-label c-label--pink' @click='showDetail' v-else>Gratis</div> </div> </div> </div> </div> </div>",props:["eventDetail"],computed:{eventDate:function(){var t;return t=DateHelper.humanizeTimestamp(this.eventDetail.start_at,"%dd% %mmm% %month% %yyyy%").split(" "),{date:t[0],month:t[1],longMonth:t[2],year:t[3]}},lowestPriceSector:function(){return this.eventDetail.sectors.sort(function(t,e){return t.discounted_price-e.discounted_price})[0]}},methods:{showDetail:function(){return this.$emit("showDetail",this.eventDetail.id)}},filters:{monefy:function(t){return t.BLMonefy()}}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketEventCard=t}.call(this),function(){var t;t={template:"<div class='c-empty-box c-empty-box--no-list'> <div class='c-empty-box__inner'> <div class='c-empty-box__illustration'></div> <p class='c-empty-box__title'>Saat Ini Tiket Event Tidak Tersedia.</p> </div> </div>"},("undefined"!=typeof exports&&null!==exports?exports:this).NoEventTicketEvents=t}.call(this),function(){var t;t={template:"<div> <template v-if='eventList.length'> <div class='u-txt--large o-layout__item u-12of12 u-pad-v--4 u-align-center u-txt--bold u-mrgn-top--3'> Event untuk kamu </div> <div class='o-layout o-layout--responsive u-mrgn-bottom--4'> <template v-for='(event, index) in eventList'> <div :class='qaSelector(index)'> <event-ticket-card @showDetail='showDetail' :eventDetail='event'></event-ticket-card> </div> </template> </div> </template> <template v-else> <no-events></no-events> </template> </div>",computed:{eventList:function(){return this.$store.getters.eventList}},components:{"event-ticket-card":EventTicketEventCard,"no-events":NoEventTicketEvents},methods:{qaSelector:function(t){return"qa-event-card-"+t},showDetail:function(t){return this.$store.commit("setSelectedEventId",t),this.$router.push({name:"event",params:{id:t}})}}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketEvents=t}.call(this),function(){var t;t={template:"<div> <div class='mfp-bg mfp-ready'></div> <div class='mfp-wrap mfp-auto-cursor mfp-ready' tabindex='-1' style='overflow-x: hidden; overflow-y: auto;'> <div class='mfp-container mfp-s-ready mfp-inline-holder'> <div class='mfp-content'> <div class='c-modal c-modal--large'> <div class='c-modal__head'> <strong>Sektor {{ event.venue_name }}</strong> <span class='u-display-inline-block u-float-right c-icon c-icon--close c-icon--medium u-fg--ash-dark u-pointer' @click='close'></span> </div> <div class='c-modal__content o-box u-pad--7'> <img :src='event.layout_url'> </div> </div> </div> </div> </div> </div>",computed:{event:function(){return this.$store.getters.selectedEvent}},methods:{close:function(){return this.$emit("close")}}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketSectorPreview=t}.call(this),function(){var t;t={template:"<div class='u-clearfix u-pad-v--3 u-border--bottom'> <div class='o-layout__item u-7of12 u-pad--0 u-fg--ash-dark'> {{ sector.name }} <template v-if='sector.remaining_stock <= 10'> (Sisa {{ ticket.remaining_stock }}) </template> <span class='u-block u-fg--black' v-if='sector.price'> <span class='u-block u-fg--black' v-if='!sector.discount'> {{ sector.price | monefy }} </span> <div class='u-txt-price' v-else> <span class='u-txt-price--discounted'>{{ sector.discounted_price | monefy }}</span> <span class='u-txt-price--original u-txt--normal'>{{ sector.price | monefy }}</span> </div> </span> <div class='u-txt--bold u-fg--red-brand' v-else>Gratis</div> </div> <div class='o-layout__item u-5of12 u-pad--0 c-inp-grp-table u-float-right u-pad-left--3'> <div class='c-inp__btn'> <button :disabled='disabled || count === 0' class='c-btn u-pad-h--2' type='button' @click.prevent='removeTicket'>-</button> </div> <input class='c-inp u-align-center u-pad--0' placeholder='0' @keypress='checkNumeric' :disabled='disabled' v-model.number='count'> <div class='c-inp__btn'> <button :disabled='disabled || ticket.remaining_stock === 0' class='c-btn u-pad-h--2' type='button' @click.prevent='addTicket'>+</button> </div> </div> </div>",props:{sector:{type:Object,"default":function(){return{}}},ticketCounterStep:{type:Number,"default":1},otherSectors:{type:Array}},data:function(){return{disabled:!1}},computed:{selectedEvent:function(){return this.$store.getters.selectedEvent},selectedTickets:function(){return this.$store.getters.selectedTickets},ticket:function(){return this.$store.getters.selectedTickets[String(this.sector.id)]},selectedShowing:{get:function(){return this.$store.getters.selectedShowing}},totalTicket:function(){var t,e,n,i;if(i=0,Object.keys(this.selectedTickets).length>0){e=this.selectedTickets;for(t in e)n=e[t],i+=n.count}return i},count:{get:function(){return this.ticket.count},set:function(t){var e,n;return n=String(this.sector.id),0>t&&(t=0),e=this.selectedEvent.limit_per_transaction,e>this.ticket.initial_remaining_stock&&(e=this.ticket.initial_remaining_stock),0===this.ticket.initial_remaining_stock?this.ticket.count=0:t>e?this.ticket.count=e:this.ticket.count=t,this.ticket.count>=1?(this.$emit("selectedSector",this.sector.id),this.$store.commit("setSelectedSector",this.sector)):(this.$emit("resetSector"),this.$store.commit("setSelectedSector",null)),this.ticket.remaining_stock=this.ticket.initial_remaining_stock-this.ticket.count,this.$store.commit("updateSelectedTickets",{sectorId:n,selectedTicket:this.ticket})}}},methods:{enable:function(){return this.disabled=!1},disable:function(){return this.disabled=!0},addTicket:function(){return this.count+=this.ticketCounterStep},removeTicket:function(){return this.count-=this.ticketCounterStep},checkNumeric:function(t){return 8!==t.which&&0!==t.which&&(t.which<48||t.which>57)?void t.preventDefault():!0}}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketChooseSector=t}.call(this),function(){var t;t={template:"<div class='o-layout__item u-4of12'> <div class='c-panel c-panel--light'> <div class='c-panel__head u-pad--0'> <div class='u-pad--4 u-pad-bottom--3'> <div class='u-inline-block'> <strong class='u-txt--fair u-block'> Pilih Tiket </strong> <span class='u-txt--small u-fg--ash'> Maks. {{ selectedEvent.limit_per_transaction }} Tiket </span> </div> <a class='u-float-right u-pad-top--2' @click.prevent='openPreview'> Lihat sektor </a> </div> <div class='o-layout u-border-top--1--sand-dark u-mrgn-h--0 u-pad-right--4 u-pad-v--3'> <div class='o-layout__item'> <span>Pilih Acara</span> </div> <div class='o-layout__item'> <select v-model='selectedShowing'> <option v-for='showing in selectedEvent.showings' :value='showing'>{{showing.name}}</option> </select> </div> </div> </div> <div class='c-panel__body u-pad-h--4 u-pad-v--0 u-bg--sand-light u-height--274 u-overflow-y--scroll u-border-top--1--sand-dark'> <template v-if='selectedShowing'> <choose-sector ref='sectors' v-for='sector in selectedShowing.sectors' :key='sector.id' :sector='sector' :ticket-counter-step='ticketCounterStep' :other-sectors='getOtherSectors(sector)' @selectedSector='disableOtherSectors' @resetSector='enableAllSectors' /> </template> </div> <div class='c-panel__footer'> <span class='u-fg--ash-dark u-inline-block'> Total <strong class='u-txt--medium u-block u-fg--black'> {{ totalPurchase | monefy }} </strong> </span> <button class='c-btn c-btn--red c-btn--large u-float-right u-pad-h--8' @click='buy' :disabled='totalTicket == 0'>Beli</button> </div> </div> <sector-preview v-if='showPreview' @close='closePreview'></sector-preview> </div>",components:{"sector-preview":EventTicketSectorPreview,"choose-sector":EventTicketChooseSector},props:{ticketCounterStep:{type:Number,"default":1}},data:function(){return{showPreview:!1}},computed:{selectedEvent:function(){return this.$store.getters.selectedEvent},selectedTickets:function(){return this.$store.getters.selectedTickets},selectedShowing:{get:function(){return this.$store.getters.selectedShowing},set:function(t){return this.chooseShowing(t)}},totalPurchase:function(){var t,e,n,i;if(i=0,Object.keys(this.selectedTickets).length>0){e=this.selectedTickets;for(t in e)n=e[t],i+=n.count*n.discounted_price}return i},totalTicket:function(){var t,e,n,i;if(i=0,Object.keys(this.selectedTickets).length>0){e=this.selectedTickets;for(t in e)n=e[t],i+=n.count}return i},isLoading:function(){return this.$store.getters.isLoading}},methods:{getSectorComponents:function(){return this.$refs.sectors||[]},getOtherSectors:function(t){return this.getSectorComponents().filter(function(e){return e.sector.id!==t.id})},buy:function(){return this.$emit("buy",this.selectedTickets)},chooseShowing:function(t){return this.$store.commit("setSelectedShowing",t),this.$store.dispatch("setSelectedTickets"),this.selectedShowing.sectors.forEach(function(t){return Vue.set(t,"enabled",!0)})},openPreview:function(){return this.showPreview=!0},closePreview:function(){return this.showPreview=!1},disableOtherSectors:function(t){return this.getSectorComponents().filter(function(e){return e.sector.id!==t}).forEach(function(t){return t.disable()})},enableAllSectors:function(){return this.getSectorComponents().forEach(function(t){return t.enable()})}},watch:{selectedEvent:function(t){return t&&t.showings.length?this.selectedShowing=t.showings[0]:void 0},selectedShowing:function(){return this.enableAllSectors()}},beforeCreate:function(){return this.$store.commit("setSelectedShowing",{})},mounted:function(){return this.selectedEvent.showings.length>0?this.selectedShowing=this.selectedEvent.showings[0]:void 0}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketChooseTicket=t}.call(this),function(){var t;t={template:"<div class='o-container o-container--guide o-container--responsive'> <div class='o-layout o-layout--responsive u-mrgn-v--3' v-if='!isSelectedEventExisted'> <div class='o-layout__item u-8of12 u-pad-right--2'> <div class='c-panel c-panel--light'> <div class='c-panel__head u-pad--2'> <div class='u-position-absolute u-mrgn-top--2 u-mrgn-left--2' v-if='eventDiscount'> <div class='c-badge c-badge--large c-badge--pink'> <div class='c-badge__content u-txt--bold'>{{ eventDiscount }}%</div> </div> </div> <img :src='selectedEvent.image_url' :alt='selectedEvent.name'> <div class='clearfix u-mrgn-top--4 u-mrgn-bottom--2 u-pad-left--3'> <div class='o-layout__item u-1of12 u-pad--0 u-align-left u-border-right--1--sand-dark'> <div class='u-txt--upcase u-inline-block u-txt--small u-align-center'> {{ eventDate.month }} <span class='u-block u-txt--medium'> {{ eventDate.date }} </span> </div> </div> <div class='o-layout__item u-9of12'> <div class='c-panel__title u-txt--medium u-txt--normal'> {{ selectedEvent.name }} </div> <ul class='o-list o-list-inline u-fg--ash-dark u-txt--small u-mrgn-top--2'> <li class='o-list__item u-mrgn-right--1'> <div class='c-icon c-icon--small c-icon--location u-inline-block u-mrgn-right--1 u-fg--ash'></div> {{ selectedEvent.venue_name }}, {{ selectedEvent.venue_city }} </li> <li class='o-list__item'> <div class='c-icon c-icon--small c-icon--time u-inline-block u-mrgn-right--1 u-fg--ash'></div> {{ eventTime.startAt }} - {{ eventTime.endAt }} </li> </ul> </div> </div> </div> <div class='c-panel__body u-pad-h--5'> <div class='u-txt--bold'> Deskripsi </div> <p v-html='description' class='u-mrgn-top--2 u-mrgn-bottom--1 u-fg--ash-dark u-overflow-hidden' :style='descStyle'> </p> <a class='u-block' href='#' @click.prevent='toggleDesc'> {{ showDesc ? 'Lihat Ringkasan' : 'Lihat Selengkapnya' }} </a> </div> </div> </div> <event-ticket-choose-ticket @buy='buy' v-if='!isSelectedEventExisted'></event-ticket-choose-ticket> </div> </div>",components:{"event-ticket-choose-ticket":EventTicketChooseTicket},data:function(){return{showDesc:!1,converter:null}},computed:{descStyle:function(){return this.showDesc?void 0:{maxHeight:"56px"}},selectedEvent:function(){return this.$store.getters.selectedEvent},isSelectedEventExisted:function(){return this.$store.getters.isSelectedEventExisted},eventDiscount:function(){return this.selectedEvent.sectors?this.selectedEvent.sectors.map(function(t){return t.discount}).sort(function(t,e){return e-t})[0]:0},eventDate:function(){var t;return t=DateHelper.humanizeTimestamp(this.selectedEvent.start_at,"%dd% %mmm% %month% %yyyy%").split(" "),{date:t[0],month:t[1],longMonth:t[2],year:t[3]}},eventTime:function(){var t;return t="%hh%:%mi%",{startAt:DateHelper.humanizeTimestamp(this.selectedEvent.start_at,t),endAt:DateHelper.humanizeTimestamp(this.selectedEvent.end_at,t)}},description:function(){return filterXSS(this.converter.makeHtml(this.selectedEvent.description))}},methods:{buy:function(t){return this.$store.commit("setSelectedTickets",t),this.$router.push({name:"booking",params:{id:this.selectedEvent.id}})},goToLandingPage:function(){return this.$router.push({name:"events"})},toggleDesc:function(){return this.showDesc=!this.showDesc},markdown:function(t){return this.converter.makeHtml(t)}},beforeMount:function(){var t;return t=this,this.converter=new showdown.Converter,this.$store.commit("setSelectedEventId",this.$route.params.id),window.EventTicketRequestPromise?window.EventTicketRequestPromise.then(function(){return Object.keys(t.selectedEvent).length?t.$store.dispatch("setSelectedTickets"):t.goToLandingPage()}):void 0}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketEventDetail=t}.call(this),function(){var t;t={template:"<div v-show='show'> <div class='mfp-bg mfp-ready'></div> <div class='mfp-wrap mfp-auto-cursor mfp-ready' tabindex='-1' style='overflow-x: hidden; overflow-y: auto;'> <div class='mfp-container mfp-s-ready mfp-inline-holder'> <div class='mfp-content'> <div class='c-modal c-modal--medium' style='width: 490px'> <div class='c-modal__content'> <img class='u-width-2of4' src='/images/virtual_product/ILL-KAI-bataltransaksi@2x.png' style='display: block; margin: auto;'> <div class='u-align-center'> <div class='u-txt--bold u-txt--medium u-mrgn-bottom--2'> Batal Transaksi </div> <div class='u-fg--ash-dark'> <p>Apakah kamu yakin untuk membatalkan transaksi ini?</p> </div> </div> <div class='u-clearfix u-pad-top--2'> <div class='o-layout'> <div class='o-layout__item u-6of12'> <a class='c-btn c-btn--block' v-on:click='backToBuyerForm'> Batalkan Transaksi </a> </div> <div class='o-layout__item u-6of12'> <a class='c-btn c-btn--block c-btn--red' @click='continueTransaction'> Lanjutkan Transaksi </a> </div> </div> </div> </div> </div> </div> </div> </div> </div>",props:{show:{type:Boolean,"default":!1}},methods:{backToBuyerForm:function(){var t;return t=this,this.$store.dispatch("cancelTransaction").then(function(){return t.$store.dispatch("removeTransactionId")}).then(function(){return t.$emit("cancelled")})},continueTransaction:function(){return this.$emit("update:show",!1)}}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketCancelBooking=t}.call(this),function(){var t;t={template:"<focus-page :has-seating='true' current-step='pilih-kursi'> <div v-if='isLoadingDone' class='o-layout o-layout--responsive'> <div class='o-layout__item u-4of12'> <div class='u-width-1 u-position-relative'> <div class='c-panel c-panel--light u-height-1 u-position-relative u-bg--sand'> <div class='c-panel__head u-pad--0'> <div class='o-layout u-pad--3'> <div class='o-layout__item'> <a href='#' @click.prevent='cancel' class='u-txt--no-decoration'> <div class='u-inline-block u-valign-middle u-fg--ash'> <i class='c-icon c-icon--medium c-icon--arrow-backward'></i> </div> <div class='u-inline-block u-valign-middle'> <span class='u-txt--small u-block u-fg--ash-dark'>Pilih</span> <strong class='u-txt--fair u-block u-txt--bold u-fg--black'>Sub Sektor</strong> </div> </a> </div> </div> </div> <div class='c-panel__body u-pad--0 u-overflow-y--scroll u-bg--sand-light' style='height: calc(100vh - 120px);'> <ul class='c-list-ui u-pad--3 u-pad-v--0'> <li class='c-list-ui__item u-pad--3 u-bg--white u-border--all u-mrgn-v--3' v-for='subsection in subsections'> <div class='o-layout' style='display: flex; align-items: center;'> <div class='o-layout__item u-9of12 u-txt--fair u-fg--black'> {{subsection.name}} - {{subsection.info}} <span class='u-txt--small u-block u-fg--ash-dark'>Sisa {{subsection.available_seats}} kursi</span> </div> <div class='o-layout__item u-3of12 u-pad-left--0 u-align-right'> <button class='c-btn c-btn--red c-btn--small' @click='toSubsectionPage(subsection)'>Pilih</button> </div> </div> </li> </ul> </div> </div> </div> </div> <div class='o-layout__item u-8of12'> <div class='u-width-1'> <div class='u-align-right u-mrgn-bottom--2'> <div class='u-inline-block u-mrgn-right--5 u-mrgn-top--4'> <button class='c-btn c-btn--square u-border--circle u-display-block u-mrgn-v--1' @click='zoomImg(0.1)' :disabled='zoomInDisabled'> <i class='c-btn__icon c-icon c-icon--add'></i> </button> <button class='c-btn c-btn--square u-border--circle u-display-block' @click='zoomImg(-0.1)' :disabled='zoomOutDisabled'> <i class='c-btn__icon c-icon c-icon--remove'></i> </button> </div> </div> <div class='u-overflow-auto u-pad--4'> <div class='u-position-relative' :style='handleTransform' style='transform-origin: top center; min-height: 72vh;' > <img class='u-display-block u-mrgn-h--auto' :src='sector.layout_url' style='max-width: 640px;'> </div> </div> </div> </div> </div> <cancel-booking :show.sync='showCancelPopup' @cancelled='backToDetail' /> </focus-page>",components:{FocusPage:EventTicketFocusPage,CancelBooking:EventTicketCancelBooking},data:function(){return{sector:{},zoomLevel:1,zoomInDisabled:!1,zoomOutDisabled:!1,isLoadingDone:!1,showCancelPopup:!1,cancelled:!1}},computed:{subsections:function(){return this.sector.sections.map(function(t){var e;return e=t.id,t.subsections.map(function(t){return t.section_id=e,t})}).reduce(function(t,e){return t.concat(e,[])})},handleTransform:function(){return"transform: scale("+this.zoomLevel+")"},selectedTickets:function(){var t;return t=Object.keys(this.$store.getters.selectedTickets),t.filter(function(t){return function(e){return t.$store.getters.selectedTickets[e].count>0}}(this))},selectedSubsection:function(){return this.$store.getters.selectedSubsection}},beforeRouteEnter:function(t,e,n){var i,a;return i=t.params.id,a=t.params.sectorId,window.BLSecureClient.api["interface"].eventTicket.getSectors(a).then(function(t){var e;return e=t.data,n(function(t){return t.setSubsections(i,e)})})},beforeMount:function(){return this.$store.dispatch("retrieveDataFromStorage")},beforeRouteLeave:function(t,e,n){return"chooseSeat"===t.name?void n():(this.cancelled?this.$store.dispatch("resetContact"):this.showCancelPopup=!0,n(this.cancelled))},methods:{cancel:function(){return this.showCancelPopup=!0},backToDetail:function(){return this.cancelled=!0,this.$store.dispatch("removeDataFromStorage"),this.$router.push({name:"event",params:{id:this.$route.params.id}})},zoomImg:function(t){return this.zoomLevel+=t,this.zoomOutDisabled=!1,this.zoomInDisabled=!1,this.zoomLevel>1.5?(this.zoomInDisabled=!0,this.zoomOutDisabled=!1):this.zoomLevel<.6?(this.zoomOutDisabled=!0,this.zoomInDisabled=!1):void 0},setSubsections:function(t,e){return this.$store.commit("setSelectedEventId",t),this.sector=e,this.isLoadingDone=!0},toSubsectionPage:function(t){return this.$store.commit("setSelectedSubsection",t),this.$store.dispatch("saveDataToStorage"),this.$router.push({name:"chooseSeat"})}}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketChooseSubSectionForm=t}.call(this),function(){var t;t={template:"<div> <div class='u-position-absolute u-fg--ash-dark' v-if='isRowLabel' :style='position' style='width: 75px'> <div class='u-align-right'> Row {{ seat.seat.seat_row }} </div> </div> <div v-else class='c-seat' :class='seatStatus' :style='position' @click='selectSeat'> <div class='c-seat__tooltip' style='width: 18px; height: 18px; left: 50%;'> <div class='c-tooltip c-tooltip--top u-txt--nowrap' style='top: -40px; transform: translateX(-50%);'> <div class='c-tooltip__pointer'></div> <div class='c-tooltip__content u-pad--1 u-align-center'> {{ seat.seat.seat_row }} - {{ seat.seat.seat_column }} </div> </div> </div> </div> </div>",props:{seat:{type:Object,"default":function(){return{}}},gapPerSeat:{type:Number,"default":0},remainingTickets:{type:Number,"default":0}},computed:{position:function(){var t,e,n,i;return e=this.seat.seat,n=e.x,i=e.y,t=e.label,"row"===t?n-=62:n=n/25*25,{left:n+"px",top:i+"px"}},seatStatus:function(){var t;return t=this.seat.state,"c-seat--"+t},isRowLabel:function(){return"row"===this.seat.seat.label}},methods:{selectSeat:function(){if(["disabled","paid","booked"].includes(this.seat.state))return!1;if("empty"===this.seat.state){if(0===this.remainingTickets)return;return this.seat.state="selected",this.$emit("selected",this.seat)}return this.seat.state="empty",this.$emit("removed",this.seat)}}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketSeat=t}.call(this),function(){var t;t={template:"<div class='o-layout o-layout--responsive'> <div class='o-layout__item u-4of12'> <div class='u-width-1 u-position-relative'> <div class='c-panel c-panel--light u-height-1 u-position-relative u-bg--sand'> <div class='c-panel__head u-pad--0'> <div class='o-layout u-pad--3'> <div class='o-layout__item'> <a href='#' @click.prevent='backToSubsection' class='u-txt--no-decoration'> <div class='u-inline-block u-valign-middle u-fg--ash'> <i class='c-icon c-icon--medium c-icon--arrow-backward'></i> </div> <div class='u-inline-block u-valign-middle'> <span class='u-txt--small u-block u-fg--ash-dark'>Pilih</span> <strong class='u-txt--fair u-block u-txt--bold u-fg--black'>Kursi</strong> </div> </a> </div> </div> </div> <div class='c-panel__body u-pad--0 u-overflow-y--scroll u-bg--sand-light' style='height: calc(100vh - 192px)'> <ul class='c-list-ui u-pad--3 u-pad-v--0' v-if='hasSelectedSeat'> <li class='c-list-ui__item u-pad--3 u-bg--white u-border--all u-mrgn-v--3' v-for='item in selectedSeat'> <div class='o-layout' style='display: flex; align-items: center;'> <div class='o-layout__item u-8of12 u-txt--fair u-fg--black'> Row {{item.seat.seat_row}} - {{item.seat.seat_column}} <span class='u-txt--small u-block u-fg--ash-dark'>{{ price | monefy }}</span> </div> <div class='o-layout__item u-4of12 u-align-right'> <button class='c-btn c-btn--small' @click='removeSeat(item)'>Hapus</button> </div> </div> </li> </ul> <div class='u-position-absolute u-position-center u-align-center' v-else> <p class='u-fg--ash-dark'>Pilih kursimu melalui</br>peta di samping</p> </div> </div> <div class='c-panel__footer u-bg--white'> <div style='bottom: 0; display: flex; align-items: center;'> <span class='u-fg--ash-dark u-txt--small u-inline-block'> Total <strong class='u-txt--fair u-block u-fg--black'> {{ totalPrice | monefy }} </strong> </span> <button :disabled='!hasAllSeatSelected' class='c-btn c-btn--red u-txt--small c-btn--small' style='margin-left: auto;' @click='bookSeating'>Lanjut</button> </div> </div> </div> </div> </div> <div class='o-layout__item u-8of12 u-overflow-hidden'> <div class='u-align-right u-mrgn-top--4 u-mrgn-right--5 u-position-absolute' style='z-index: 10; right: 0'> <div class='u-inline-block'> <button class='c-btn c-btn--square u-border--circle u-display-block u-mrgn-v--1' @click='zoomImg(0.1)' :disabled='zoomInDisabled'> <i class='c-btn__icon c-icon c-icon--add'></i> </button> <button class='c-btn c-btn--square u-border--circle u-display-block' @click='zoomImg(-0.1)' :disabled='zoomOutDisabled'> <i class='c-btn__icon c-icon c-icon--remove'></i> </button> </div> </div> <div class='u-width-1 u-position-relative'> <div class='u-overflow-auto u-pad--7' @mousedown.prevent='dragStart' @mousemove='doDrag' @mouseup='dragEnd' @mouseleave='dragEnd' style='cursor: move; height: calc(100vh - 230px); margin-top: 110px;'> <div class='u-position-relative' :style='handleTransform' style='transform-origin: top left;'> <seat v-for='(item, idx) in seatings' :key='idx' :seat='item' :gap-per-seat='gapPerSeat' :remaining-tickets='totalTicketLimit' @selected='selectSeat' @removed='removeSeat' /> </div> </div> </div> </div> </div>",components:{Seat:EventTicketSeat},props:{seatings:{type:Array,"default":function(){return[]}},gapPerSeat:{type:Number,"default":0}},data:function(){return{zoomLevel:1,zoomInDisabled:!1,zoomOutDisabled:!1,dragging:!1,x:0,startX:0,lastX:0,y:0,startY:0,lastY:0,dragValueX:0,seatLimit:3,seatSelected:0,selectedSeat:[],selectedSeatObjects:{}}},computed:{handleTransform:function(){return"transform: translate("+this.x+"px, "+this.y+"px) scale("+this.zoomLevel+")"},hasSelectedSeat:function(){return this.selectedSeat.length>0},hasAllSeatSelected:function(){return this.selectedSeat.length===this.totalTickets},totalTickets:function(){var t;return t=this.$store.getters.selectedSector.id,this.$store.getters.selectedTickets[""+t].count},totalTicketLimit:function(){var t;return t=this.$store.getters.selectedSector.id,this.$store.getters.selectedTickets[""+t].count-this.selectedSeat.length},payload:function(){var t,e;return e=this.$store.getters.transactionId,t=this.$store.getters.selectedSector.id,{transaction_id:e,seatings:this.selectedSeat.map(function(e){var n;return n=e.seat.id,{seat_id:n,sector_id:t}})}},totalPrice:function(){return this.selectedSeat.length*this.$store.getters.selectedSector.discounted_price},price:function(){return this.$store.getters.selectedSector.discounted_price}},beforeMount:function(){return this.$store.dispatch("retrieveDataFromStorage")},methods:{filterNull:function(t){return t.filter(function(t){return null===t})},filteredSelectedSeat:function(){return this.filterNull(Object.values(this.selectedSeat))},dragStart:function(t){return this.dragging=!0,this.startX=t.pageX-this.lastX,this.startY=t.pageY-this.lastY},doDrag:function(t){var e;return e=t.target,this.dragging?(this.dragValueX=t.pageX-this.startX,this.dragValueY=t.pageY-this.startY,isNaN(this.dragValueY)&&(this.dragValueX=0),isNaN(this.dragValueY)&&(this.dragValueY=0),this.x=this.dragValueX,this.y=this.dragValueY):void 0},dragEnd:function(t){return this.dragging=!1,this.lastX=this.dragValueX,this.lastY=this.dragValueY},selectSeat:function(t){return this.selectedSeatObjects[t.seat.id]=t,this.updateSelectedSeat()},removeSeat:function(t){var e;return e=t.seat,this.selectedSeatObjects[e.id].state="empty",this.selectedSeatObjects[e.id]=null,this.updateSelectedSeat()},updateSelectedSeat:function(){return this.selectedSeat=Object.values(this.selectedSeatObjects).filter(function(t){return null!==t})},zoomImg:function(t){return this.zoomLevel+=t,this.zoomOutDisabled=!1,this.zoomInDisabled=!1,this.zoomLevel>1.5?(this.zoomInDisabled=!0,this.zoomOutDisabled=!1):this.zoomLevel<.6?(this.zoomOutDisabled=!0,this.zoomInDisabled=!1):void 0},backToSubsection:function(){return this.$router.push({name:"chooseSubSection",params:{sectorId:this.$store.getters.selectedSector.id}})},bookSeating:function(){return this.$emit("startBooking"),window.BLSecureClient.api["interface"].eventTicket.bookSeating(this.payload).then(function(t){return function(e){return t.$emit("booked")}}(this))["catch"](function(t){return function(e){return t.$emit("failed",e)}}(this))}}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketSeatings=t}.call(this),function(){var t;t={template:"<focus-page :has-seating='true' current-step='pilih-kursi'> <div v-if='isLoaded'> <seatings :seatings='seatings' :gap-per-seat='gapPerSeat' @startBooking='startBooking' @failed='showBookingError' @booked='createInvoice' /> </div> <invoice-creator ref='invoiceCreator' transaction-type='event-ticket' :transaction-id='transactionId' /> <loading v-show='showLoading'></loading> <booking-fail v-show='showBookingFail' @close='closeBookingFail'></booking-fail> </focus-page>",components:{Loading:EventProgressBooking,BookingFail:EventBookingFail,FocusPage:EventTicketFocusPage,Seatings:EventTicketSeatings,InvoiceCreator:EventTicketInvoiceCreator},data:function(){return{seatings:[],gapPerSeat:0,isLoaded:!1,showLoading:!1,
showBookingFail:!1}},computed:{transactionId:function(){return this.$store.getters.transactionId}},beforeMount:function(){return this.$store.dispatch("retrieveDataFromStorage")},mounted:function(){return this.$store.commit("setSelectedEventId",this.$route.params.id),this.$store.dispatch("getSeatings").then(function(t){return function(e){var n;return n=e.data,t.gapPerSeat=n.gap_per_seat,t.seatings=n.seatings,t.isLoaded=!0}}(this))},methods:{startBooking:function(){return this.showLoading=!0},showBookingError:function(){return this.showLoading=!1,this.showBookingFail=!0},closeBookingFail:function(){return this.showBookingFail=!1},createInvoice:function(){return this.$store.dispatch("removeDataFromStorage"),this.$refs.invoiceCreator.createInvoice()}}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketChooseSeatForm=t}.call(this),function(){var t;t={template:"<focus-page :has-seating='hasSeating' :full-page='false' current-step='isi-data'> <div class='c-notification c-notification--warning u-mrgn-bottom--3 u-pad-left--4 u-pad-right--4'> <div class='o-flag o-flag--tiny'> <div class='o-flag__head'> <span class='c-icon c-icon--info'></span> </div> <div class='o-flag__body'> Pastikan email kamu benar. E-tiket akan dikirimkan ke email  yang kamu daftarkan. </div> </div> </div> <div class='o-layout o-layout--responsive'> <div class='o-layout__item u-7of12'> <div class='c-panel u-mrgn-bottom--4'> <div class='c-panel__head'> <h2 class='c-panel__title'> Isi Data Pemesan </h2> </div> <div class='c-panel__body'> <div class='o-layout'> <div class='o-layout__item u-6of12'> <div :class='{\"c-fld\": true, \"c-fld--error\": errors.has(\"name\")}'> <div class='c-fld__row'> <label class='c-fld__lbl'> Nama Lengkap (Sesuai tanda pengenal) </label> <input class='c-inp' :value='contact.name' @input='setContact($event.target.value, \"name\")' v-validate data-vv-rules='required' data-vv-as='Nama' name='name' type='text'> <div class='c-fld__error'>{{ errors.first('name') }}</div> </div> </div> </div> <div class='o-layout__item u-6of12'> <div class='c-fld'> <div class='c-fld__row'> <label class='c-fld__lbl'> No. Identitas (Opsional) </label> <input class='c-inp' placeholder='KTP/SIM/Passport' :value='contact.identityNumber' @input='setContact($event.target.value, \"identityNumber\")'> </div> </div> </div> </div> <div class='o-layout'> <div class='o-layout__item u-6of12'> <div class='c-fld u-mrgn-bottom--0' :class='{\"c-fld--error\": errors.first(\"email\")}'> <div class='c-fld__row'> <label class='c-fld__lbl'> E-mail </label> <input class='c-inp' :value='contact.email' @input='setContact($event.target.value, \"email\")' v-validate data-vv-rules='required|email' data-vv-as='Email' name='email' type='text'> <div class='c-fld__error'>{{ errors.first('email') }}</div> <div class='c-fld__hint'>Contoh: email@example.com</div> </div> </div> </div> <div class='o-layout__item u-6of12'> <div class='c-fld u-mrgn-bottom--0' :class='{\"c-fld--error\": errors.first(\"phone\")}'> <div class='c-fld__row'> <label class='c-fld__lbl'> No. Telepon </label> <div class='c-inp-grp-table'> <div class='c-inp__ctx u-pad-h--1'>+62</div> <input class='c-inp' :value='contact.phone' v-validate data-vv-rules='required' data-vv-as='No. telepon' name='phone' type='text' @keypress='checkNumeric' @input='setContact($event.target.value, \"phone\")'> </div> <div class='c-fld__error'>{{ errors.first('phone') }}</div> </div> </div> </div> </div> </div> </div> <div class='c-panel u-mrgn-bottom--4'> <div class='c-panel__head'> <div class='c-panel__title'>Ringkasan Pembayaran</div> </div> <div class='c-panel__body'> <div class='u-clearfix u-mrgn-bottom--1' v-for='(ticket, id) in tickets' v-show='ticket.count' :key='id'> <div class='u-float-left'>{{ ticket.count }} x {{ ticket.name }}</div> <div class='u-float-right' v-if='ticket.price'> <div class='u-float-right' v-if='!ticket.discount'>{{ ticket.price | monefy }}</div> <div class='u-float-right u-txt-price' v-else> <span class='u-txt-price--discounted'>{{ ticket.discounted_price | monefy }}</span> <span class='u-txt-price--original u-txt--normal'>{{ ticket.price | monefy }}</span> </div> </div> <div class='u-float-right u-txt--bold u-fg--green' v-else>Gratis</div> </div> <hr class='u-mrgn-top--3 u-mrgn-bottom--3 u-bg--ash-light'> <div class='u-clearfix u-mrgn-bottom--3 u-txt--medium'> <div class='u-float-left'> <span class='u-txt--bold'>Total Harga</span> </div> <div class='u-float-right'> <span class='u-txt-price u-fg--red-brand qa-total-fare'>{{ totalPurchase | monefy }}</span> </div> </div> <button class='c-btn c-btn--block c-btn--red' @click.prevent='beforeBook' :disabled='errors.any()'> {{ cta }} </button> </div> </div> </div> <div class='o-layout__item u-5of12'> <div class='c-panel u-mrgn-bottom--4'> <div class='c-panel__head'> <div class='c-panel__title'>Rincian Event</div> </div> <div class='c-panel__body'> <div class='o-layout o-layout--bleed'> <div class='o-layout__item u-10of12'> <div class='u-txt--fair u-txt--normal'> {{ event.name }} </div> <ul class='o-list u-fg--ash-dark u-txt--small u-mrgn-top--2'> <li class='o-list__item u-mrgn-top--2'> <div class='c-icon c-icon--small c-icon--location u-inline-block u-mrgn-right--1 u-fg--ash'></div> {{ event.venue_name }}, {{ event.venue_city }} </li> <li class='o-list__item u-mrgn-top--2'> <div class='c-icon c-icon--small c-icon--calendar u-inline-block u-mrgn-right--1 u-fg--ash'></div> {{ eventDate }} </li> <li class='o-list__item u-mrgn-top--2'> <div class='c-icon c-icon--small c-icon--time u-inline-block u-mrgn-right--1 u-fg--ash'></div> {{ eventTime.startAt }} - {{ eventTime.endAt }} </li> </ul> </div> <div class='o-layout__item u-2of12 u-align-right'> <img class='c-thumb c-thumb--small' :src='event.image_url'> </div> </div> </div> </div> </div> </div> <form action='/payment/invoices/create' method='post' ref='createInvoiceForm' accept-charset='UTF-8'> <input name='utf8' type='hidden' value='\u2713'> <input type='hidden' name='authenticity_token' :value='authenticityToken'> <input type='hidden' name='transactions[][id]' :value='transactionId'> <input type='hidden' name='transactions[][type]' :value='transactionType'> </form> <loading v-show='showLoading'></loading> <booking-fail v-show='showBookingFail' @close='closeBookingFail'></booking-fail> </focus-page>",components:{loading:EventProgressBooking,"booking-fail":EventBookingFail,"focus-page":EventTicketFocusPage},data:function(){return{transactionType:"event-ticket",transactionId:null,showLoading:!1,showBookingFail:!1,invoice:{id:null,number:null}}},computed:{authenticityToken:function(){return $("meta[name=csrf-token]").attr("content")},contact:function(){return this.$store.getters.contact},tickets:function(){return this.$store.getters.selectedTickets},event:function(){return this.$store.getters.selectedEvent},showing:function(){return this.$store.getters.selectedShowing},bookingPayload:function(){return this.$store.getters.bookingPayload},sector:function(){return this.$store.getters.selectedSector},hasSeating:function(){return this.sector.has_seatings},cta:function(){return this.hasSeating?"Pilih Kursi":"Lanjut Ke Pembayaran"},totalPurchase:function(){var t,e,n,i;i=0,e=this.tickets;for(t in e)n=e[t],i+=n.count*n.discounted_price;return i},eventDate:function(){var t;return t="%dd% %month% %yyyy%",DateHelper.humanizeTimestamp(this.showing.start_at,t)},eventTime:function(){var t;return t="%hh%:%mi%",{startAt:DateHelper.humanizeTimestamp(this.showing.start_at,t),endAt:DateHelper.humanizeTimestamp(this.showing.end_at,t)}},redirectUrl:function(){return"/payment/invoices/"+this.invoice.id}},methods:{setContact:function(t,e){var n;return n=this.contact,n[e]=t,this.$store.commit("setContact",n)},pay:function(t){var e,n,i,a;return i=window.localStorage.getItem("otp_key"),e=window.localStorage.getItem("browser_fp"),n={"Bukalapak-OTP-Device-ID":window.blGlobal.user.tfa_identity},e&&(n["Bukalapak-Device-Fingerprint"]=e),i&&"undefined"!==i?n["Bukalapak-OTP-Key"]=i:t&&(n["Bukalapak-OTP"]=t),a=this,a.$store.dispatch("triggerPayment",{payment_id:a.invoice.number,xhrOptions:{headers:n}}).then(function(t){return window.location.href=a.redirectUrl,window.BLTFA.eventBus.$emit("success",t.meta.otp_key,function(){return window.location.href=a.redirectUrl})})["catch"](function(e){var n;return n=e.errors.map(function(t){return t.code}),-1!==n.indexOf(10101)?t?window.BLTFA.eventBus.$emit("invalidOtp"):window.BLTFA.eventBus.$emit("open"):void 0}).then(function(){return a.showLoading=!1})},createInvoice:function(t){var e,n;return n=this,n.transactionId=t,0===n.totalPurchase?(e={transactions:[{id:n.transactionId,type:n.transactionType}],payment_type:"wallet"},n.$store.dispatch("createInvoice",e).then(function(t){var e,i;return e=t.data,i=t.meta,n.invoice.id=e.id,n.invoice.number=e.payment_id,n.pay()})):n.$nextTick(function(){return $(this.$refs.createInvoiceForm).submit()})},beforeBook:function(){var t;return t=this,t.invoice.id?window.location.href=t.redirectUrl:this.$validator.validateAll().then(function(e){return e?t.book():void 0})},chooseSeat:function(){return this.showLoading=!0,this.$router.push({name:"chooseSubSection",params:{sectorId:this.sector.id}})},book:function(){var t,e;return e=this,this.$store.dispatch("saveDataToStorage"),this.showLoading=!0,t=this.hasSeating,BLSecureClient.api.authorizeLogin("/tiket-event/"+this.event.id+"/booking").then(function(){return e.$store.dispatch("tokenRequest").then(function(){return e.$store.dispatch("bookingRequest").then(function(n){return t?(e.$store.dispatch("saveTransactionId",n.id),e.chooseSeat()):(e.createInvoice(n.id),e.$store.dispatch("removeDataFromStorage"),e.totalPurchase>0?e.showLoading=!1:void 0)})["catch"](function(t){return console.error(t),e.$store.dispatch("removeDataFromStorage"),e.showLoading=!1,e.showBookingFail=!0})})["catch"](function(t){return console.error(t),e.showLoading=!1,e.showBookingFail=!0})})},autoBook:function(){return this.$store.getters.readyBooking?this.book():void 0},closeBookingFail:function(){return this.showBookingFail=!1},checkNumeric:function(t){return 8!==t.which&&0!==t.which&&(t.which<48||t.which>57)?void t.preventDefault():!0}},beforeMount:function(){return this.$store.dispatch("retrieveDataFromStorage")},mounted:function(){var t;return this.autoBook(),t=this,window.BLTFA.eventBus.$on("sendRequestWithOtp",function(e){return t.pay(e)}),window.BLTFA.eventBus.$on("resendOtp",function(){return t.pay()})}},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketBuyerForm=t}.call(this),function(){}.call(this),function(){var t;"undefined"!=typeof Vuex&&null!==Vuex&&(t=function(){var t;return t=window.BLSecureClient.api["interface"].eventTicket,new Vuex.Store({state:{funnel:"landing_page",storageKey:"event-ticket-data",eventList:[],selectedEventId:null,selectedTickets:{},selectedShowing:{},selectedSector:null,selectedSubsection:null,selectedSeats:[],transactionId:null,token:null,contact:{name:"",phone:"",email:"",identityNumber:""}},mutations:{setEventList:function(t,e){return t.eventList=e},setSelectedEventId:function(t,e){return t.selectedEventId=String(e)},setSelectedTickets:function(t,e){return t.selectedTickets=e},setSelectedShowing:function(t,e){return t.selectedShowing=e},setSelectedSector:function(t,e){return t.selectedSector=e},setSelectedSubsection:function(t,e){return t.selectedSubsection=e},setSelectedSeats:function(t,e){return t.selectedSeats=e},setTransactionId:function(t,e){return t.transactionId=e},updateSelectedTickets:function(t,e){return t.selectedTickets[e.sectorId]=Object.assign({},t.selectedTickets[e.sectorId],e.selectedTicket)},setContact:function(t,e){return t.contact=e},setToken:function(t,e){return t.token=e},setFunnel:function(t,e){return t.funnel=e}},getters:{eventList:function(t){return t.eventList},selectedEventId:function(t){return t.selectedEventId},selectedTickets:function(t){return t.selectedTickets},selectedShowing:function(t){return t.selectedShowing},selectedSector:function(t){return t.selectedSector},selectedSubsection:function(t){return t.selectedSubsection},selectedSeats:function(t){return t.selectedSeats},transactionId:function(t){return t.transactionId},contact:function(t){return t.contact},selectedEvent:function(t){var e,n,i;return e=t.eventList,i=t.selectedEventId,0!==e.length&&null!==i?(n=e.filter(function(t){return String(t.id)===String(i)}),n[0]):{}},isSelectedEventExisted:function(t,e){return Object.keys(e.selectedEvent).length>0,!1},sectorsPayload:function(t,e){var n,i,a,o,r;a=[],o=e.selectedTickets;for(n in o)r=o[n],i={sector_id:parseInt(n,10),quantity:r.count},a.push(i);return a},bookingPayload:function(t,e){return{token:t.token,event_id:parseInt(t.selectedEventId,10),contact_name:t.contact.name,contact_phone:t.contact.phone,contact_email:t.contact.email,contact_identity_number:t.contact.identityNumber,sectors:e.sectorsPayload}},readyBooking:function(t,e){return t.selectedEventId&&""!==t.contact.name&&""!==t.contact.phone&&""!==t.contact.email&&Object.keys(t.selectedTickets).length>0}},actions:{resetContact:function(t){var e;return(e=t.commit)("setContact",{name:"",phone:"",email:"",identityNumber:""})},saveDataToStorage:function(t,e){var n;return null==e&&(e=0),n=JSON.stringify({contact:t.state.contact,token:t.state.token,selectedEventId:t.state.selectedEventId,selectedTickets:t.state.selectedTickets,selectedSector:t.state.selectedSector,selectedSubsection:t.state.selectedSubsection,selectedSeats:t.state.selectedSeats,transactionId:t.state.transactionId,expire_in:e||3600,created_at:(new Date).getTime()}),window.localStorage.setItem(t.state.storageKey,n)},retrieveDataFromStorage:function(t){var e;return e=JSON.parse(window.localStorage.getItem(t.state.storageKey)),e&&new Date(e.created_at+1e3*e.expire_in)>new Date?(t.commit("setToken",e.token),t.commit("setSelectedEventId",e.selectedEventId),t.commit("setContact",e.contact),t.commit("setSelectedTickets",e.selectedTickets),t.commit("setSelectedSector",e.selectedSector),t.commit("setSelectedSubsection",e.selectedSubsection),t.commit("setSelectedSeats",e.selectedSeats),t.commit("setTransactionId",e.transactionId)):void 0},removeDataFromStorage:function(t){return window.localStorage.removeItem(t.state.storageKey)},saveTransactionId:function(t,e){var n,i;return n=t.commit,i=t.dispatch,n("setTransactionId",e),i("saveDataToStorage")},removeTransactionId:function(t){var e,n;return e=t.commit,n=t.dispatch,e("setTransactionId",null)},eventsRequest:function(e,n){return new Promise(function(i,a){return t.getEvents(n).then(function(t){return e.commit("setEventList",t.data),i(t.data)})["catch"](function(t){return a(t)})})},getSeatings:function(t){var e,n,i,a,o;return e=t.commit,a=t.state,i=a.selectedSector.id,n=a.selectedSubsection.section_id,o=a.selectedSubsection.id,window.BLSecureClient.api["interface"].eventTicket.getSeatings(i,n,o)},tokenRequest:function(e){return new Promise(function(n,i){return t.getToken().then(function(t){return e.commit("setToken",t.data.token),n(t.data)})["catch"](function(t){return i(t)})})},bookingRequest:function(e){var n;return n=e.getters.bookingPayload,new Promise(function(e,i){return t.transactions(n).then(function(t){return e(t.data)})["catch"](function(t){return i(t)})})},createInvoice:function(e,n){return new Promise(function(e,i){return t.createInvoice(n).then(function(t){return e(t)})["catch"](function(t){return i(t)})})},triggerPayment:function(e,n){return new Promise(function(e,i){return t.triggerPayment(n.payment_id,n.xhrOptions).then(function(t){return e(t)})["catch"](function(t){return i(t)})})},cancelTransaction:function(e){var n,i;return n=e.dispatch,i=e.state,new Promise(function(e,a){var o;return o=i.transactionId,t.cancellations(o).then(function(t){return n("removeTransactionId"),e(t)})["catch"](function(t){return a(t)})})},setSelectedTickets:function(t){var e,n,i,a,o,r;if(r={},t.getters.selectedShowing&&Object.keys(t.getters.selectedShowing).length>0)for(a=t.getters.selectedShowing.sectors,e=0,i=a.length;i>e;e++)o=a[e],n=String(o.id),r[n]={count:0,name:o.name,remaining_stock:o.remaining_stock,initial_remaining_stock:o.remaining_stock,price:o.price,discount:o.discount,discounted_price:o.discounted_price,enabled:!0};return t.commit("setSelectedTickets",r)}}})},("undefined"!=typeof exports&&null!==exports?exports:this).EventTicketStore=t)}.call(this),function(){var t,e,n,i;e=".js-event-ticket","undefined"!=typeof Vue&&$(e).length>0&&(Vue.use(VeeValidate),i=[{path:"/",component:EventTicketEvents,name:"events"},{path:"/:id",component:EventTicketEventDetail,name:"event"},{path:"/:id/booking",component:EventTicketBuyerForm,name:"booking"},{path:"/:id/sectors/:sectorId",component:EventTicketChooseSubSectionForm,name:"chooseSubSection"},{path:"/:id/seatings",component:EventTicketChooseSeatForm,name:"chooseSeat"}],window.EventTicketRequestPromise=!1,n={routes:i,mode:"history",base:"/tiket-event"},t={el:e,store:EventTicketStore(),router:new VueRouter(n),computed:{eventList:function(){return this.$store.getters.eventList||[]},eventId:function(){return this.$store.getters.selectedEventId}},data:function(){return{resourceLoaded:!1}},beforeMount:function(){var t;return t=this,window.EventTicketRequestPromise=this.$store.dispatch("eventsRequest"),window.EventTicketRequestPromise.then(function(){return t.resourceLoaded=!0})["catch"](function(){return t.resourceLoaded=!0})},watch:{$route:function(){return window.scrollTo(0,0)}}},window.EventTicketApp=new Vue(t)),$(function(){return setTimeout(function(){return window.Turbolinks.history.disable()},500)})}.call(this),function(){}.call(this);var QRCode;!function(){function t(t){this.mode=u.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,n=this.data.length;n>e;e++){var i=[],a=this.data.charCodeAt(e);a>65536?(i[0]=240|(1835008&a)>>>18,i[1]=128|(258048&a)>>>12,i[2]=128|(4032&a)>>>6,i[3]=128|63&a):a>2048?(i[0]=224|(61440&a)>>>12,i[1]=128|(4032&a)>>>6,i[2]=128|63&a):a>128?(i[0]=192|(1984&a)>>>6,i[1]=128|63&a):i[0]=a,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function n(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=new Array(t.length-n+e);for(var i=0;i<t.length-n;i++)this.num[i]=t[i+n]}function i(t,e){this.totalCount=t,this.dataCount=e}function a(){this.buffer=[],this.length=0}function o(){return"undefined"!=typeof CanvasRenderingContext2D}function r(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var n=e.toString().match(/android ([0-9]\.[0-9])/i);n&&n[1]&&(t=parseFloat(n[1]))}return t}function s(t,e){for(var n=1,i=c(t),a=0,o=m.length;o>=a;a++){var r=0;switch(e){case l.L:r=m[a][0];break;case l.M:r=m[a][1];break;case l.Q:r=m[a][2];break;case l.H:r=m[a][3]}if(r>=i)break;n++}if(n>m.length)throw new Error("Too long data");return n}function c(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,n=this.parsedData.length;n>e;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var n=new t(e);this.dataList.push(n),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[i][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,n),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(t,e){for(var n=-1;7>=n;n++)if(!(-1>=t+n||this.moduleCount<=t+n))for(var i=-1;7>=i;i++)-1>=e+i||this.moduleCount<=e+i||(n>=0&&6>=n&&(0==i||6==i)||i>=0&&6>=i&&(0==n||6==n)||n>=2&&4>=n&&i>=2&&4>=i?this.modules[t+n][e+i]=!0:this.modules[t+n][e+i]=!1)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;8>n;n++){this.makeImpl(!0,n);var i=p.getLostPoint(this);(0==n||t>i)&&(t=i,e=n)}return e},createMovieClip:function(t,e,n){var i=t.createEmptyMovieClip(e,n),a=1;this.make();for(var o=0;o<this.modules.length;o++)for(var r=o*a,s=0;s<this.modules[o].length;s++){var c=s*a,u=this.modules[o][s];u&&(i.beginFill(0,100),i.moveTo(c,r),i.lineTo(c+a,r),i.lineTo(c+a,r+a),i.lineTo(c,r+a),i.endFill())}return i},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=p.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var i=t[e],a=t[n];if(null==this.modules[i][a])for(var o=-2;2>=o;o++)for(var r=-2;2>=r;r++)-2==o||2==o||-2==r||2==r||0==o&&0==r?this.modules[i+o][a+r]=!0:this.modules[i+o][a+r]=!1}},setupTypeNumber:function(t){for(var e=p.getBCHTypeNumber(this.typeNumber),n=0;18>n;n++){var i=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(var n=0;18>n;n++){var i=!t&&1==(e>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,i=p.getBCHTypeInfo(n),a=0;15>a;a++){var o=!t&&1==(i>>a&1);6>a?this.modules[a][8]=o:8>a?this.modules[a+1][8]=o:this.modules[this.moduleCount-15+a][8]=o}for(var a=0;15>a;a++){var o=!t&&1==(i>>a&1);8>a?this.modules[8][this.moduleCount-a-1]=o:9>a?this.modules[8][15-a-1+1]=o:this.modules[8][15-a-1]=o}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,i=this.moduleCount-1,a=7,o=0,r=this.moduleCount-1;r>0;r-=2)for(6==r&&r--;;){for(var s=0;2>s;s++)if(null==this.modules[i][r-s]){var c=!1;o<t.length&&(c=1==(t[o]>>>a&1));var u=p.getMask(e,i,r-s);u&&(c=!c),this.modules[i][r-s]=c,a--,-1==a&&(o++,a=7)}if(i+=n,0>i||this.moduleCount<=i){i-=n,n=-n;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,n,o){for(var r=i.getRSBlocks(t,n),s=new a,c=0;c<o.length;c++){var u=o[c];s.put(u.mode,4),s.put(u.getLength(),p.getLengthInBits(u.mode,t)),u.write(s)}for(var l=0,c=0;c<r.length;c++)l+=r[c].dataCount;if(s.getLengthInBits()>8*l)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*l+")");for(s.getLengthInBits()+4<=8*l&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;;){if(s.getLengthInBits()>=8*l)break;if(s.put(e.PAD0,8),s.getLengthInBits()>=8*l)break;s.put(e.PAD1,8)}return e.createBytes(s,r)},e.createBytes=function(t,e){for(var i=0,a=0,o=0,r=new Array(e.length),s=new Array(e.length),c=0;c<e.length;c++){var u=e[c].dataCount,l=e[c].totalCount-u;a=Math.max(a,u),o=Math.max(o,l),r[c]=new Array(u);for(var d=0;d<r[c].length;d++)r[c][d]=255&t.buffer[d+i];i+=u;var h=p.getErrorCorrectPolynomial(l),f=new n(r[c],h.getLength()-1),m=f.mod(h);s[c]=new Array(h.getLength()-1);for(var d=0;d<s[c].length;d++){var v=d+m.getLength()-s[c].length;s[c][d]=v>=0?m.get(v):0}}for(var g=0,d=0;d<e.length;d++)g+=e[d].totalCount;for(var y=new Array(g),b=0,d=0;a>d;d++)for(var c=0;c<e.length;c++)d<r[c].length&&(y[b++]=r[c][d]);for(var d=0;o>d;d++)for(var c=0;c<e.length;c++)d<s[c].length&&(y[b++]=s[c][d]);return y};for(var u={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},l={L:1,M:0,Q:3,H:2},d={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;p.getBCHDigit(e)-p.getBCHDigit(p.G15)>=0;)e^=p.G15<<p.getBCHDigit(e)-p.getBCHDigit(p.G15);return(t<<10|e)^p.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;p.getBCHDigit(e)-p.getBCHDigit(p.G18)>=0;)e^=p.G18<<p.getBCHDigit(e)-p.getBCHDigit(p.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return p.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case d.PATTERN000:return(e+n)%2==0;case d.PATTERN001:return e%2==0;case d.PATTERN010:return n%3==0;case d.PATTERN011:return(e+n)%3==0;case d.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case d.PATTERN101:return e*n%2+e*n%3==0;case d.PATTERN110:return(e*n%2+e*n%3)%2==0;case d.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new n([1],0),i=0;t>i;i++)e=e.multiply(new n([1,h.gexp(i)],0));return e},getLengthInBits:function(t,e){if(e>=1&&10>e)switch(t){case u.MODE_NUMBER:return 10;case u.MODE_ALPHA_NUM:return 9;case u.MODE_8BIT_BYTE:return 8;case u.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(27>e)switch(t){case u.MODE_NUMBER:return 12;case u.MODE_ALPHA_NUM:return 11;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>e))throw new Error("type:"+e);switch(t){case u.MODE_NUMBER:return 14;case u.MODE_ALPHA_NUM:return 13;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,i=0;e>i;i++)for(var a=0;e>a;a++){for(var o=0,r=t.isDark(i,a),s=-1;1>=s;s++)if(!(0>i+s||i+s>=e))for(var c=-1;1>=c;c++)0>a+c||a+c>=e||(0!=s||0!=c)&&r==t.isDark(i+s,a+c)&&o++;o>5&&(n+=3+o-5)}for(var i=0;e-1>i;i++)for(var a=0;e-1>a;a++){var u=0;t.isDark(i,a)&&u++,t.isDark(i+1,a)&&u++,t.isDark(i,a+1)&&u++,t.isDark(i+1,a+1)&&u++,(0==u||4==u)&&(n+=3)}for(var i=0;e>i;i++)for(var a=0;e-6>a;a++)t.isDark(i,a)&&!t.isDark(i,a+1)&&t.isDark(i,a+2)&&t.isDark(i,a+3)&&t.isDark(i,a+4)&&!t.isDark(i,a+5)&&t.isDark(i,a+6)&&(n+=40);for(var a=0;e>a;a++)for(var i=0;e-6>i;i++)t.isDark(i,a)&&!t.isDark(i+1,a)&&t.isDark(i+2,a)&&t.isDark(i+3,a)&&t.isDark(i+4,a)&&!t.isDark(i+5,a)&&t.isDark(i+6,a)&&(n+=40);for(var l=0,a=0;e>a;a++)for(var i=0;e>i;i++)t.isDark(i,a)&&l++;var d=Math.abs(100*l/e/e-50)/5;return n+=10*d}},h={glog:function(t){if(1>t)throw new Error("glog("+t+")");return h.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return h.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},f=0;8>f;f++)h.EXP_TABLE[f]=1<<f;for(var f=8;256>f;f++)h.EXP_TABLE[f]=h.EXP_TABLE[f-4]^h.EXP_TABLE[f-5]^h.EXP_TABLE[f-6]^h.EXP_TABLE[f-8];for(var f=0;255>f;f++)h.LOG_TABLE[h.EXP_TABLE[f]]=f;n.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),i=0;i<this.getLength();i++)for(var a=0;a<t.getLength();a++)e[i+a]^=h.gexp(h.glog(this.get(i))+h.glog(t.get(a)));return new n(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=h.glog(this.get(0))-h.glog(t.get(0)),i=new Array(this.getLength()),a=0;a<this.getLength();a++)i[a]=this.get(a);for(var a=0;a<t.getLength();a++)i[a]^=h.gexp(h.glog(t.get(a))+e);return new n(i,0).mod(t)}},i.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],i.getRSBlocks=function(t,e){var n=i.getRsBlockTable(t,e);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var a=n.length/3,o=[],r=0;a>r;r++)for(var s=n[3*r+0],c=n[3*r+1],u=n[3*r+2],l=0;s>l;l++)o.push(new i(c,u));return o},i.getRsBlockTable=function(t,e){switch(e){case l.L:return i.RS_BLOCK_TABLE[4*(t-1)+0];case l.M:return i.RS_BLOCK_TABLE[4*(t-1)+1];case l.Q:return i.RS_BLOCK_TABLE[4*(t-1)+2];case l.H:return i.RS_BLOCK_TABLE[4*(t-1)+3];default:return void 0}},a.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;e>n;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var m=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],v=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){function e(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);
for(var i in e)e.hasOwnProperty(i)&&n.setAttribute(i,e[i]);return n}var n=this._htOption,i=this._el,a=t.getModuleCount();Math.floor(n.width/a),Math.floor(n.height/a);this.clear();var o=e("svg",{viewBox:"0 0 "+String(a)+" "+String(a),width:"100%",height:"100%",fill:n.colorLight});o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),i.appendChild(o),o.appendChild(e("rect",{fill:n.colorLight,width:"100%",height:"100%"})),o.appendChild(e("rect",{fill:n.colorDark,width:"1",height:"1",id:"template"}));for(var r=0;a>r;r++)for(var s=0;a>s;s++)if(t.isDark(r,s)){var c=e("use",{x:String(s),y:String(r)});c.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),o.appendChild(c)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}(),g="svg"===document.documentElement.tagName.toLowerCase(),y=g?v:o()?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function e(t,e){var n=this;if(n._fFail=e,n._fSuccess=t,null===n._bSupportDataURI){var i=document.createElement("img"),a=function(){n._bSupportDataURI=!1,n._fFail&&n._fFail.call(n)},o=function(){n._bSupportDataURI=!0,n._fSuccess&&n._fSuccess.call(n)};return i.onabort=a,i.onerror=a,i.onload=o,void(i.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}n._bSupportDataURI===!0&&n._fSuccess?n._fSuccess.call(n):n._bSupportDataURI===!1&&n._fFail&&n._fFail.call(n)}if(this._android&&this._android<=2.1){var n=1/window.devicePixelRatio,i=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,e,a,o,r,s,c,u,l){if("nodeName"in t&&/img/i.test(t.nodeName))for(var d=arguments.length-1;d>=1;d--)arguments[d]=arguments[d]*n;else"undefined"==typeof u&&(arguments[1]*=n,arguments[2]*=n,arguments[3]*=n,arguments[4]*=n);i.apply(this,arguments)}}var a=function(t,e){this._bIsPainted=!1,this._android=r(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return a.prototype.draw=function(t){var e=this._elImage,n=this._oContext,i=this._htOption,a=t.getModuleCount(),o=i.width/a,r=i.height/a,s=Math.round(o),c=Math.round(r);e.style.display="none",this.clear();for(var u=0;a>u;u++)for(var l=0;a>l;l++){var d=t.isDark(u,l),p=l*o,h=u*r;n.strokeStyle=d?i.colorDark:i.colorLight,n.lineWidth=1,n.fillStyle=d?i.colorDark:i.colorLight,n.fillRect(p,h,o,r),n.strokeRect(Math.floor(p)+.5,Math.floor(h)+.5,s,c),n.strokeRect(Math.ceil(p)-.5,Math.ceil(h)-.5,s,c)}this._bIsPainted=!0},a.prototype.makeImage=function(){this._bIsPainted&&e.call(this,t)},a.prototype.isPainted=function(){return this._bIsPainted},a.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},a.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},a}():function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,n=this._el,i=t.getModuleCount(),a=Math.floor(e.width/i),o=Math.floor(e.height/i),r=['<table style="border:0;border-collapse:collapse;">'],s=0;i>s;s++){r.push("<tr>");for(var c=0;i>c;c++)r.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+a+"px;height:"+o+"px;background-color:"+(t.isDark(s,c)?e.colorDark:e.colorLight)+';"></td>');r.push("</tr>")}r.push("</table>"),n.innerHTML=r.join("");var u=n.childNodes[0],l=(e.width-u.offsetWidth)/2,d=(e.height-u.offsetHeight)/2;l>0&&d>0&&(u.style.margin=d+"px "+l+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();QRCode=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:l.H},"string"==typeof e&&(e={text:e}),e)for(var n in e)this._htOption[n]=e[n];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(y=v),this._android=r(),this._el=t,this._oQRCode=null,this._oDrawing=new y(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},QRCode.prototype.makeCode=function(t){this._oQRCode=new e(s(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=l}(),Vue.component("coupon-deals-expandable-desc",{template:'\n  <div v-if="description" class="u-fg--charcoal u-txt--small u-line-height--14">\n    <span class="coupon-qty-field__desc">{{ computedDesc }}</span>\n    <a v-if="isPreviewableDesc"\n      href="#"\n      class="u-fg--black u-txt--underline"\n      style="text-decoration-style: dotted !important"\n      @click.prevent="toggleDesc">{{ toggleDescText }}</a>\n  </div>\n  ',props:{description:{type:String,"default":""}},data:function(){return{isPreviewDesc:!0,previewDescLength:120}},computed:{isPreviewableDesc:function(){return this.description.length>this.previewDescLength+20},computedDesc:function(){return this.isPreviewableDesc&&this.isPreviewDesc?this.description.slice(0,this.previewDescLength)+"...":this.description},toggleDescText:function(){return this.isPreviewableDesc&&this.isPreviewDesc?"Selengkapnya":"Lihat lebih sedikit"}},methods:{toggleDesc:function(){this.isPreviewDesc=!this.isPreviewDesc}}}),function(){var t;t={template:"<div> <div v-if='!isPaid'> <div class='o-layout u-mrgn-left--0 u-border--1--sand-dark'> <div class='o-layout__item u-bg--sand-light u-pad-left--0'> <div class='u-12of12 u-display-table-cell u-pad--3'> <div class='u-display-table-cell u-pad-right--2' style='width: 60px;'> <img :alt='transactionObject.merchant.name' class='u-height--46' :src='transactionObject.deal.image.url'> </div> <div class='u-display-table-cell u-valign-middle'> <div class='u-fg--black u-txt--base u-txt--bold'>{{ transactionObject.merchant.name }}</div> </div> </div> </div> </div> <div class='o-layout u-border--1--sand-dark u-mrgn-left--0 u-mrgn-top--2'> <div class='o-layout__item u-pad-left--0'> <div class='u-12of12 u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>NAMA KUPON</div> <div class='u-fg--black u-txt--base u-txt--bold'>{{ transactionObject.deal.name }}</div> <div class='u-fg--ash-dark u-mrgn-bottom--1 u-mrgn-top--3 u-txt--tiny u-txt--upcase'>JENIS KUPON</div> <div v-for='detail in transactionObject.details' class='u-fg--black u-txt--base u-mrgn-bottom--2'> <div class='u-float-left u-width--24'>{{ detail.quantity }}x</div> <div class='u-mrgn-left--4'>{{ detail.sku.name }}</div> </div> </div> </div> </div> </div> <div v-else> <div class='o-layout u-mrgn-left--0 u-border--1--sand-dark u-mrgn-bottom--4'> <div class='o-layout__item u-pad-left--0 u-border-bottom--1--sand-dark'> <div class='o-layout__item u-12of12 u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>NAMA MERCHANT</div> {{ transactionObject.merchant.name }} </div> </div> <div class='o-layout__item u-pad-left--0 u-border-bottom--1--sand-dark'> <div class='o-layout__item u-12of12 u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>NAMA KUPON</div> {{ transactionObject.deal.name }} </div> </div> <div class='o-layout__item u-pad-left--0 u-border-bottom--1--sand-dark'> <div class='o-layout__item u-12of12 u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>STATUS TRANSAKSI</div> {{ state.status }} </div> </div> <div v-if='state.description' class='o-layout__item u-pad-left--0 u-border-bottom--1--sand-dark'> <div class='o-layout__item u-12of12 u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>KETERANGAN</div> {{ state.description }} </div> </div> <div v-if='isSucceeded'> <div class='o-layout__item u-pad-left--0 u-pad-bottom--0 u-border-bottom--1--sand-dark'> <div class='o-layout__item u-6of12 u-pad--3 u-pad-bottom--3 u-border-right--1--sand-dark'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>LOKASI PENUKARAN</div> {{ branch }} </div> <div class='o-layout__item u-6of12 u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>BATAS PENUKARAN</div> <strong>{{ transactionObject.coupons[0].sku.expiry_time | dateFormat }}</strong> </div> </div> <div v-if='isQrType' class='o-layout__item u-pad-left--0 u-bg--sand-light'> <div class='u-12of12 u-pad--3 u-pad-bottom--0'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>CARA MENGGUNAKAN KUPON</div> <ul> <li class='u-mrgn-bottom--1 u-pad--0'>Tunjukkan QR code ini kepada kasir {{ transactionObject.merchant.name }}</li> </ul> </div> <div class='u-12of12 u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>SYARAT DAN KETENTUAN</div> <div v-html='transactionObject.deal.terms_condition'></div> </div> </div> <div v-else-if='isExternalVourcherCodeType' class='o-layout__item u-pad-left--0 u-bg--sand-light'> <div class='u-12of12 u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>SYARAT DAN KETENTUAN</div> <div v-html='transactionObject.deal.terms_condition'></div> </div> </div> <div v-else class='o-layout__item u-pad-left--0 u-bg--sand-light'> <div class='u-12of12 u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>CARA MENGGUNAKAN KUPON</div> <div v-html='transactionObject.deal.terms_condition'></div> </div> </div> </div> <div v-else class='o-layout__item u-pad-left--0 u-border-bottom--1--sand-dark'> <div class='o-layout__item u-12of12 u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>LOKASI PENUKARAN</div> {{ branch }} </div> </div> </div> <div v-if='isSucceeded' class='o-layout u-mrgn-left--0 u-border--1--sand-dark u-border-top--0'> <div class='o-layout__item u-pad-left--0 u-mrgn-bottom--2'> <div class='o-layout__item u-12of12 u-pad--3 u-pad-bottom--1'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>NAMA MERCHANT</div> {{ transactionObject.merchant.name }} </div> </div> <div class='u-pad--3'> <div v-for='coupon in transactionObject.coupons' class='o-layout__item u-pad-left--0 u-mrgn-bottom--4 u-border--1--sand-dark u-border-top--0'> <div class='o-layout__item u-bg--sand-light u-pad-left--0 u-border-bottom--1--sand-dark u-border-top--1--sand-dark'> <div class='u-display-table u-border-collapsed u-width-1'> <div class='u-10of12 u-display-table-cell u-pad--3'> <div class='u-display-table-cell u-pad-right--2' style='width: 60px;'> <img :alt='coupon.name' :src='transactionObject.deal.image.url' class='u-height--46'> </div> <div class='u-display-table-cell u-valign-middle'> <div class='u-fg--black u-txt--base'>{{ coupon.sku.name }}</div> <coupon-deals-expandable-desc :description='coupon.sku.description' /> </div> </div> </div> </div> <div class='js-accordion-item'> <div v-if='isExternalVourcherCodeType' class='o-layout__item u-pad-left--0 u-border-bottom--1--sand-dark'> <div class='u-12of12 u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>KODE KUPON</div> <div class='u-pad-top--2'> <div class='u-float-left u-width--64 '> <img src='/images/virtual_product/coupon_deals/ic_coupon-code.png' /> </div> <div class='' style='margin-left: 80px;'> <p class='u-mrgn-bottom--1'> <span class='u-txt--bold' >{{ coupon.coupon_code }}</span> <span class='u-position-relative'> <a href='#' @click.stop.prevent='copyText(`inp-coupon-id-${coupon.id}`)' class='u-txt--small u-mrgn-left--2'>Salin Kode</a> <div :id='`tooltip-inp-coupon-id-${coupon.id}`' class='c-tooltip c-tooltip--top u-hidden' :style='styleToolTip'> <div class='c-tooltip__pointer'></div> <div class='c-tooltip__content'> <div class='c-tooltip__close' @click='hideToolTip(`inp-coupon-id-${coupon.id}`)'></div> Kode Kupon berhasil disalin </div> </div> </span> <input :id='`inp-coupon-id-${coupon.id}`' type='hidden' :value='coupon.coupon_code' /> </p> <!--<p>Masukkan kode di aplikasi {{ transactionObject.merchant.name }} untuk menggunakan kupon. </p>--> <p>&nbsp;<br></p> </div> </div> </div> </div> <div v-else-if='isExternalUrlType' class='o-layout__item u-pad-left--0 u-border-bottom--1--sand-dark'> <div class='u-12of12 u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>KODE KUPON</div> <div class='u-pad-top--2'> <div class='u-float-left u-width--64 '> <img src='/images/virtual_product/coupon_deals/ic_coupon-code.png' /> </div> <div class='' style='margin-left: 80px;'> <p class='u-mrgn-bottom--1'> <span class='u-txt--bold' >{{ coupon.partner_coupon_id }}</span> </p> <p>Klik tombol Tukar Kupon untuk menggunakan voucher.</p> <a class='c-btn btn--orange' :href='coupon.coupon_code' target='_blank'>Tukar Kupon</a> </div> </div> </div> </div> <div v-else-if='isQrType' class='o-layout__item u-pad-left--0 u-border-bottom--1--sand-dark'> <div class='u-12of12 u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>KODE KUPON</div> <div class='js-voucher-qr-code u-mrgn-bottom--2' /> <div class='u-fg--black u-txt--base u-mrgn-bottom--2 u-txt--bold'> {{ coupon.partner_coupon_id }} </div> <div class='u-fg--black u-txt--base'> Gunakan kupon ini dengan menunjukan QR code di atas pada kasir {{ transactionObject.merchant.name }} </div> </div> </div> <div v-if='!isBurgerKing && !isExternalVourcherCodeType' class='o-layout__item u-pad-left--0'> <div class='u-12of12 u-pad--3'> <div class='u-txt--tiny u-txt--upcase u-fg--ash-dark u-mrgn-bottom--1'>TEMPAT PENUKARAN</div> <div class='u-txt--base'>{{ branch }}</div> </div> </div> </div> </div> </div> </div> </div> </div>",props:{transactionObject:{type:Object,required:!0},toggle:{type:Boolean,"default":!0},paymentMethod:{type:String,"default":""}},filters:{dateFormat:function(t){return null==t&&(t=null),window.DateHelper.humanizeTimestamp(new Date(t),"%dd% %month% %yyyy%")}},data:function(){return{styleToolTip:{position:"absolute",top:"-50px",width:"190px",left:"-55px"}}},computed:{isPaid:function(){return!("pending"===this.transactionObject.state||"expired"===this.transactionObject.state)},isSucceeded:function(){return"succeeded"===(this.transactionObject.state||"").toLowerCase()},period:function(){var t,e;return this.transactionObject.start_bill_period===this.transactionObject.end_bill_period?FullDate(StringToDateObject(this.transactionObject.start_bill_period),!1):(t=this.transactionObject.start_bill_period,e=this.transactionObject.end_bill_period,FormatPeriodDate(t,e))},state:function(){var t,e;switch(e=(this.transactionObject.state||"").toLowerCase(),t="Uang pembayaran dikembalikan ke DANA/Saldo (BukaDompet)","credit_card"===this.paymentMethod&&(t="Uang pembayaran dikembalikan ke limit kartu kredit"),"dana"===this.paymentMethod&&(t="Uang pembayaran dikembalikan ke DANA"),("akulaku"===this.paymentMethod||"kredivo"===this.paymentMethod)&&(t="Uang pembayaran dikembalikan ke limit pinjaman"),e){case"paid":return{status:"Diproses"};case"processed":return{status:"Diproses"};case"succeeded":return{status:"Selesai"};case"cancelled":return{status:"Dibatalkan",description:t};case"failed":return{status:"Dibatalkan",description:t};default:return{status:null}}},branch:function(){return(this.transactionObject.details[0].sku.variants.filter(function(t){return"branch"===t.variant_name})[0]||{}).variant_value},couponType:function(){return((this.transactionObject.coupons||[])[0]||{}).coupon_type},isQrType:function(){return"qr_code"===this.couponType},isExternalVourcherCodeType:function(){return"external_voucher_code"===this.couponType},isBurgerKing:function(){return"PT Sari Burger Indonesia"===this.transactionObject.partner.name},isExternalUrlType:function(){return"external_url"===this.couponType}},methods:{accordion:function(){var t;return t=event.target,t.parentElement.parentElement.parentElement.parentElement.querySelector(".js-accordion-item").classList.toggle("u-hidden"),t.className.includes("c-icon--chevron-up")?(t.classList.remove("c-icon--chevron-up"),t.classList.add("c-icon--chevron-down")):(t.classList.remove("c-icon--chevron-down"),t.classList.add("c-icon--chevron-up"))},copyText:function(t){var e;return e=document.getElementById(t),e.setAttribute("type","text"),e.select(),document.execCommand("copy"),this.showToolTip(t),e.setAttribute("type","hidden"),window.getSelection().removeAllRanges()},showToolTip:function(t){return document.getElementById("tooltip-"+t).classList.remove("u-hidden"),setTimeout(function(){return this.hideToolTip(t)}.bind(this),3e3)},hideToolTip:function(t){return document.getElementById("tooltip-"+t).classList.add("u-hidden")}},mounted:function(){var t,e;return this.isQrType&&this.isPaid?(t=this.transactionObject.coupons,e=document.querySelectorAll(".js-voucher-qr-code"),e.forEach(function(e,n){var i;return i=new QRCode(e,{text:t[n].coupon_code,width:72,height:72})})):void 0}},("undefined"!=typeof exports&&null!==exports?exports:this).CouponDealsTransactionDetail=t}.call(this),function(){var t;t={template:"<div> <div v-show='isShowingDetail'> <dl v-for='detail in transaction.details' class='o-layout u-mrgn-bottom--2'> <dt class='o-layout__item u-8of12'>{{ detail.quantity }}x {{ detail.sku.name }}</dt> <dd class='o-layout__item u-4of12 u-align-right'>{{ detail.total_amount | money }}</dd> </dl> <table class='u-mrgn-top--2 u-12of12'> <tr v-if='discount &gt; 0'> <td class='u-pad-bottom--2'>Diskon</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-voucher-amount'>(-) {{ discount }}</td> </tr> <voucher-dana-invoice :couponAmount='danaCouponAmount' :isPrintMode='false' v-if='danaCouponAmount > 0'/> <tr v-if='checkServiceFee'> <td class='u-pad-bottom--2'>Biaya Layanan</td> <td class='u-pad-bottom--2 u-align-right'>{{ serviceFee.BLMonefy() }}</td> </tr> <tr v-if='uniqCode &gt; 0'> <td class='u-pad-bottom--2'>Kode Unik</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-unique-code'>{{ uniqCode.BLMonefy() }}</td> </tr> <tr v-if='creditsBalanceUsed &gt; 0'> <td class='u-pad-bottom--2'>Potongan Saldo Credits</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-credits-balance-used'>(-) {{ creditsBalanceUsed.BLMonefy() }}</td> </tr> <tr v-if='depositBalanceUsed &gt; 0'> <td class='u-pad-bottom--2'>Potongan Saldo BukaDompet</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-deposit-balance-used'>(-) {{ depositBalanceUsed.BLMonefy() }}</td> </tr> <tr v-if='partnerReductionAmount &gt; 0'> <td class='u-pad-bottom--2'>Saldo DANA</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-partner-reduction-amount'>(-) {{ partnerReductionAmount.BLMonefy() }}</td> </tr> <tr v-if='bufferAmount &gt; 0'> <td class='u-pad-bottom--2'>Pembulatan <span class='c-icon c-icon--help u-pointer' data-autooltip-content='#js-buffer-amount-tooltip-content' data-autooltip-position='bottom' ref='tooltip_trigger'> </span> <div class='u-hidden'> <div id='js-buffer-amount-tooltip-content'> <div class='c-tooltip c-tooltip--bottom' style='width: 255px; left: 18px;'> <div class='c-tooltip__pointer' style='left: 44%'></div> <div class='c-tooltip__content u-align-left'> Terdapat pembulatan karena total belanja kamu di bawah pembayaran minimum sebesar {{ minPayment }} </div> </div> </div> </div> </td> <td class='u-pad-bottom--2 u-align-right qa-invoice-buffer-amount'>{{ bufferAmount.BLMonefy() }}</td> </tr> </table> <dl class='o-split o-split--micro u-mrgn-bottom--2 u-mrgn-top--2'> <dt class='o-split__title u-txt--bold'> Total Pembayaran </dt> <dd class='o-split__desc u-txt--bold qa-invoice-total-amount'> {{ totalPayment | money }} </dd> </dl> <a class='u-txt--small' href='#' @click.prevent='hideDetail'>Sembunyikan Rincian</a> </div> <div v-show='!isShowingDetail'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'>TOTAL TAGIHAN</div> <div class='u-mrgn-bottom--1' v-if='isUsingAtm'> {{ Math.floor(totalPayment / 1000).BLMonefy() }}.<strong>{{ ('00' + (totalPayment % 1000)).slice(-3) }}</strong> </div> <div class='u-mrgn-bottom--1' v-else>{{ totalPayment.BLMonefy() }}</div> <a class='u-txt--small qa-invoice-show-detail-payment' href='#js-pricing' v-show='!isShowingDetail' @click.prevent='showDetail'>Lihat Rincian</a> </div> </div>",props:{transaction:{type:Object,"default":function(){return{}}},paymentObject:{type:Object,"default":function(){return{}}}},data:function(){return{isShowingDetail:!1}},methods:{showDetail:function(){return this.isShowingDetail=!0},hideDetail:function(){return this.isShowingDetail=!1}},filters:{money:function(t){return parseInt(t||0).BLMonefy()}},components:{"voucher-dana-invoice":window.VoucherDanaInvoice},mixins:[PaymentObjectMixin]},("undefined"!=typeof exports&&null!==exports?exports:this).CouponDealsInvoiceDetail=t}.call(this),function(){var t;t={template:"<div class='js-print-invoice' style='display: none' :data-css='cssHref'> <div class='invoice'> <div class='invoice__header'> <img alt='Logo' src='/images/logo/single_352x56_0_red_03052016.png'> <h1>Invoice Kupon</h1> </div> <div class='invoice__general-info'> <p>No: <strong>{{ paymentObject.invoice_id }}</strong></p> <p>Metode Pembayaran: <strong>{{ getPaymentMethod }}</strong></p> <p>Tanggal: <strong>{{ invoiceDate }}</strong></p> <p v-if='partner'>Partner Layanan: <strong>{{ partner }}</strong></p> </div> <div class='invoice__buyer-details invoice__details u-mrgn-bottom--4'> <table width='100%' class=''> <tr> <td style='width: 16%' class='u-align-center remove-border u-bg--sand u-txt--bold'>Detil Pembeli</td> <td style='width: 40%; padding-left: 2%' class='remove-border u-bg--sand-light u-fg--charcoal'> Nama: <span class='u-txt--bold u-fg--charcoal'>{{ transaction.buyer_name }}</span></td> <td style='padding-left: 2%' class='remove-border u-bg--sand-light u-fg--charcoal'> Email: <span class='u-txt--bold u-fg--charcoal'>{{ buyerEmail }}</span></td> </tr> </table> </div> <div class='invoice__details'> <h2 class='u-txt--normal'>Rincian Tagihan</h2> <table> <tr> <th style='width: 65%' class='u-align-left u-pad-left--0'>Nama Kupon</th> <th class='u-align-center'>Jumlah</th> <th class='u-align-center'>Harga Satuan</th> <th class='u-align-center'>Harga Akhir</th> </tr> <tr v-for='detail in transaction.details'> <td class='gray u-pad-left--0'>{{ detail.sku.name }}</td> <td class='gray u-align-right'>{{ detail.quantity }}</td> <td class='u-align-right'>{{ detail.sku.price.BLMonefy() }}</td> <td class='u-align-right'>{{ detail.total_amount.BLMonefy() }}</td> </tr> <tr class='no-border-bottom'> <td></td> <td class='remove-border'></td> <td style='width: 17%' class='u-align-right'>Total Biaya</td> <td style='width: 17%' class='u-align-right'><strong>{{ transaction.total_amount.BLMonefy() }}</strong></td> </tr> <tr class='no-border-bottom' v-if='discount &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Diskon</td> <td class='u-align-right'>(-) {{ discount.BLMonefy() }}</td> </tr> <voucher-dana-invoice :couponAmount='danaCouponAmount' :isPrintMode='true' v-if='danaCouponAmount > 0'/> <tr class='no-border-bottom' v-if='checkServiceFee'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Biaya Layanan</td> <td class='u-align-right'>{{ serviceFee.BLMonefy() }}</td> </tr> <tr class='no-border-bottom' v-if='uniqCode &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Kode Unik</td> <td class='u-align-right'>{{ uniqCode }}</td> </tr> <tr class='no-border-bottom' v-if='depositReductionAmount &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Saldo BukaDompet</td> <td class='u-align-right'>(-) {{ depositReductionAmount.BLMonefy() }}</td> </tr> <tr class='no-border-bottom' v-if='partnerReductionAmount &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Saldo DANA</td> <td class='u-align-right'>(-) {{ partnerReductionAmount.BLMonefy() }}</td> </tr> <tr class='no-border-bottom' v-if='bufferAmount &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Pembulatan</td> <td class='u-align-right'> {{ bufferAmount.BLMonefy() }}</td> </tr> <tr class='no-border-bottom'> <td></td> <td class='remove-border'></td> <td class='u-align-right'><strong>Total Pembayaran</strong></td> <td class='u-align-right'><strong>{{ totalPayment.BLMonefy() }}</strong></td> </tr> </table> <footer style='width: 100%; position: absolute; bottom: 0; border-top: solid 0.70546mm #ddd; padding-top: 1.5875mm; font-size: 2.82185mm; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.4; color: #333;'> <p style='color: #333 !important; margin: 0;'> Contact Customer Center: <br> <strong style='color: #333 !important'>bl.id/bukabantuan</strong> <br> <strong style='color: #333 !important'>(021) 50813333</strong> </p> </footer> </div> </div> </div>",props:{transaction:{type:Object,"default":function(){return{}}},paymentObject:{type:Object,"default":function(){return{}}},cssHref:{type:String,"default":null},buyerEmail:{type:String,"default":null}},computed:{amount:function(){return parseInt(this.transaction.amount||0)-(parseInt(this.transaction.admin_charge||0)+parseInt(this.transaction.penalty_fee||0))},invoiceDate:function(){var t;return t=new Date(this.paymentObject.paid_at||this.paymentObject.created_at),DateHelper.humanizeTimestamp(t,"%dd% %month% %yyyy%, %hh%:%mi% WIB")},partner:function(){return this.transaction.partner&&this.transaction.partner.name?this.transaction.partner.name:""}},components:{"voucher-dana-invoice":window.VoucherDanaInvoice},mixins:[PaymentObjectMixin]},("undefined"!=typeof exports&&null!==exports?exports:this).CouponDealsPrintInvoice=t}.call(this),function(){$(function(){var t,e,n;return n=".js-coupon-deals-trx","undefined"!=typeof Vue&&$(n).length>0?(e={el:n,data:function(){return{transactionObject:{},isDoneLoading:!1,badgeCaption:null,isBadgeShow:!1}},computed:{partner:function(){return this.transactionObject.partner&&this.transactionObject.partner.name?this.transactionObject.partner.name:""}},methods:{printInvoice:function(){var t,e,n,i,a,o,r;return r=".js-print-invoice",i=$(r)[0],a=document.createElement("div"),a.id="invoice",a.innerHTML=i.innerHTML,o=document.createElement("div"),o.appendChild(a),e=$(".js-print-invoice").data("css"),n=document.createElement("link"),n.rel="stylesheet",n.media="all",n.href=e,t=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=1,status=0"),t.document.write(o.innerHTML),t.document.head.appendChild(n),t.document.close(),t.focus(),t.onload=function(){return t.print(),t.close()}}},components:{"coupon-deals-transaction-detail":CouponDealsTransactionDetail,"coupon-deals-invoice-detail":CouponDealsInvoiceDetail,"coupon-deals-print-invoice":CouponDealsPrintInvoice,"dana-refund-detail":DanaRefundDetail},mounted:function(){var t,e;return t=this,e=$(this.$el).data("transactionId"),window.BLSecureClient.api["interface"].couponDeals.getTransaction(e).then(function(e){return t.transactionObject=e.data,t.badgeCaption="Tunjukkan kupon ini kepada kasir "+t.transactionObject.merchant.name+" melalui aplikasi Bukalapak kamu untuk menggunakannya.",t.isBadgeShow="redeem_code"===((t.transactionObject.coupons||[])[0]||{}).coupon_type,t.isDoneLoading=!0})["catch"](function(t){throw t}),$(".js-copy-to-clipboard").blCopyToClipboard2()}},t=new Vue(e)):void 0})}.call(this),function(){}.call(this),function(){var t;t={template:"<div class='o-layout u-mrgn-left--0 u-border--1--sand-dark'> <div class='o-layout__item u-bg--sand-light u-pad-left--0'> <div class='u-display-table u-border-collapsed u-width-1'> <div v-if='transaction.customer_name' class='u-display-table-cell u-pad--3 u-4of12'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'>NAMA LENGKAP</div> {{ transaction.customer_name }} </div> <div :class='transaction.customer_name ? \"u-5of12 u-border-left--1--sand-dark\" : \"u-6of12\"' class='u-display-table-cell u-pad--3'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'>NOMOR KARTU KREDIT</div> {{ transaction.customer_number }} </div> <div :class='transaction.customer_name ? \"u-3of12\" : \"u-6of12\"' class='u-display-table-cell u-pad--3 u-3of12 u-border-left--1--sand-dark'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'>BANK</div> {{ transaction.biller.name }} </div> </div> </div> <div class='o-layout__item u-pad-left--0'> <div class='u-border-collapsed u-border-top--1--sand-dark u-display-table'> <div class='u-2of12 u-display-table-cell u-pad--3'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'>PRODUK</div> Tagihan Kartu Kredit </div> <div v-if='transaction.statement_date' class='u-4of12 u-display-table-cell u-pad--3 u-border-left--1--sand-dark'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'>TANGGAL TERBIT TAGIHAN</div> {{ transaction.statement_date | dateFormat }} </div> </div> </div> <template v-if='state'> <div class='o-layout__item u-pad-left--0'> <div class='u-display-table u-border-collapsed u-width-1 u-border-top--1--sand-dark'> <div class='u-display-table-cell u-pad--3'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'>STATUS TRANSAKSI</div> {{ state.status }} </div> </div> </div> <div v-if='state.description' class='o-layout__item u-pad-left--0'> <div class='u-display-table u-border-collapsed u-width-1 u-border-top--1--sand-dark'> <div class='u-display-table-cell u-pad--3'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'>KETERANGAN</div> {{ state.description }} </div> </div> </div> </template> </div>",props:{transaction:{type:Object,required:!0},paymentMethod:{type:String,"default":""}},filters:{dateFormat:function(t){return null==t&&(t=null),window.DateHelper.humanizeTimestamp(new Date(t),"%dd% %month% %yyyy%")}},computed:{state:function(){var t,e;switch(e=(this.transaction.state||"").toLowerCase()){case"processed":case"paid":return{status:"Diproses"};case"succeeded":return{status:"Selesai"};case"failed":return t="Uang pembayaran dikembalikan ke DANA/Saldo (BukaDompet)","credit_card"===this.paymentMethod&&(t="Uang pembayaran dikembalikan ke limit kartu kredit"),"dana"===this.paymentMethod&&(t="Uang pembayaran dikembalikan ke DANA"),("akulaku"===this.paymentMethod||"kredivo"===this.paymentMethod)&&(t="Uang pembayaran dikembalikan ke limit pinjaman"),{status:"Dibatalkan",description:t}}}}},("undefined"!=typeof exports&&null!==exports?exports:this).CreditCardTransactionDetail=t}.call(this),function(){var t;t={template:"<div aria_hidden='true'> <div v-show='!isShowingDetail'> <dl class='o-split o-split--micro u-mrgn-bottom--2'> <dt class='o-split__title'>Tagihan</dt> <dd class='o-split__desc qa-invoice-amount'>{{ amount | money }}</dd> </dl> <dl class='o-split o-split--micro u-mrgn-bottom--2'> <dt class='o-split__title'>Denda</dt> <dd class='o-split__desc qa-invoice-amount'>{{ transaction.penalty_fee | money }}</dd> </dl> <dl class='o-split o-split--micro u-mrgn-bottom--2'> <dt class='o-split__title'>Biaya Admin</dt> <dd class='o-split__desc qa-invoice-amount'>{{ transaction.admin_charge | money }}</dd> </dl> <table class='u-mrgn-top--2 u-12of12'> <tr v-if='discount &gt; 0'> <td class='u-pad-bottom--2'>Diskon</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-voucher-amount'>(-) {{ discount }}</td> </tr> <tr v-if='checkServiceFee'> <td class='u-pad-bottom--2'>Biaya Layanan</td> <td class='u-pad-bottom--2 u-align-right'>{{ serviceFee.BLMonefy() }}</td> </tr> <tr v-if='uniqCode &gt; 0'> <td class='u-pad-bottom--2'>Kode Unik</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-unique-code'>{{ uniqCode.BLMonefy() }}</td> </tr> <tr v-if='creditsBalanceUsed &gt; 0'> <td class='u-pad-bottom--2'>Potongan Saldo Credits</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-credits-balance-used'>(-) {{ creditsBalanceUsed.BLMonefy() }}</td> </tr> <tr v-if='depositBalanceUsed &gt; 0'> <td class='u-pad-bottom--2'>Potongan Saldo BukaDompet</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-deposit-balance-used'>(-) {{ depositBalanceUsed.BLMonefy() }}</td> </tr> </table> <dl class='o-split o-split--micro u-mrgn-bottom--2 u-mrgn-top--2'> <dt class='o-split__title u-txt--bold'> Total Pembayaran </dt> <dd class='o-split__desc u-txt--bold qa-invoice-total-amount'> {{ totalPayment | money }} </dd> </dl> <a class='u-txt--small' href='#' @click.prevent='hideDetail'>Sembunyikan Rincian</a> </div> <div v-show='isShowingDetail'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'>TOTAL TAGIHAN</div> <div class='u-mrgn-bottom--1' v-if='isUsingAtm'> {{ Math.floor(totalPayment / 1000).BLMonefy() }}.<strong>{{ ('00' + (totalPayment % 1000)).slice(-3) }}</strong> </div> <div class='u-mrgn-bottom--1' v-else>{{ totalPayment.BLMonefy() }}</div> <a class='u-txt--small qa-invoice-show-detail-payment' href='#js-pricing' v-show='isShowingDetail' @click.prevent='showDetail'>Lihat Rincian</a> </div> </div>",
props:{transaction:{type:Object,required:!0},paymentObject:{type:Object,required:!0}},data:function(){return{isShowingDetail:!1}},methods:{showDetail:function(){return this.isShowingDetail=!1},hideDetail:function(){return this.isShowingDetail=!0}},computed:{amount:function(){return Number(this.transaction.amount)-Number(this.transaction.admin_charge)}},filters:{money:function(t){return Number(t).BLMonefy()}},mixins:[PaymentObjectMixin]},("undefined"!=typeof exports&&null!==exports?exports:this).CreditCardInvoiceDetail=t}.call(this),function(){var t;t={template:"<div class='js-print-invoice' style='display: none' :data-css='cssHref'> <div class='invoice'> <div class='invoice__header'> <img alt='Logo' src='/images/logo/single_352x56_0_red_03052016.png'> <h1>Bukti Pembayaran Tagihan Kartu Kredit</h1> </div> <div class='invoice__general-info'> <p>No: <strong>{{ paymentObject.invoice_id }}</strong></p> <p>Metode Pembayaran: <strong>{{ getPaymentMethod }}</strong></p> <p>Tanggal: <strong>{{ invoiceDate }}</strong></p> </div> <div class='invoice__buyer-details'> <div class='invoice__buyer-details-col-wrapper' style='padding: 0px;'> <h2 class='invoice__buyer-header'>Detil Pelanggan</h2> </div> <div class='invoice__buyer-details-col-wrapper'> <div class='invoice__buyer-details-col'> Bank: <strong>{{ transaction.biller.name }}</strong> </div> <div class='invoice__buyer-details-col'> Nomor Kartu Kredit: <strong>{{ transaction.customer_number }}</strong> </div> <div class='invoice__buyer-details-col'> Nomor Jurnal: <strong>{{ transaction.partner_financial_journal_number }}</strong> </div> <div v-if='partner' class='invoice__buyer-details-col'> Partner Layanan: <strong>{{ partner }}</strong> </div> </div> </div> <div class='invoice__details'> <h2>Rincian Tagihan</h2> <table> <tr> <th style='width: 17%' class='u-align-left'>Produk</th> <th colspan='2' class='u-align-left'>Deskripsi</th> <th class='u-align-right'>Biaya</th> </tr> <tr> <td class='gray'>Tagihan Kartu Kredit</td> <td colspan='2' class='gray'>Tagihan Kartu Kredit {{ transaction.biller.name }}</td> <td class='u-align-right'>{{ amount | money }}</td> </tr> <tr> <td colspan='3' class='gray'>Biaya Admin</td> <td class='u-align-right'>{{ transaction.admin_charge | money }}</td> </tr> <tr class='no-border-bottom'> <td></td> <td class='remove-border'></td> <td style='width: 17%' class='u-align-right'>Total Biaya</td> <td style='width: 17%' class='u-align-right'><strong>{{ transaction.amount | money }}</strong></td> </tr> <tr class='no-border-bottom' v-if='discount &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Diskon</td> <td class='u-align-right'>(-) {{ discount | money }}</td> </tr> <tr class='no-border-bottom' v-if='checkServiceFee'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Biaya Layanan</td> <td class='u-align-right'>{{ serviceFee | money }}</td> </tr> <tr class='no-border-bottom' v-if='uniqCode &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Kode Unik</td> <td class='u-align-right'>{{ uniqCode }}</td> </tr> <tr class='no-border-bottom' v-if='depositReductionAmount &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Saldo BukaDompet</td> <td class='u-align-right'>(-) {{ depositReductionAmount | money }}</td> </tr> <tr class='no-border-bottom' v-if='bufferAmount &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Pembulatan</td> <td class='u-align-right'>(-) {{ bufferAmount | money }}</td> </tr> <tr class='no-border-bottom'> <td></td> <td class='remove-border'></td> <td class='u-align-right'><strong>Total Pembayaran</strong></td> <td class='u-align-right'><strong>{{ totalPayment | money }}</strong></td> </tr> </table> <footer style='width: 100%; position: absolute; bottom: 0; border-top: solid 0.70546mm #ddd; padding-top: 1.5875mm; font-size: 2.82185mm; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.4; color: #333;'> <p style='color: #333 !important; margin: 0;'> Contact Customer Center: <br> <strong style='color: #333 !important'>bl.id/bukabantuan</strong> <br> <strong style='color: #333 !important'>(021) 50813333</strong> </p> </footer> </div> </div> </div>",props:{transaction:{type:Object,"default":function(){return{}}},paymentObject:{type:Object,"default":function(){return{}}},cssHref:{type:String,"default":null}},computed:{amount:function(){return Number(this.transaction.amount)-Number(this.transaction.admin_charge)},invoiceDate:function(){var t;return t=new Date(this.paymentObject.paid_at||this.paymentObject.created_at),DateHelper.humanizeTimestamp(t,"%dd% %month% %yyyy%, %hh%:%mi% WIB")},partner:function(){return this.transaction.partner&&this.transaction.partner.name?this.transaction.partner.name:""}},filters:{money:function(t,e){return t.BLMonefy()}},mixins:[PaymentObjectMixin]},("undefined"!=typeof exports&&null!==exports?exports:this).CreditCardPrintInvoice=t}.call(this),function(){$(function(){var t,e,n;return n=".js-credit-card-bill-trx-detail","undefined"!=typeof Vue&&$(n).length>0?(e={el:n,data:function(){return{transaction:{},isDoneLoading:!1,printInvoiceHtml:null,cssLinkDom:null}},computed:{partner:function(){return this.transaction.partner&&this.transaction.partner.name?this.transaction.partner.name:""}},methods:{printInvoice:function(){var t,e,n,i;return this.printInvoiceHtml||(n=$(".js-print-invoice").eq(0),e=$("<div/>",{id:"invoice"}).html(n.html()),t=$("<link/>",{rel:"stylesheet",media:"all",href:n.data("css")}),this.printInvoiceHtml=e[0].outerHTML,this.cssLinkDom=t[0]),i=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=1,status=0"),i.document.write(this.printInvoiceHtml),i.document.head.appendChild(this.cssLinkDom),i.document.close(),i.focus(),i.onload=function(){return i.print(),i.close()}}},components:{"credit-card-bill-transaction-detail":CreditCardTransactionDetail,"credit-card-bill-print-invoice":CreditCardPrintInvoice,"credit-card-bill-invoice-detail":CreditCardInvoiceDetail},mounted:function(){var t,e;return t=this,e=$(this.$el).data("transactionId"),window.BLSecureClient.api["interface"].creditCardBill.getTransaction(e).then(function(e){return t.transaction=e.data,t.isDoneLoading=!0})["catch"](function(t){var e;return e='<a href="#" onclick="return !!window.location.reload()">refresh halaman ini.</a>',window.BLFlash.initByJS("Terjadi gangguan. Silakan coba "+e,"warning")}),$(".js-copy-to-clipboard").blCopyToClipboard2()}},t=new Vue(e)):void 0})}.call(this),function(){var t;t={props:{purchaseTime:{type:Number,"default":0},source:{type:String,"default":"landing_page"}},mounted:function(){return this.sendTracker()},methods:{sendTracker:function(){var t,e,n;return t=this.purchaseTime>0?(new Date).getTime()-this.purchaseTime:0,e=$.deparam(window.location.href.split("?")[1]||""),n=this.source||e.source||e.from,this.sendCheckoutTracker(t,n)}}},("undefined"!=typeof exports&&null!==exports?exports:this).VpCheckoutTracking=t}.call(this),function(){var t;t={template:"<div class='c-panel u-mrgn-bottom--3'> <div class='c-panel__head'> <h2 class='c-panel__title'>Informasi Pelanggan</h2> </div> <div class='c-panel__body'> <dl class='c-deflist'> <template v-if='transaction.customer_name'> <dt class='c-deflist__label u-fg--ash-dark'>Nama Lengkap</dt> <dd class='c-deflist__value'>{{ transaction.customer_name }}</dd> </template> <dt class='c-deflist__label u-fg--ash-dark'>Nomor Kartu Kredit</dt> <dd class='c-deflist__value'>{{ transaction.customer_number }}</dd> <dt class='c-deflist__label u-fg--ash-dark'>Bank</dt> <dd class='c-deflist__value'>{{ transaction.biller.name }}</dd> </dl> </div> </div>",mixins:[VpCheckoutTracking],props:{transaction:{type:Object,required:!0,"default":function(){return{}}}},methods:{sendCheckoutTracker:function(t,e){return window.CreditCardBillTracker.checkout({source:e,trx_id:""+this.transaction.id,bank_name:this.transaction.biller.name,paid_amount:Number(this.transaction.amount),bill_amount:Number(this.transaction.minimum_payment||this.transaction.amount)})}}},("undefined"!=typeof exports&&null!==exports?exports:this).CreditCardCustomerInfo=t}.call(this),function(){var t;t={template:"<div class='u-mrgn-bottom--1'> <dl class='o-split o-split--micro'> <dt class='o-split__title'>Total Tagihan</dt> <dd class='o-split__desc'>{{ billAmount }}</dd> </dl> <dl v-if='transaction.admin_charge' class='o-split o-split--micro'> <dt class='o-split__title'>Biaya Admin</dt> <dd class='o-split__desc'>{{ transaction.admin_charge.BLMonefy() }}</dd> </dl> </div>",props:{transaction:{type:Object,required:!0,"default":function(){return{}}}},computed:{billAmount:function(){return(Number(this.transaction.amount)-Number(this.transaction.admin_charge)).BLMonefy()}}},("undefined"!=typeof exports&&null!==exports?exports:this).CreditCardPaymentSummary=t}.call(this),function(){$(function(){var t,e,n;return n=".js-credit-card-bill-info","undefined"!=typeof Vue&&$(n).length>0?(e={el:n,data:function(){return{transaction:{},isDoneLoadingData:!1}},components:{"credit-card-bill-payment-summary":CreditCardPaymentSummary,"credit-card-bill-customer-info":CreditCardCustomerInfo},watch:{isDoneLoadingData:function(t){return $(this.$el).find(".js-credit-card-bill-loading").hide()}},mounted:function(){var t,e;return e=$(this.$el).data("transactionId"),t=this,$(document).trigger("payment_summary:mounted"),window.BLSecureClient.api["interface"].creditCardBill.getTransaction(e).then(function(e){return t.transaction=e.data,t.isDoneLoadingData=!0})}},t=new Vue(e)):void 0})}.call(this),function(){}.call(this),function(){"undefined"!=typeof Vue&&(Vue.filter("toDateObject",StringToDateObject),Vue.filter("date",FullDate))}.call(this),function(){var t;t={template:"<div class='o-layout u-mrgn-left--0 u-border--1--sand-dark'> <div class='o-layout__item u-pad-left--0'> <div class='o-layout__item u-pad--3 u-border-top--1--sand-dark u-bg--sand-light'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'>NAMA PRODUK</div> {{ transactionObject.selling_package.name }} </div> </div> <template v-if='state'> <div class='o-layout__item u-pad-left--0'> <div class='o-layout__item u-pad--3 u-border-top--1--sand-dark'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'> STATUS PESANAN </div> {{ state.status }} </div> </div> <div v-if='state.description' class='o-layout__item u-pad-left--0'> <div class='o-layout__item u-pad--3 u-border-top--1--sand-dark'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'> KETERANGAN </div> {{ state.description }} </div> </div> </template> <template v-if='succeeded'> <div class='o-layout__item u-pad-left--0' v-if='serialNumber != \"-\"'> <div class='o-layout__item u-pad--3 u-border-top--1--sand-dark'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'> SERIAL NUMBER </div> {{ serialNumber }} </div> </div> <div class='o-layout__item u-pad-left--0' v-if='voucherCode != \"-\"'> <div class='o-layout__item u-pad--3 u-border-top--1--sand-dark'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'> KODE VOUCHER </div> {{ voucherCode }} <input type='hidden' id='voucher-code' :value='voucherCode'> <a class='u-float-right u-mrgn-right--1' @click.stop.prevent='copyVoucherCode'> Salin </a> <div v-if='redeemUrl != \"-\"' class='u-mrgn-top--4'> <span class='c-icon c-icon--info c-icon--medium u-fg--azure'></span> Salin dulu kodenya untuk redeem voucher kamu. <a class='c-btn c-btn--red u-mrgn-top--2 u-mrgn-left--2' :href='redeemUrl' target='_blank' > Redeem Voucher </a> </div> </div> </div> <div class='o-layout__item u-pad-left--0' v-if='playerId != \"-\"'> <div class='o-layout__item u-pad--3 u-border-top--1--sand-dark'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'> {{ isRagnarok ? `ID` : `PLAYER ID` }} </div> {{ playerId }} </div> </div> <div class='o-layout__item u-pad-left--0' v-if='nickname != \"-\"'> <div class='o-layout__item u-pad--3 u-border-top--1--sand-dark'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'> NICKNAME </div> {{ nickname }} </div> </div> </template> </div>",props:{transactionObject:{type:Object,required:!0},toggle:{type:Boolean,"default":!0},paymentMethod:{type:String,"default":""}},computed:{state:function(){var t,e;switch(e=(this.transactionObject.state||"").toLowerCase()){case"pending":return{status:"Pending"};case"processed":case"paid":return{status:"Dibayar"};case"succeeded":return{status:"Selesai"};case"failed":return t="Uang pembayaran dikembalikan ke DANA/Saldo (BukaDompet)","credit_card"===this.paymentMethod&&(t="Uang pembayaran dikembalikan ke limit kartu kredit"),"dana"===this.paymentMethod&&(t="Uang pembayaran dikembalikan ke DANA"),("akulaku"===this.paymentMethod||"kredivo"===this.paymentMethod)&&(t="Uang pembayaran dikembalikan ke limit pinjaman"),{status:"Dibatalkan",description:t}}},slug:function(){return this.transactionObject.product.slug},isRagnarok:function(){return"ragnarok"===this.slug},succeeded:function(){return"succeeded"===this.transactionObject.state},serialNumber:function(){var t;return t=this.transactionObject.serial_number||"-"},voucherCode:function(){var t;return t=this.transactionObject.voucher_code||"-"},playerId:function(){var t;return t="-",this.transactionObject.game_user_id&&(t=this.transactionObject.game_user_id.split("-")[0]),t},nickname:function(){var t;return t=this.transactionObject.game_user_info.username||"-"},redeemUrl:function(){var t;return t=this.transactionObject.product.redeem_url||"-"}},methods:{copyVoucherCode:function(){var t;return t=document.querySelector("#voucher-code"),t.setAttribute("type","text"),t.select(),document.execCommand("copy"),t.setAttribute("type","hidden"),window.getSelection().removeAllRanges()}}},("undefined"!=typeof exports&&null!==exports?exports:this).GameVoucherTransactionDetail=t}.call(this),function(){var t;t={template:"<div aria_hidden='true'> <div v-show='!isShowingDetail'> <div class='u-txt--tiny u-fg--ash-dark u-mrgn-bottom--1'>RINCIAN PEMBAYARAN</div> <div class='u-mrgn-bottom--1' v-if='isUsingAtm'> {{ Math.floor(totalPayment / 1000).BLMonefy() }}.<strong>{{ ('00' + (totalPayment % 1000)).slice(-3) }}</strong> </div> <div class='u-mrgn-bottom--1' v-else>{{ totalAmount }}</div> <a class='u-txt--small qa-invoice-show-detail-payment' href='#js-pricing' v-show='!isShowingDetail' @click.prevent='showDetail'>Lihat Rincian</a> </div> <div v-show='isShowingDetail'> <dl class='o-split o-split--micro'> <dt class='o-split__title'>Harga Produk</dt> <dd class='o-split__desc qa-invoice-amount'>{{ money(transaction.amount) }}</dd> </dl> <table class='u-mrgn-top--2 u-12of12'> <tr v-if='discount &gt; 0'> <td class='u-pad-bottom--2'>Diskon</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-voucher-amount'>(-) {{ money(discount, 'Rp') }}</td> </tr> <voucher-dana-invoice :couponAmount='danaCouponAmount' :isPrintMode='false' v-if='danaCouponAmount > 0'/> <tr v-if='checkServiceFee'> <td class='u-pad-bottom--2'>Biaya Layanan</td> <td class='u-pad-bottom--2 u-align-right'>{{ money(serviceFee, 'Rp') }}</td> </tr> <tr v-if='uniqCode &gt; 0'> <td class='u-pad-bottom--2'>Kode Unik</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-unique-code'>{{ money(uniqCode, 'Rp') }}</td> </tr> <tr v-if='depositReductionAmount &gt; 0'> <td class='u-pad-bottom--2'>Saldo Bukadompet</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-reduction-amount'>(-) {{ money(depositReductionAmount, 'Rp') }}</td> </tr> <tr v-if='partnerReductionAmount &gt; 0'> <td class='u-pad-bottom--2'>Saldo DANA</td> <td class='u-pad-bottom--2 u-align-right qa-invoice-partner-reduction-amount'>(-) {{ money(partnerReductionAmount, 'Rp') }}</td> </tr> </table> <dl class='o-split o-split--micro u-mrgn-top--2'> <dt class='o-split__title u-txt--bold'> Total Pembayaran </dt> <dd class='o-split__desc u-txt--bold qa-invoice-total-amount'> {{ totalAmount }} </dd> </dl> <a class='u-txt--small' href='#' @click.prevent='hideDetail'>Sembunyikan Rincian</a> </div> </div>",props:["transaction","paymentObject"],data:function(){return{isShowingDetail:!1}},computed:{totalAmount:function(){return this.totalPayment.BLMonefy()}},methods:{showDetail:function(){return this.isShowingDetail=!0},hideDetail:function(){return this.isShowingDetail=!1},money:function(t,e){return t.BLMonefy()}},components:{"voucher-dana-invoice":window.VoucherDanaInvoice},mixins:[PaymentObjectMixin]},("undefined"!=typeof exports&&null!==exports?exports:this).GameVoucherInvoiceDetail=t}.call(this),function(){var t;t={template:"<div class='js-print-invoice' style='display: none' :data-css='cssHref'> <div class='invoice'> <div class='invoice__header'> <img alt='Logo' src='/images/logo/single_352x56_0_red_03052016.png'> <h1>Bukti Pembayaran Voucher</h1> </div> <div class='invoice__general-info'> <p>No: <strong>&num;{{ paymentObject.invoice_id }}</strong></p> <p>Metode Pembayaran: <strong>{{ getPaymentMethod }}</strong></p> <p>Tanggal: <strong>{{ invoiceDate }}</strong></p> </div> <div class='invoice__details'> <h2>Rincian Pemesanan</h2> <table> <tr> <th style='width: 23%' class='u-align-left'>Produk</th> <th colspan='2' class='u-align-left'>Deskripsi</th> <th style='width: 17%' class='u-align-right'>Harga</th> </tr> <tr> <td class='gray'>Voucher Game</td> <td colspan='2' class='gray'>{{ transaction.selling_package.name }}</td> <td class='u-align-right'>{{ transaction.amount | money }}</td> </tr> <tr class='no-border-bottom' v-if='discount &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Diskon</td> <td class='u-align-right'>(-) {{ discount | money }}</td> </tr> <voucher-dana-invoice :couponAmount='danaCouponAmount' :isPrintMode='true'  v-if='danaCouponAmount > 0'/> <tr class='no-border-bottom' v-if='checkServiceFee'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Biaya Layanan</td> <td class='u-align-right'>{{ serviceFee | money }}</td> </tr> <tr class='no-border-bottom' v-if='uniqCode &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Kode Pembayaran</td> <td class='u-align-right'>{{ uniqCode | money }}</td> </tr> <tr class='no-border-bottom' v-if='depositReductionAmount &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Saldo Bukadompet</td> <td class='u-align-right'>(-) {{ depositReductionAmount | money }}</td> </tr> <tr class='no-border-bottom' v-if='partnerReductionAmount &gt; 0'> <td></td> <td class='remove-border'></td> <td class='u-align-right'>Saldo DANA</td> <td class='u-align-right'>(-) {{ partnerReductionAmount | money }}</td> </tr> <tr class='no-border-bottom'> <td></td> <td class='remove-border'></td> <td class='u-align-right' style='width: 17%'><strong>Total Pembayaran</strong></td> <td class='u-align-right'><strong>{{ totalPayment | money }}</strong></td> </tr> </table> <footer style='width: 100%; position: absolute; bottom: 0; border-top: solid 0.70546mm #ddd; padding-top: 1.5875mm; font-size: 2.82185mm; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.4; color: #333;'> <p style='color: #333 !important; margin: 0;'> Contact Customer Center: <br> <strong style='color: #333 !important'>bl.id/bukabantuan</strong> <br> <strong style='color: #333 !important'>(021) 50813333</strong> </p> </footer> </div> </div> </div>",props:["transaction","paymentObject","cssHref"],computed:{remitted:function(){return"succeeded"===this.transaction.state&&this.transaction.token},invoiceDate:function(){var t,e,n,i,a;return t="",t=null!==this.paymentObject.paid_at?new Date(this.paymentObject.paid_at):new Date(this.paymentObject.created_at),e=$.BLUtils.prependZero(t.getDate()),n=DateUtils.months[t.getMonth()],a=t.getFullYear(),i=$.BLUtils.prependZero(t.getHours())+"."+$.BLUtils.prependZero(t.getMinutes()),e+" "+n+" "+a+", "+i+" WIB"},voucherCode:function(){var t;return t=this.transaction.voucher_code,t?t.match(/(.{1,4})/g).join("-"):"-"},partner:function(){return this.transaction.partner?this.transaction.partner:""}},filters:{money:function(t,e){return t.BLMonefy()}},components:{"voucher-dana-invoice":window.VoucherDanaInvoice},mixins:[PaymentObjectMixin]},("undefined"!=typeof exports&&null!==exports?exports:this).GameVoucherPrintInvoice=t}.call(this),function(){}.call(this),function(){$(function(){var t,e,n;return n=".js-game-voucher-trx","undefined"!=typeof Vue&&$(n).length>0?(e={el:n,data:function(){return{transactionObject:{},isDoneLoading:!1}},computed:{partner:function(){return this.transactionObject.partner?this.transactionObject.partner:""}},methods:{printInvoice:function(){var t,e,n,i,a,o,r;return r=".js-print-invoice",i=$(r)[0],a=document.createElement("div"),a.id="invoice",a.innerHTML=i.innerHTML,o=document.createElement("div"),o.appendChild(a),e=$(".js-print-invoice").data("css"),n=document.createElement("link"),n.rel="stylesheet",n.media="all",n.href=e,t=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=1,status=0"),t.document.write(o.innerHTML),t.document.head.appendChild(n),t.document.close(),t.focus(),t.onload=function(){return t.print(),t.close()}}},components:{"game-voucher-transaction-detail":GameVoucherTransactionDetail,"game-voucher-invoice-detail":GameVoucherInvoiceDetail,"game-voucher-print-invoice":GameVoucherPrintInvoice,"dana-refund-detail":DanaRefundDetail},mounted:function(){var t;return t=$(this.$el).data("transactionId"),window.BLSecureClient.api["interface"].gameVoucher.getData("transactions",t).then(function(t){return function(e){return t.transactionObject=e.data,t.isDoneLoading=!0}}(this)),$(".js-copy-to-clipboard").blCopyToClipboard2()}},t=new Vue(e)):void 0})}.call(this),function(){var t;t={template:"<div class='u-mrgn-bottom--1'> <dl class='o-split o-split--micro'> <dt class='o-split__title'>Harga Barang</dt> <dd class='o-split__desc'>{{ money(transaction.amount) }}</dd> </dl> </div>",props:["transaction"],methods:{money:function(t){return t.BLMonefy()}}},("undefined"!=typeof exports&&null!==exports?exports:this).GameVoucherPaymentSummary=t}.call(this),function(){var t;t={template:"<div class='c-panel'> <div class='c-panel__head'> <h2 class='c-panel__title'>Detail Pembelian</h2> </div> <div class='c-panel__body'> <dl class='c-deflist'> <dt class='c-deflist__label u-fg--ash-dark'>Nama Voucher</dt> <dd class='c-deflist__value'>{{ transaction.selling_package.product_name }}</dd> <dt class='c-deflist__label u-fg--ash-dark'>Nominal</dt> <dd class='c-deflist__value'> {{ transaction.selling_package.package_value }} </dd> </dl> </div> </div>",props:["transaction"]},("undefined"!=typeof exports&&null!==exports?exports:this).GameVoucherCustomerInfo=t}.call(this),function(){}.call(this),function(){"undefined"!=typeof Vue&&(Vue.filter("toDateObject",StringToDateObject),Vue.filter("date",FullDate))}.call(this),function(){$(function(){var t,e;return"undefined"!=typeof Vue&&$(".js-game-voucher-info").length>0?(e={el:".js-game-voucher-info",data:function(){return{transaction:{},isDoneLoadingData:!1}},components:{"game-voucher-payment-summary":GameVoucherPaymentSummary,"game-voucher-customer-info":GameVoucherCustomerInfo},watch:{isDoneLoadingData:function(t){return t?$(this.$el).find(".js-game-voucher-loading").hide():void 0}},mounted:function(){var t,e;return e=$(this.$el).data("transactionId"),t=this,$(document).trigger("payment_summary:mounted"),window.BLSecureClient.api["interface"].gameVoucher.getData("transactions",e).then(function(e){return t.transaction=e.data,t.isDoneLoadingData=!0})}},t=new Vue(e)):void 0})}.call(this),function(){}.call(this),function(){var t;t=$(".js-ev"),t.each(function(){var t,e,n,i,a,o,r,s;switch(t=$(this),s=t.data("type")){case"phone-credit":return new PhoneCredit(t,EVoucher);case"phone-credit-widget":return new PhoneCredit(t,EVoucherWidget);case"electricity":return a=t.data("combos"),o=t.data("isAgent"),r=t.data("source"),e=new ElecPostpaid($(a.postpaid),EVoucher,r),n=new ElecPrepaid($(a.prepaid),EVoucher,r,o),i=[{type:"postpaid",object:e},{type:"prepaid",object:n}],new ComboEVoucher(t,i);case"electricity-widget":return a=t.data("combos"),o=t.data("isAgent"),r=t.data("source"),e=new ElecPostpaid($(a.postpaid),EVoucherWidget,r),n=new ElecPrepaid($(a.prepaid),EVoucherWidget,r,o),i=[{type:"postpaid",object:e},{type:"prepaid",object:n}],new ComboEVoucher(t,i);case"plain-credit":return new PlainCredit(t,EVoucher);case"plain-credit-widget":return new PlainCreditWidget(t,EVoucherWidget);case"zakat":return new EVoucherZakat(t);case"zakat-widget":return new EVoucherZakat(t,!0);case"bpjs-kesehatan-widget":return new BpjsKesehatanWidget(t,EVoucherWidget);default:return new PlainCredit(t,EVoucher)}})}.call(this);
//# sourceMappingURL=/ast/maps/evoucher-6430a2ad9112de17bf2cbcbe0587db344810003be5379baa16e5eaf62f257dc5.js.map
